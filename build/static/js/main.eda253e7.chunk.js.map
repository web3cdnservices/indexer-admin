{"version":3,"sources":["utils/logger.ts","containers/unstated.tsx","containers/loadingContext.tsx","components/loading.tsx","utils/queries.ts","containers/coordinatorIndexer.tsx","hooks/web3Hook.ts","utils/web3.ts","containers/contractSdk.tsx","containers/notificationContext.tsx","containers/web3.tsx","components/Icon.tsx","components/primary.tsx","resources/arrow.svg","resources/metamask.svg","utils/metamask.ts","pages/metamask/config.ts","pages/metamask/prompts.ts","pages/metamask/styles.tsx","pages/metamask/metamaskView.tsx","utils/apolloClient.ts","pages/register/types.ts","components/avatar.tsx","components/accountCard.tsx","pages/register/styles.tsx","pages/register/utils.ts","resources/cross.svg","components/formItem.tsx","components/modalView.tsx","utils/indexerActions.ts","hooks/indexerHook.ts","pages/project-details/types.ts","hooks/network.ts","types/schemas.ts","pages/controllers/types.ts","utils/notification.ts","pages/account/config.ts","pages/project-details/prompts.ts","pages/project-details/config.ts","utils/transactions.ts","hooks/transactionHook.ts","pages/account/prompts.ts","pages/header/header.tsx","pages/account/styles.tsx","pages/account/account.tsx","utils/account.ts","components/introductionView.tsx","pages/controllers/prompts.ts","pages/controllers/config.ts","components/asyncRender.tsx","pages/controllers/styles.tsx","pages/controllers/controllerItem.tsx","pages/controllers/controllersPage.tsx","resources/discord.svg","resources/github.svg","resources/linkendin.svg","resources/matrix.svg","resources/medium.svg","resources/telegram.svg","resources/twitter.svg","pages/footer/config.ts","pages/footer/styles.tsx","pages/footer/footer.tsx","resources/subquery.svg","pages/header/styles.tsx","pages/network/components/networkTabBarView.tsx","pages/login/styles.tsx","pages/login/loginPage.tsx","components/tagItem.tsx","components/logView.tsx","pages/payg/types.ts","pages/network/styles.tsx","pages/network/networkPage.tsx","components/statusLabel.tsx","pages/payg/styles.tsx","pages/payg/paygPage.tsx","components/alertView.tsx","hooks/projectHook.ts","utils/validateService.ts","hooks/routerHook.ts","utils/project.ts","pages/project-details/components/projectDetailHeader.tsx","pages/project-details/components/projectTabBarView.tsx","pages/project-details/styles.tsx","pages/project-details/components/projectPaygView.tsx","pages/project-details/components/projectServiceCard.tsx","pages/projects/constant.ts","pages/project-details/components/projectStatusView.tsx","pages/project-details/components/projectDetailsView.tsx","pages/project-details/projectDetailsPage.tsx","pages/projects/styles.tsx","pages/projects/components/projecItemsHeader.tsx","pages/projects/components/projectItem.tsx","pages/projects/components/projectsEmptyView.tsx","pages/projects/projectsPage.tsx","hooks/registerHook.ts","pages/register/prompts.ts","pages/register/indexerRegistryView.tsx","pages/register/registerPage.tsx","App.tsx","reportWebVitals.ts","index.tsx","../node_modules/@subql/contract-sdk/publish sync /^/.//.*/.json$","utils/ipfs.ts"],"names":["Logger","prefix","this","scope","message","rest","console","log","toString","warn","error","EMPTY","Symbol","undefined","logger","createContainer","useHook","options","Ctx","createContext","displayName","Provider","props","initialState","children","l","useMemo","getLogger","value","useContainer","useContext","Error","useState","pageLoading","setPageLoading","useLoading","LoadingProvider","Container","styled","div","Loading","size","GET_COORDINATOR_INDEXER","gql","ADD_INDEXER","START_PROJECT","STOP_PROJECT","GET_CONTROLLERS","ADD_CONTROLLER","REMOVE_CONTROLLER","WITHDRAW_CONTROLLER","REMOVE_ACCOUNTS","ADD_PROJECT","REMOVE_PROJECT","PAYG_PRICE","GET_PROJECT","GET_PROJECTS","GET_CHANNELS","CHANNEL_CHECKPOINT","CHANNEL_CLOSE","GET_LOG","GET_QUERY_METADATA","GET_INDEXER_PROJECTS","GET_PROJECT_DETAILS","GET_REGISTRY_VERSIONS","useLazyQuery","load","data","loading","useMutation","addIndexer","React","indexer","setIndexer","accountMetadata","updateIndexer","a","variables","useCoordinatorIndexer","CoordinatorIndexerProvider","useIsMetaMaskInstalled","window","ethereum","isMetaMask","useWeb3","useWeb3React","useSigner","active","account","library","getSigner","useIsMetaMask","provider","ChainID","Networks","ChainIDs","moonbase","testnet","mainnet","NetworkToChainID","RPC_URLS","NETWORK_CONFIGS","chainId","intToHex","chainName","nativeCurrency","name","symbol","decimals","rpcUrls","blockExplorerUrls","deployments","moonbaseDeployment","createContractOptions","network","deploymentDetails","sdk","setSdk","useEffect","chaiId","includes","sdkOption","ContractSDK","create","then","instance","catch","e","useContractSDK","ContractSDKProvider","Notifications","notification","setNotification","dispatchNotification","info","Store","addNotification","title","type","container","animationIn","animationOut","dismiss","removeNotification","id","useNotification","NotificationProvider","injectedConntector","InjectedConnector","supportedChainIds","injectNetwork","env","NETWORK","networkConnector","NetworkConnector","urls","defaultChainId","getLibrary","providers","Web3Provider","connect","activate","isAuthorized","InitProvider","activateInitialConnector","useCallback","Image","img","Icon","src","url","href","alt","Separator","height","width","color","mr","Text","alignCenter","fw","ml","mt","mb","mw","Label","label","ff","StyledButton","SubButton","align","Spin","Spinner","Button","disabled","leftItem","ButtonContainer","FormContainer","Form","NetworkError","ethMethods","connectWithMetaMask","request","method","switchNetwork","params","code","extensionInstallUrls","Chrome","Firefox","Brave","Edge","prompts","install","desc","buttonTitle","invalidAccount","invalidNetwork","MetaMaskContainer","ContentContainer","MetaMaskView","isMetaMaskInstalled","isNetworkError","setNetworkError","errorMsg","setErrorMsg","onButtonClick","browserName","open","result","metaMaskItem","MetaMaskIcon","ArrowIcon","onClick","defaultCoordinatorUrl","location","protocol","hostname","COORDINATOR_SERVICE_PORT","coordinatorServiceUrl","__DEV__","COORDINATOR_SERVICE_URL","proxyServiceUrl","createApolloClient","uri","ApolloClient","cache","InMemoryCache","defaultOptions","watchQuery","fetchPolicy","RegisterStep","StepStatus","Avatar","address","diameter","seed","jsNumberForAddress","AccountCard","buttons","renderButtons","map","HeaderContainer","DescContainer","isEmpty","GroupButtonContainer","RegistrySteps","p","Steps","registerSteps","Object","entries","slice","getStepIndex","step","findIndex","s","getStepStatus","currentIndex","index","process","finish","wait","FormField","Field","Option","option","FieldItem","initialValue","placeholder","fieldKey","setFieldValue","errors","setValue","htmlFor","as","onChange","event","currentValue","target","val","modalStyles","content","backgroundColor","borderRadius","top","left","right","bottom","marginRight","transform","maxWidth","minWidth","maxHeight","padding","overlay","zIndex","ModalView","visible","onClose","currentStep","steps","length","item","stepItem","isOpen","style","closeTimeoutMS","ariaHideApp","IconContainer","cross","ModalSteps","current","i","Step","status","form","initialValues","formValues","validationSchema","schema","onSubmit","onFormSubmit","submitForm","InputForm","items","formKey","renderContent","emptyControllerAccount","ErrorMessages","indexerRequestApprove","signer","amount","sqToken","increaseAllowance","staking","utils","parseEther","tx","indexerRegistry","metadata","commissionRate","registerIndexer","updateMetadata","unregisterIndexer","controller","controllerToIndexer","setControllerAccount","deploymentId","queryRegistry","startIndexing","cidToBytes32","updateIndexingStatusToReady","stopIndexing","DockerRegistry","IndexingStatus","ProjectStatus","PaygStatus","AccountAction","ProjectsAction","ProjectAction","useIsRegistedIndexer","isIndexer","setIsIndexer","getIsIndexer","useIsIndexer","isCoordinatorIndexer","useIsCoordinatorIndexer","isRegisteredIndexer","useController","setController","getController","indexerToController","useTokenBalance","deps","tokenBalance","setBalance","getTokenBalance","balanceOf","balance","Number","formatUnits","toFixed","useBalance","getBalance","fixedValue","useIndexerMetadata","setMetadata","fetchMetadata","metadataByIndexer","metadataHash","cat","bytes32ToCid","useTokenSymbol","RegisterFormKey","MetadataFormKey","RegisterFormSchema","yup","defined","proxyEndpoint","min","rate","max","initialRegisterValues","ControllerFormKey","MetadataFormSchema","initialMetadataValues","ProjectFormKey","privateKey","ControllerAction","AccountNotification","ProjectNotification","TransactionNotification","CIDv0","RegExp","ProjectFormSchema","matches","initialProjectValues","initialIndexingValues","config","networkEndpoint","networkDictionary","nodeVersion","queryVersion","poiEnabled","forceEnabled","paygPrice","paygExpiration","paygThreshold","paygOverflow","StartIndexingSchema","optional","required","ProjectPaygSchema","buttonTitles","unregister","updateMetaData","createButonItem","actionType","AccountActionName","duration","onScreen","startProject","stopProject","restartProject","removeProject","announceIndexing","announceReady","announceNotIndexing","paygOpen","paygChangePrice","paygClose","createButtonItem","action","ProjectActionName","StartIndexing","RestartProject","AnnounceIndexing","AnnounceReady","StopProject","RemoveProject","AnnounceNotIndexing","StopIndexing","PaygOpen","PaygChangePrice","PaygClose","startProjectForms","versions","node","query","setPaygPriceForms","aletMessages","Started","description","Terminated","notifications","formatHash","hash","len","substring","txLoadingNotification","txHash","txSuccessNotification","toLowerCase","txErrorNotification","handleTransaction","notificationContext","onSuccess","onError","loadingId","ActionNames","configController","useAccountAction","accountTransactions","param","unRegister","onProcess","sendTx","actionName","useIndexingAction","indexingTransactions","readyIndexing","TabbarItem","emptyController","Account","setVisible","setCurrentStep","setActionType","accountAction","isController","setIsController","useIsController","controllerBalance","indexerBalance","history","useHistory","tokenSymbol","removeAccounts","controllerItem","indexerItem","isUndefined","parseFloat","onUnregister","onButtonPress","onModalClose","setTimeout","indexerName","indexerButtons","controllerButtons","push","updateMetadataStep","onUpdate","createUpdateMetadataSteps","values","formHelper","setStatus","createIndexerMetadata","unregisterCompleted","replace","unregisterStep","TextContainer","IntroductionView","link","mainTitle","subTitle","button","activeBtn","widthdrawBtn","removeBtn","removeAccount","withdraw","widthdraw","c","success","failed","createModalStep","withdrawControllerLoading","withdrawControllerSucceed","withdrawControllerFailed","asyncRender","ready","component","IntroContainer","ItemContainer","ItemContentContainer","AccountContainer","Balance","Status","Buttons","ControllerItem","onConfigController","onRemoveController","onWithdraw","isActived","toLocaleLowerCase","emptyBalance","openAccountExporer","text","state","controllersPage","header","intro","setAccount","currentController","removeController","createController","createControllerRequesting","withdrawController","getControllers","controllerData","onSendTxConfigController","isActivedController","controllers","rawControllers","activeAccount","find","filter","createControllerAction","removeAccountSteps","withdrawSteps","notificationId","res","withrawController","configControllerSteps","createConfig","linkConfigs","TelegramIcon","DiscordIcon","GithubIcon","LinkendinIcon","MediumIcon","MatrixIcon","TwitterIcon","IconsContainer","Header","useLocation","pathname","LeftContainer","RightContainer","TabBar","NavLink","deactivate","activeStyle","fontWeight","dropdownStyle","border","createItem","key","onSelected","isRootPage","accountDetails","renderTabbars","to","projects","payg","SubqueryIcon","dropdownClass","buttonStyles","secondary","LoginPage","VersionItemContainer","horizontal","TagItem","versionType","mainColor","subColor","LogView","getLog","LogViewer","hasLineNumbers","isTextWrapped","theme","NetworkTabbarView","ServiceLog","marginTop","Tabs","_","newValue","textColor","indicatorColor","Tab","Contrainer","VersionContainer","NetworkPage","indexerEra","setIndexerEra","updateEra","rewardsDistributor","getRewardInfo","lastClaimedEra","lastClaimEra","Promise","all","eraManager","eraNumber","rewardsStaking","getLastSettledEra","currentEra","lastSettledEra","useIndexerEra","eraItems","StatusLabel","HeaderItem","flex","pl","ChannelItemContainer","ProgressBar","ChannelAction","statusColor","FINALIZED","OPEN","CHALLENGE","statusText","Payg","getChannelList","checkpointRequest","consumer","total","spent","onchain","price","expirationAt","challengeAt","channelDetail","setChannelDetail","betterShow","concat","Checkpoint","channels","AlertView","setIsOpen","metadataInitValue","lastProcessedHeight","lastProcessedTimestamp","targetHeight","chain","specName","genesisHash","indexerHealthy","indexerNodeVersion","queryNodeVersion","indexerStatus","queryStatus","projectServiceMetadtaValue","projectInitValue","owner","image","websiteUrl","codeUrl","version","currentDeployment","currentVersion","versionDescription","createdTimestamp","updatedTimestamp","queryRegistryClient","REGISTRY_PROJECT","coordinatorClient","getQueryMetadata","queryMetadata","getProjectDetails","projectInfo","nodes","project","projectMetadata","projectDetails","getIndexingProjects","deploymentIndexers","combineProjects","localProjects","indexingProjects","removedProjects","lp","getManifest","cid","IPFS_PROJECT_CLIENT","projectYaml","resultManifest","yaml","dockerRegistryFromChain","chainType","cosmos","avalanche","substrateNode","defaultRange","substrate","isFalse","verifyProxyEndpoint","URL","host","requestUrl","axios","get","response","ServiceStatus","calculateProgress","latestHeight","Math","round","statusCode","indexingStatusCode","NOTINDEXING","INDEXING","READY","isTrue","ProjectDetailsHeader","projectStatus","CardContainer","ActionContainer","ServiceContaineer","ProjectPaygView","actionItems","expiration","threshold","overflow","Open","ServiceView","ProjectServiceCard","imageVersion","TagsContainer","LabelContainer","ProjectStatusView","percent","progress","InfoView","InfoContainer","formatDate","date","Date","toLocaleDateString","ProjectDetailsView","BottomContainer","ProjectTabbarView","ProjectDetails","NodeLog","ProjectDetailsPage","useParams","deploymentStatusByIndexer","useIndexingStatus","setProject","fetchMeta","useProjectDetails","refresh","useRouter","indexingAction","projectService","setService","getProject","getProjectService","useProjectService","paygStatus","Close","startProjectRequest","startProjectLoading","stopProjectRequest","stopProjectLoading","removeProjectRequest","removeProjectLoading","paygPriceRequest","paygPriceLoading","queryVersions","getQueryVersions","fetchQueryVersions","manifest","range","runner","registry","getRegistryVersions","useQueryVersions","nodeVersions","getNodeVersions","fetchNodeVersions","dataSources","runtime","kind","split","registryVersions","v","useNodeVersions","setProgress","fetchQueryMetadata","updateServiceStatus","intervalId","setInterval","clearInterval","onStartProject","onStopProject","onRemoveProject","onSendTransaction","onPaygClose","healthy","NotIndexing","Indexing","Ready","alertInfo","networkBtnItems","createNetworkButtonItems","serviceBtnItems","createServiceButtonItems","paygBtnItems","createPaygButtonItems","networkActionItems","serviceActionItems","paygActionItems","projectConfig","imageVersions","projectStateChange","setErrors","startIndexingSteps","restartProjectSteps","createRestartProjectSteps","stopIndexingSteps","stopProjectSteps","createStopProjectSteps","removeProjectSteps","announceIndexingSteps","announceReadySteps","createReadyIndexingSteps","announceNotIndexingSteps","createNotIndexingSteps","paygOpenSteps","onPaygOpen","createPaygOpenSteps","paygChangePriceSteps","onPaygChangePrice","createPaygChangePriceSteps","paygCloseSteps","modalTitle","modalSteps","ProjectItemContainer","Progress","ProfileContainer","projetHeaderItems","ProjecItemsHeader","ProjectItem","getDeploymentStatus","useDeploymentStatus","EmptyView","rel","Projects","addProject","getProjectList","projectDetailList","setProjecList","getProjects","getProjectDetailList","detail","useProjectDetailList","onAddProject","helper","trim","useInitialStep","isApproved","isApprove","setIsApprove","checkAllowance","minimumStakingAmount","mimAmount","allowance","gte","useIsApproved","register","onboarding","authorisation","sync","IndexerRegistryView","RegisterPage","isRegistedIndexer","initialStep","setStep","setLoading","isRegisterStep","moveToNextStep","onTransactionFailed","onSyncIndexer","onApprove","onIndexerRegister","indexerMetadata","registerActions","renderSteps","AppContents","showMetaMask","setShowMetaMask","metamaskAvailable","enable","useShowMetaMask","className","Pages","path","exact","ErrorFallback","componentStack","resetError","colorScheme","App","fallback","showDialog","ApolloProvider","client","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","Sentry","dsn","SENTRY_DSN","integrations","BrowserTracing","tracesSampleRate","ReactDOM","render","StrictMode","document","getElementById","webpackContext","req","webpackContextResolve","__webpack_require__","o","keys","resolve","module","exports","IPFS_METADATA_CLIENT","IPFS_GATEWAY","Buffer","from","base58","decode","bytes","hashHex","hashBytes","encode","concatU8A","b","Uint8Array","set","add","JSON","stringify","pin","toV0","results","raw","parse"],"mappings":"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","file":"static/js/main.eda253e7.chunk.js","sourcesContent":["// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nclass Logger {\n  private readonly prefix: string;\n\n  constructor(prefix?: string) {\n    this.prefix = prefix ?? '';\n  }\n\n  getLogger(scope: string): Logger {\n    return new Logger(`${this.prefix}[${scope}]`);\n  }\n\n  public l(message: any, ...rest: any[]): void {\n    console.log(`${this.prefix}${message?.toString()}`, ...rest);\n  }\n\n  public w(message: any, ...rest: any[]): void {\n    console.warn(`${this.prefix}${message?.toString()}`, ...rest);\n  }\n\n  public e(message: any, ...rest: any[]): void {\n    console.error(`${this.prefix}${message?.toString()}`, ...rest);\n  }\n}\n\nexport default Logger;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { createContext, ReactNode, useContext, useMemo } from 'react';\n\nimport Logger from 'utils/logger';\n\nconst EMPTY: unique symbol = Symbol(undefined);\n\nexport type Props<State = void> = {\n  initialState?: State;\n  children?: ReactNode;\n};\n\nexport type Container<V, State = void> = {\n  Provider: React.ComponentType<Props<State>>;\n  useContainer: () => V;\n};\n\nconst logger = new Logger();\n\nexport function createContainer<V, State = void>(\n  useHook: (logger: Logger, initialState?: State) => V,\n  options?: { displayName?: string }\n): Container<V, State> {\n  const Ctx = createContext<V | typeof EMPTY>(EMPTY);\n  if (options?.displayName) {\n    Ctx.displayName = options.displayName;\n  }\n\n  function Provider(props: Props<State>) {\n    const { initialState, children } = props;\n    const l = useMemo(\n      () => (options?.displayName ? logger.getLogger(options?.displayName) : logger),\n      []\n    );\n\n    const value = useHook(l, initialState);\n    return <Ctx.Provider value={value}>{children}</Ctx.Provider>;\n  }\n\n  function useContainer(): V {\n    const value = useContext(Ctx);\n\n    if (value === EMPTY) {\n      throw new Error(\n        `Component must be wrapped with <${Ctx.displayName ?? 'Container'}.Provider>`\n      );\n    }\n\n    return value;\n  }\n\n  return { Provider, useContainer };\n}\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useState } from 'react';\n\nimport { createContainer } from './unstated';\n\ntype LoadingContext = {\n  pageLoading: boolean;\n  setPageLoading: (loading: boolean) => void;\n};\n\nfunction useLoadingImpl(): LoadingContext {\n  const [pageLoading, setPageLoading] = useState<boolean>(false);\n  return { pageLoading, setPageLoading };\n}\n\nexport const { useContainer: useLoading, Provider: LoadingProvider } = createContainer(\n  useLoadingImpl,\n  { displayName: 'Global Loading' }\n);\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { FC } from 'react';\nimport { Spinner } from '@subql/react-ui';\nimport styled from 'styled-components';\n\nimport { useLoading } from 'containers/loadingContext';\n\nconst Container = styled.div`\n  position: absolute;\n  display: flex;\n  width: 100%;\n  height: 100%;\n  z-index: 1000;\n  background-color: #f6f9fc;\n  justify-content: center;\n  align-items: flex-start;\n`;\n\nconst Loading: FC = () => {\n  const { pageLoading } = useLoading();\n  if (!pageLoading) return null;\n  return (\n    <Container>\n      <Spinner size={30} />\n    </Container>\n  );\n};\n\nexport default Loading;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { gql } from '@apollo/client';\n\nexport type QueryResult = {\n  loading?: boolean;\n  data?: any;\n  error?: Error;\n};\n\nexport const GET_COORDINATOR_INDEXER = gql`\n  query {\n    accountMetadata {\n      indexer\n    }\n  }\n`;\n\nexport const ADD_INDEXER = gql`\n  mutation AddIndexer($indexer: String!) {\n    addIndexer(indexer: $indexer) {\n      indexer\n    }\n  }\n`;\n\nexport const START_PROJECT = gql`\n  mutation StartProject(\n    $forceEnabled: Boolean!\n    $poiEnabled: Boolean!\n    $queryVersion: String!\n    $nodeVersion: String!\n    $networkDictionary: String!\n    $networkEndpoint: String!\n    $id: String!\n  ) {\n    startProject(\n      forceEnabled: $forceEnabled\n      poiEnabled: $poiEnabled\n      queryVersion: $queryVersion\n      nodeVersion: $nodeVersion\n      networkDictionary: $networkDictionary\n      networkEndpoint: $networkEndpoint\n      id: $id\n    ) {\n      id\n      status\n      networkEndpoint\n      networkDictionary\n      nodeVersion\n      queryVersion\n      poiEnabled\n      nodeEndpoint\n      queryEndpoint\n    }\n  }\n`;\n\nexport const STOP_PROJECT = gql`\n  mutation StopProject($id: String!) {\n    stopProject(id: $id) {\n      id\n      status\n      networkEndpoint\n      nodeEndpoint\n      queryEndpoint\n    }\n  }\n`;\n\nexport const GET_CONTROLLERS = gql`\n  query {\n    controllers {\n      id\n      address\n    }\n  }\n`;\n\nexport const ADD_CONTROLLER = gql`\n  mutation AddController {\n    addController\n  }\n`;\n\nexport const REMOVE_CONTROLLER = gql`\n  mutation RemoveController($id: String!) {\n    removeAccount(id: $id) {\n      id\n    }\n  }\n`;\n\nexport const WITHDRAW_CONTROLLER = gql`\n  query WithdrawController($id: String!) {\n    withrawController(id: $id)\n  }\n`;\n\nexport const REMOVE_ACCOUNTS = gql`\n  mutation {\n    removeAccounts\n  }\n`;\n\nexport const ADD_PROJECT = gql`\n  mutation AddProject($id: String!) {\n    addProject(id: $id) {\n      id\n      status\n    }\n  }\n`;\n\nexport const REMOVE_PROJECT = gql`\n  mutation RemoveProject($id: String!) {\n    removeProject(id: $id) {\n      status\n    }\n  }\n`;\n\nexport const PAYG_PRICE = gql`\n  mutation PaygProject(\n    $paygPrice: String!\n    $paygExpiration: Float!\n    $paygThreshold: Float!\n    $paygOverflow: Float!\n    $id: String!\n  ) {\n    paygProject(\n      paygPrice: $paygPrice\n      paygExpiration: $paygExpiration\n      paygThreshold: $paygThreshold\n      paygOverflow: $paygOverflow\n      id: $id\n    ) {\n      id\n      paygPrice\n      paygExpiration\n      paygThreshold\n      paygOverflow\n    }\n  }\n`;\n\nexport const CONFIG_SERVICES = gql`\n  mutation UpdateServices($queryEndpoint: String!, $nodeEndpoint: String!, $id: String!) {\n    updateProjectServices(queryEndpoint: $queryEndpoint, nodeEndpoint: $nodeEndpoint, id: $id) {\n      status\n      nodeEndpoint\n      queryEndpoint\n    }\n  }\n`;\n\nexport const GET_PROJECT = gql`\n  query Project($id: String!) {\n    project(id: $id) {\n      id\n      status\n      nodeEndpoint\n      queryEndpoint\n      networkEndpoint\n      networkDictionary\n      nodeVersion\n      queryVersion\n      poiEnabled\n      forceEnabled\n      paygPrice\n      paygExpiration\n      paygThreshold\n      paygOverflow\n    }\n  }\n`;\n\nexport const GET_PROJECTS = gql`\n  query {\n    getProjects {\n      id\n      status\n      nodeEndpoint\n      queryEndpoint\n      networkEndpoint\n      networkDictionary\n      nodeVersion\n      queryVersion\n      poiEnabled\n      paygPrice\n      paygExpiration\n      paygThreshold\n      paygOverflow\n    }\n  }\n`;\n\nexport const GET_CHANNELS = gql`\n  query {\n    channels {\n      id\n      status\n      deploymentId\n      consumer\n      total\n      spent\n      onchain\n      price\n      challengeAt\n      expirationAt\n      lastFinal\n    }\n  }\n`;\n\nexport const CHANNEL_CHECKPOINT = gql`\n  mutation ChannelCheckpoint($id: String!) {\n    channelCheckpoint(id: $id) {\n      id\n      spent\n      remote\n      onchain\n    }\n  }\n`;\n\nexport const CHANNEL_CLOSE = gql`\n  mutation ChannelClose($id: String!) {\n    channelClose(id: $id) {\n      id\n      spent\n      remote\n      onchain\n      lastFinal\n    }\n  }\n`;\n\nexport const GET_LOG = gql`\n  query GetLog($container: String!) {\n    getLog(container: $container) {\n      log\n    }\n  }\n`;\n\nexport const GET_QUERY_METADATA = gql`\n  query QueryMetadata($id: String!) {\n    queryMetadata(id: $id) {\n      lastProcessedHeight\n      lastProcessedTimestamp\n      targetHeight\n      chain\n      indexerHealthy\n      indexerNodeVersion\n      queryNodeVersion\n      indexerStatus\n      queryStatus\n    }\n  }\n`;\n\n// query project registry\nexport const GET_INDEXER_PROJECTS = gql`\n  query GetIndexerProjects($indexer: String!) {\n    deploymentIndexers(filter: { indexerId: { equalTo: $indexer } }) {\n      nodes {\n        indexerId\n        deploymentId\n        status\n      }\n    }\n  }\n`;\n\nexport const GET_PROJECT_DETAILS = gql`\n  query GetProjectDetails($deploymentId: String!) {\n    deployments(filter: { id: { equalTo: $deploymentId } }) {\n      nodes {\n        id\n        projectId\n        project {\n          owner\n          currentVersion\n          currentDeployment\n          createdTimestamp\n          updatedTimestamp\n          metadata\n        }\n      }\n    }\n  }\n`;\n\n// query docker image versions\nexport const GET_REGISTRY_VERSIONS = gql`\n  query GetRegistryVersions($range: String!, $registry: String!) {\n    getRegistryVersions(range: $range, registry: $registry)\n  }\n`;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport * as React from 'react';\nimport { useLazyQuery, useMutation } from '@apollo/client';\n\nimport { ADD_INDEXER, GET_COORDINATOR_INDEXER } from '../utils/queries';\nimport { createContainer } from './unstated';\n\ntype CoordinatorIndexerContext = {\n  indexer: string | undefined;\n  updateIndexer: (indexer: string) => Promise<void>;\n  load: () => void;\n  loading: boolean;\n  error?: Error;\n};\n\nfunction useCoordinatorIndexerImpl(): CoordinatorIndexerContext {\n  const [load, { data, loading, error }] = useLazyQuery(GET_COORDINATOR_INDEXER);\n  const [addIndexer] = useMutation(ADD_INDEXER);\n\n  const [indexer, setIndexer] = React.useState<string>();\n\n  React.useEffect(() => {\n    setIndexer(data?.accountMetadata?.indexer);\n  }, [data]);\n\n  const updateIndexer = React.useCallback(\n    async (indexer: string) => {\n      await addIndexer({ variables: { indexer } });\n      setIndexer(indexer);\n    },\n    [addIndexer]\n  );\n\n  return {\n    indexer,\n    updateIndexer,\n    load,\n    loading,\n    error,\n  };\n}\n\nexport const { useContainer: useCoordinatorIndexer, Provider: CoordinatorIndexerProvider } =\n  createContainer(useCoordinatorIndexerImpl, {\n    displayName: 'Coordinator Indexer',\n  });\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useEffect, useMemo, useState } from 'react';\nimport { JsonRpcSigner } from '@ethersproject/providers';\nimport { useWeb3React } from '@web3-react/core';\nimport { Web3ReactContextInterface } from '@web3-react/core/dist/types';\nimport { providers } from 'ethers';\nimport { isEmpty } from 'lodash';\n\nimport { useCoordinatorIndexer } from 'containers/coordinatorIndexer';\nimport { useLoading } from 'containers/loadingContext';\n\nexport function useIsMetaMaskInstalled(): boolean {\n  return useMemo(() => window.ethereum?.isMetaMask, [window.ethereum]);\n}\n\nexport const useWeb3 = (): Web3ReactContextInterface<providers.Web3Provider> => useWeb3React();\n\nexport function useWeb3Provider(): providers.Web3Provider | undefined {\n  const { library } = useWeb3();\n  return library;\n}\n\nexport type Signer = JsonRpcSigner | undefined;\n\nexport function useSigner(): Signer {\n  const { active, account, library } = useWeb3();\n  return useMemo(() => library?.getSigner(), [active, account]);\n}\n\nexport function useIsMetaMask(): boolean | undefined {\n  const { active, library } = useWeb3();\n  return useMemo(() => library?.provider?.isMetaMask, [active, library?.provider.isMetaMask]);\n}\n\nexport function useShowMetaMask(): boolean | undefined {\n  const { account } = useWeb3();\n  const { pageLoading, setPageLoading } = useLoading();\n  const { indexer, load } = useCoordinatorIndexer();\n  const isMetaMaskInstalled = useIsMetaMaskInstalled();\n  const isMetaMask = useIsMetaMask();\n\n  const isIndexer = useMemo(\n    () => !!account && account?.toLowerCase() === indexer?.toLowerCase(),\n    [account, indexer]\n  );\n\n  const [showMetaMask, setShowMetaMask] = useState<boolean>();\n\n  useEffect(() => {\n    load();\n  }, [load]);\n\n  useEffect(() => {\n    const metamaskAvailable = isMetaMaskInstalled && isMetaMask;\n    if (!metamaskAvailable) {\n      setPageLoading(false);\n    }\n\n    const enable = (!pageLoading && !isIndexer && !isEmpty(indexer)) || !metamaskAvailable;\n    setShowMetaMask(enable);\n  }, [account, indexer, isIndexer, pageLoading]);\n\n  return showMetaMask;\n}\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { intToHex } from 'ethereumjs-util';\n\nexport enum ChainID {\n  testnet = 595,\n  moonbase = 1287,\n  mainnet = 1285,\n}\n\nexport enum Networks {\n  moonbase = 'moonbase',\n  testnet = 'testnet',\n  mainnet = 'mainnet',\n}\n\nexport type SubqueryNetwork = 'mainnet' | 'testnet' | 'moonbase';\n\nexport const ChainIDs = [ChainID.moonbase, ChainID.testnet, ChainID.mainnet];\n\nexport const NetworkToChainID: Record<SubqueryNetwork, ChainID> = {\n  moonbase: ChainID.moonbase,\n  testnet: ChainID.testnet,\n  mainnet: ChainID.mainnet,\n};\n\nexport const isSupportNetwork = (chaiId?: number) => ChainIDs.includes(chaiId ?? 0);\n\nexport const RPC_URLS: Record<number, string> = {\n  595: 'https://tc7-eth.aca-dev.network',\n  1285: 'https://moonriver.api.onfinality.io/public',\n  1287: 'https://moonbeam-alpha.api.onfinality.io/public',\n  31337: 'http://127.0.0.1:8545',\n};\n\nexport const networks: Record<number, SubqueryNetwork> = {\n  595: Networks.testnet,\n  1287: Networks.moonbase,\n  1285: Networks.mainnet,\n};\n\nexport const chainNames: Record<number, string> = {\n  595: 'Acala Testnet',\n  1285: 'Moonriver',\n  1287: 'Moonbeam Dev',\n  31337: 'Hardhat Local',\n};\n\nexport const NETWORK_CONFIGS = {\n  [ChainID.testnet]: {\n    chainId: intToHex(ChainID.testnet),\n    chainName: 'Acala Testnet',\n    nativeCurrency: {\n      name: 'Acala',\n      symbol: 'Acala',\n      decimals: 18,\n    },\n    rpcUrls: [RPC_URLS[ChainID.testnet]],\n    blockExplorerUrls: ['https://blockscout.mandala.acala.network/'],\n  },\n  [ChainID.moonbase]: {\n    chainId: intToHex(1287),\n    chainName: 'Moonbase Alpha',\n    nativeCurrency: {\n      name: 'DEV',\n      symbol: 'DEV',\n      decimals: 18,\n    },\n    rpcUrls: [RPC_URLS[1287]],\n    blockExplorerUrls: ['https://moonbase.moonscan.io/'],\n  },\n};\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react';\nimport { ContractDeployment, ContractSDK, SdkOptions } from '@subql/contract-sdk';\nimport moonbaseDeployment from '@subql/contract-sdk/publish/moonbase.json';\n\nimport { useIsMetaMask, useWeb3 } from 'hooks/web3Hook';\nimport Logger from 'utils/logger';\nimport { ChainID, isSupportNetwork, Networks, SubqueryNetwork } from 'utils/web3';\n\nimport { createContainer } from './unstated';\n\nconst deployments: Record<SubqueryNetwork, ContractDeployment> = {\n  testnet: moonbaseDeployment,\n  moonbase: moonbaseDeployment,\n  mainnet: moonbaseDeployment,\n};\n\nfunction createContractOptions(network: SubqueryNetwork): SdkOptions {\n  return {\n    deploymentDetails: deployments[network] as ContractDeployment,\n    network,\n  };\n}\n\nconst options = {\n  [ChainID.moonbase]: createContractOptions(Networks.moonbase),\n  [ChainID.testnet]: createContractOptions(Networks.testnet),\n  [ChainID.mainnet]: createContractOptions(Networks.mainnet),\n};\n\nexport type SDK = ContractSDK | undefined;\n\nfunction useContractsImpl(logger: Logger): SDK {\n  const [sdk, setSdk] = React.useState<ContractSDK>();\n  const { library, chainId } = useWeb3();\n  const isMetaMask = useIsMetaMask();\n\n  React.useEffect(() => {\n    if (!chainId || !isSupportNetwork(chainId)) return;\n\n    const sdkOption = options[chainId as ChainID];\n    if (!sdkOption || !sdkOption.network || !sdkOption.deploymentDetails) {\n      throw new Error(\n        'Invalid sdk options, contracts provider requires network and deploymentDetails'\n      );\n    }\n\n    if (library && isMetaMask) {\n      ContractSDK.create(library, sdkOption)\n        .then((instance) => setSdk(instance))\n        .catch((e) => {\n          logger.e('Failed to create ContractSDK instance', e);\n          setSdk(undefined);\n        });\n    }\n  }, [logger, library, chainId, isMetaMask]);\n\n  return sdk;\n}\n\nexport const { useContainer: useContractSDK, Provider: ContractSDKProvider } = createContainer(\n  useContractsImpl,\n  {\n    displayName: 'Contract SDK',\n  }\n);\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\n// @ts-nocheck\nimport { useState } from 'react';\nimport {\n  iNotificationDismiss,\n  NOTIFICATION_TYPE,\n  ReactNotifications,\n  Store,\n} from 'react-notifications-component';\n\nimport { createContainer } from './unstated';\n\nimport 'animate.css/animate.min.css';\n\nexport type Notification = {\n  type: NOTIFICATION_TYPE;\n  title: string;\n  message: string;\n  dismiss?: iNotificationDismiss;\n};\n\nexport type notificationContext = {\n  notification?: Notification;\n  dispatchNotification: (info: Notification) => string;\n  removeNotification: (id: string) => void;\n};\n\nfunction useNotificationImpl(): notificationContext {\n  const [notification, setNotification] = useState<Notification>();\n  const removeNotification = (id: string) => Store.removeNotification(id);\n\n  const dispatchNotification = (info: Notification) => {\n    setNotification(info);\n    return Store.addNotification({\n      title: info.title,\n      message: info.message,\n      type: info.type,\n      container: 'top-right',\n      animationIn: ['animate__animated', 'animate__fadeIn'],\n      animationOut: ['animate__animated', 'animate__fadeOut'],\n      dismiss: info.dismiss,\n    });\n  };\n\n  return { notification, dispatchNotification, removeNotification };\n}\n\nexport const Notifications = () => (\n  <>\n    <ReactNotifications />\n  </>\n);\n\nexport const { useContainer: useNotification, Provider: NotificationProvider } = createContainer(\n  useNotificationImpl,\n  {\n    displayName: 'Global Notification',\n  }\n);\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { FC, useCallback, useEffect, VFC } from 'react';\nimport { Web3ReactProvider } from '@web3-react/core';\nimport { Web3ReactManagerFunctions } from '@web3-react/core/dist/types';\nimport { InjectedConnector } from '@web3-react/injected-connector';\nimport { NetworkConnector } from '@web3-react/network-connector';\nimport { providers } from 'ethers';\n\nimport { useWeb3 } from 'hooks/web3Hook';\nimport { ChainID, NetworkToChainID, RPC_URLS } from 'utils/web3';\n\nimport { Props } from './unstated';\n\nconst injectedConntector = new InjectedConnector({\n  supportedChainIds: [595, 1287, 1285],\n});\n\nconst injectNetwork = window.env.NETWORK as keyof typeof NetworkToChainID;\n\nconst networkConnector = new NetworkConnector({\n  urls: RPC_URLS,\n  defaultChainId: (NetworkToChainID[injectNetwork] as number) ?? ChainID.moonbase,\n});\n\n// TODO: Acala would use https://github.com/AcalaNetwork/bodhi.js\nconst getLibrary = (provider: any): providers.Web3Provider => {\n  return new providers.Web3Provider(provider);\n};\n\nexport async function connect(activate: Web3ReactManagerFunctions['activate']): Promise<void> {\n  if (await injectedConntector.isAuthorized()) {\n    return activate(injectedConntector);\n  }\n\n  return activate(networkConnector);\n}\n\nconst InitProvider: VFC = () => {\n  const { activate } = useWeb3();\n  const activateInitialConnector = useCallback(\n    async (): Promise<void> => connect(activate),\n    [activate]\n  );\n\n  useEffect(() => {\n    activateInitialConnector();\n  }, [activateInitialConnector]);\n\n  return null;\n};\n\nexport const Web3Provider: FC = ({ children }: Props) => {\n  return (\n    <Web3ReactProvider getLibrary={getLibrary}>\n      <InitProvider />\n      {children}\n    </Web3ReactProvider>\n  );\n};\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { FC } from 'react';\nimport styled from 'styled-components';\n\nconst Image = styled.img<{ size?: number }>`\n  width: ${({ size }) => size ?? 30}px;\n  height: ${({ size }) => size ?? 30}px;\n`;\n\ntype Props = {\n  src: string;\n  size?: number;\n  url?: string;\n};\n\nconst Icon: FC<Props> = ({ src, size, url }) =>\n  url ? (\n    <a href={url}>\n      <Image size={size} src={src} alt={url} />\n    </a>\n  ) : (\n    <Image size={size} src={src} alt={src} />\n  );\n\nexport default Icon;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { FC } from 'react';\nimport { Button as SubButton, Spinner } from '@subql/react-ui';\nimport { Form } from 'formik';\nimport styled from 'styled-components';\n\nexport const Separator = styled.div<{\n  height?: number;\n  width?: number;\n  color?: string;\n  mr?: number;\n}>`\n  height: ${({ height }) => height ?? 1}px;\n  width: ${({ width }) => width ?? 1}px;\n  background-color: ${({ color }) => color ?? 'lightgray'};\n  margin-right: ${({ mr }) => mr ?? 0}px;\n`;\n\ntype TextProps = {\n  size?: number;\n  fw?: string;\n  ml?: number;\n  mr?: number;\n  mt?: number;\n  mb?: number;\n  mw?: number;\n  clolor?: string;\n  alignCenter?: boolean;\n  ff?: string;\n};\n\nexport const Text = styled.div<TextProps>`\n  color: ${({ color }) => color ?? '#1A202C'};\n  text-align: ${({ alignCenter }) => (alignCenter ? 'center' : 'left')};\n  font-size: ${({ size }) => size ?? 18}px;\n  font-weight: ${({ fw }) => fw ?? 400};\n  margin-left: ${({ ml }) => ml ?? 0}px;\n  margin-right: ${({ mr }) => mr ?? 0}px;\n  margin-top: ${({ mt }) => mt ?? 0}px;\n  margin-bottom: ${({ mb }) => mb ?? 0}px;\n  min-width: ${({ mw }) => mw ?? 10}px;\n  overflow-wrap: break-word;\n`;\n\nexport const Label = styled.label<TextProps>`\n  color: ${({ color }) => color ?? '#1A202C'};\n  text-align: ${({ alignCenter }) => (alignCenter ? 'center' : 'left')};\n  font-size: ${({ size }) => size ?? 15}px;\n  font-weight: ${({ fw }) => fw ?? 500};\n  margin-left: ${({ ml }) => ml ?? 0}px;\n  margin-right: ${({ mr }) => mr ?? 0}px;\n  margin-top: ${({ mt }) => mt ?? 0}px;\n  margin-bottom: ${({ mb }) => mb ?? 0}px;\n  min-width: ${({ mw }) => mw ?? 10}px;\n  font-family: ${({ ff }) => ff ?? 'Futura'};\n`;\n\n// new buttons\ntype StyledButtonProps = {\n  align?: string;\n  width?: number;\n  mt?: number;\n  mb?: number;\n  mr?: number;\n  ml?: number;\n};\n\nexport const StyledButton = styled(SubButton)<StyledButtonProps>`\n  align-self: ${({ align }) => align ?? 'center'};\n  min-width: ${({ width }) => width ?? 150}px;\n  padding: 16px 50px;\n  margin-top: ${({ mt }) => mt ?? 0}px;\n  margin-bottom: ${({ mb }) => mb ?? 0}px;\n  margin-right: ${({ mr }) => mr ?? 0}px;\n  margin-left: ${({ ml }) => ml ?? 0}px;\n  font-weight: 500;\n`;\n\ntype ButtonProps = {\n  title: string;\n  loading?: boolean;\n  disabled?: boolean;\n  leftItem?: React.ReactNode;\n  type?: 'primary' | 'secondary';\n  onClick?: () => void;\n};\n\nconst Spin = styled(Spinner)`\n  margin-right: 15px;\n`;\n\nexport const Button: FC<ButtonProps & StyledButtonProps> = ({\n  title,\n  loading,\n  disabled,\n  type,\n  ...props\n}) => (\n  <StyledButton\n    label={title}\n    type={type ?? 'secondary'}\n    leftItem={loading && <Spin size={23} color={`${type === 'primary' ? '#fff' : '#4388dd'}`} />}\n    disabled={disabled || loading}\n    {...props}\n  />\n);\n\ntype Align = 'left' | 'right' | 'centre';\n\nexport const ButtonContainer = styled.div<{ mt?: number; align?: Align }>`\n  display: flex;\n  align-items: center;\n  margin-top: ${({ mt }) => mt ?? 0}px;\n  width: 100%;\n  justify-content: ${({ align }) => {\n    if (!align) return 'center';\n    switch (align) {\n      case 'left':\n        return 'flex-start';\n      case 'right':\n        return 'flex-end';\n      default:\n        return 'center';\n    }\n  }};\n`;\n\nexport const FormContainer = styled(Form)<{ mt?: number }>`\n  margin-top: ${({ mt }) => mt ?? 0}px;\n  width: 100%;\n`;\n","export default __webpack_public_path__ + \"static/media/arrow.8961c2a1.svg\";","export default __webpack_public_path__ + \"static/media/metamask.09e5f554.svg\";","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\n/* eslint-disable */\n// @ts-nocheck\n\nimport { NetworkToChainID, NETWORK_CONFIGS } from 'utils/web3';\nimport { intToHex } from 'ethereumjs-util';\nimport { connect } from 'containers/web3';\n\nexport const NetworkError = {\n  unSupportedNetworkError: 'UnsupportedChainIdError',\n};\n\nconst ethMethods = {\n  requestAccount: 'eth_requestAccounts',\n  switchChain: 'wallet_switchEthereumChain',\n  addChain: 'wallet_addEthereumChain',\n}\n\nexport async function connectWithMetaMask(activate: Function) {\n  if (!window.ethereum) return 'MetaMask is not installed';\n  try {\n    await window.ethereum.request({ method: ethMethods.requestAccount });\n    await connect(activate);\n    return '';\n  } catch (e) {\n    return e.message;\n  }\n}\n\nexport async function switchNetwork() {\n  const network = window.env.NETWORK;\n  const chainId = NetworkToChainID[network];\n  if (!window?.ethereum || !network) return;\n\n  try {\n    await window.ethereum.request({\n      method: ethMethods.switchChain,\n      params: [{ chainId: intToHex(chainId) }],\n    })\n  } catch (e) {\n    console.log('e:', e);\n    if (e.code === 4902) {\n      await ethereum.request({\n        method: ethMethods.addChain,\n        params: [NETWORK_CONFIGS[chainId]],\n      })\n    } else {\n      console.log('Switch Ethereum network failed', e);\n    }\n  }\n}\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nexport const extensionInstallUrls = {\n  Chrome: 'https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn',\n  Firefox: 'https://addons.mozilla.org/en-US/firefox/addon/ether-metamask/',\n  Brave: 'https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn',\n  Edge: 'https://microsoftedge.microsoft.com/addons/detail/metamask/ejbalbakoplchlghecdalmeeeajnimhm',\n};\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Account } from 'pages/account/types';\n\nconst prompts = (account: Account) => ({\n  install: {\n    title: 'Install MetaMask to use Indexer App',\n    desc: 'No MetaMask Extension found in the browser.  Please click the button to install the MetaMask Extension before connect with the network.',\n    buttonTitle: 'Install MetaMask in the extension market',\n  },\n  connect: {\n    title: 'Connect wallet to use Indexer App',\n    desc: 'Use the indexer app to connect with Subquery network, you can manage you accounts and projects inside the app.',\n    buttonTitle: 'Connect with MetaMask browser extension',\n  },\n  invalidAccount: {\n    title: 'Incorrect connected account with coordinator service',\n    desc: `Please switch the connect account to ${account}`,\n    buttonTitle: 'Switch account to use the admin app',\n  },\n  invalidNetwork: {\n    title: 'Unsupportted network Type',\n    desc: 'MetaMask connect with an unsupported network, please press the button to swith to the correct network',\n    buttonTitle: 'Swtich to the supportted network',\n  },\n});\n\nexport default prompts;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport styled from 'styled-components';\n\nexport const Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  width: 100%;\n  margin-top: -100px;\n`;\n\nexport const MetaMaskContainer = styled.div`\n  display: flex;\n  padding: 24px;\n  align-items: center;\n  justify-content: space-between;\n  min-width: 450px;\n  cursor: pointer;\n`;\n\nexport const ContentContainer = styled.div`\n  display: flex;\n  align-items: center;\n`;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { browserName } from 'react-device-detect';\n\nimport Icon from 'components/Icon';\nimport { Button, Label, Text } from 'components/primary';\nimport { useCoordinatorIndexer } from 'containers/coordinatorIndexer';\nimport { useIsMetaMask, useIsMetaMaskInstalled, useWeb3 } from 'hooks/web3Hook';\nimport ArrowIcon from 'resources/arrow.svg';\nimport MetaMaskIcon from 'resources/metamask.svg';\nimport { connectWithMetaMask, NetworkError, switchNetwork } from 'utils/metamask';\n\nimport { extensionInstallUrls } from './config';\nimport prompts from './prompts';\nimport { Container, ContentContainer, MetaMaskContainer } from './styles';\n\nconst MetaMaskView = () => {\n  const { account, activate, error } = useWeb3();\n  const { indexer } = useCoordinatorIndexer();\n  const isMetaMask = useIsMetaMask();\n  const isMetaMaskInstalled = useIsMetaMaskInstalled();\n\n  const [isNetworkError, setNetworkError] = useState(false);\n  const [errorMsg, setErrorMsg] = useState('');\n\n  useEffect(() => {\n    setNetworkError(error?.name === NetworkError.unSupportedNetworkError);\n  }, [error]);\n\n  const data = useMemo(() => {\n    const { install, connect, invalidNetwork, invalidAccount } = prompts(indexer);\n    if (!isMetaMaskInstalled) return install;\n    if (isNetworkError) return invalidNetwork;\n    if (!isMetaMask) return connect;\n    return invalidAccount;\n  }, [isNetworkError, isMetaMaskInstalled, isMetaMask, account, indexer]);\n\n  const onButtonClick = useCallback(async () => {\n    if (isNetworkError) {\n      await switchNetwork();\n      return;\n    }\n    if (!isMetaMaskInstalled) {\n      // @ts-ignore\n      const url = extensionInstallUrls[browserName] ?? '';\n      url && window.open(url, '_blank', 'noopener,noreferrer');\n      return;\n    }\n    if (!isMetaMask) {\n      const result = await connectWithMetaMask(activate);\n      setErrorMsg(result);\n    }\n  }, [isMetaMask, isNetworkError, isMetaMaskInstalled]);\n\n  const metaMaskItem = useMemo(\n    () => (\n      <MetaMaskContainer>\n        <div>\n          <ContentContainer>\n            <Icon size={50} src={MetaMaskIcon} />\n            <Label ml={20} size={25}>\n              MetaMask\n            </Label>\n          </ContentContainer>\n          <Text mt={10}>{data.buttonTitle}</Text>\n        </div>\n        <Icon size={30} src={ArrowIcon} />\n      </MetaMaskContainer>\n    ),\n    [data]\n  );\n\n  return (\n    <Container>\n      <Label alignCenter size={35} fw=\"400\">\n        {data.title}\n      </Label>\n      <Text alignCenter mt={15}>\n        {data.desc}\n      </Text>\n      <Text color=\"red\" alignCenter mt={15}>\n        {errorMsg}\n      </Text>\n      <Button mt={50} type=\"secondary\" title=\"\" onClick={onButtonClick} leftItem={metaMaskItem} />\n    </Container>\n  );\n};\n\nexport default MetaMaskView;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { ApolloClient, InMemoryCache } from '@apollo/client';\n\nconst defaultCoordinatorUrl = `${window.location.protocol}//${window.location.hostname}:${window.env.COORDINATOR_SERVICE_PORT}/graphql`;\n\nexport const coordinatorServiceUrl = __DEV__\n  ? window.env.COORDINATOR_SERVICE_URL\n  : defaultCoordinatorUrl;\n\nexport const proxyServiceUrl = `${window.location.protocol}//${window.location.hostname}`;\n\nexport function createApolloClient(uri: string) {\n  return new ApolloClient({\n    uri,\n    cache: new InMemoryCache(),\n    defaultOptions: {\n      watchQuery: {\n        fetchPolicy: 'network-only',\n      },\n    },\n  });\n}\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nexport enum RegisterStep {\n  onboarding = 'onboarding',\n  authorisation = 'authorisation',\n  register = 'register',\n  sync = 'sync',\n}\n\nexport enum StepStatus {\n  wait = 'wait',\n  process = 'process',\n  finish = 'finish',\n}\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { FC } from 'react';\nimport Jazzicon, { jsNumberForAddress } from 'react-jazzicon';\n\ntype Props = {\n  size: number;\n  address: string;\n};\n\nconst Avatar: FC<Props> = ({ size, address }) => (\n  <Jazzicon diameter={size} seed={jsNumberForAddress(address)} />\n);\n\nexport default Avatar;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { FC, useMemo } from 'react';\nimport { isEmpty } from 'lodash';\nimport styled from 'styled-components';\n\nimport { AccountButtonItem } from 'pages/account/types';\n\nimport Avatar from './avatar';\nimport { Button, ButtonContainer, Text } from './primary';\n\ntype Props = {\n  title: string;\n  desc: string;\n  buttons: AccountButtonItem[];\n  name?: string;\n  account?: string;\n};\n\nconst AccountCard: FC<Props> = ({ title, desc, buttons, name, account }) => {\n  const renderButtons = useMemo(\n    () =>\n      buttons.map(({ title, type, loading, disabled, onClick }) => (\n        <Button\n          key={type}\n          width={230}\n          mb={20}\n          title={title}\n          loading={loading}\n          disabled={disabled}\n          onClick={() => onClick(type)}\n        />\n      )),\n    [buttons]\n  );\n\n  return (\n    <Container key={title}>\n      <div>\n        <HeaderContainer>\n          <ContentContainer>\n            <Text size={30} fw=\"bold\" mr={20}>\n              {title}\n            </Text>\n          </ContentContainer>\n        </HeaderContainer>\n        {account ? (\n          <ContentContainer>\n            <Avatar address={account ?? ''} size={100} />\n            <DescContainer ml={20}>\n              <Text>{name}</Text>\n              <Text mt={10}>{account}</Text>\n              <Text mt={10}>{desc}</Text>\n            </DescContainer>\n          </ContentContainer>\n        ) : (\n          <DescContainer>\n            <Text color=\"gray\" size={15} mb={30}>\n              {desc}\n            </Text>\n            {!isEmpty(buttons) && <ButtonContainer align=\"left\">{renderButtons}</ButtonContainer>}\n          </DescContainer>\n        )}\n      </div>\n      {!!account && !isEmpty(buttons) && (\n        <GroupButtonContainer>{renderButtons}</GroupButtonContainer>\n      )}\n    </Container>\n  );\n};\n\nexport default AccountCard;\n\n// styles\nconst Container = styled.div`\n  display: flex;\n  justify-content: space-between;\n  min-width: 1000px;\n  min-height: 250px;\n  width: 70%;\n  border: thin solid;\n  border-color: lightgray;\n  border-radius: 15px;\n  padding: 40px;\n  margin-bottom: 30px;\n  :hover {\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n  }\n`;\n\nconst HeaderContainer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 30px;\n`;\n\nconst ContentContainer = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst DescContainer = styled.div<{ ml?: number }>`\n  display: flex;\n  width: 80%;\n  flex-direction: column;\n  margin-left: ${({ ml }) => ml ?? 0}px;\n`;\n\nconst GroupButtonContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Form, Steps } from 'antd';\nimport styled from 'styled-components';\n\nexport const ContentContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n  border-radius: 18px;\n  background-color: white;\n  margin-bottom: 50px;\n  padding: 60px;\n  min-width: 650px;\n  min-height: 450px;\n`;\n\nexport const TextContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nexport const DescContainer = styled.div<{ mt?: number }>`\n  margin-top: ${(p) => p.mt ?? 0}px;\n  width: 450px;\n`;\n\nexport const RegistrySteps = styled(Steps)`\n  width: 55%;\n  margin-bottom: 70px;\n  min-width: 650px;\n  max-width: 70%;\n`;\n\nexport const FormContainer = styled(Form)`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: space-between;\n  min-width: 600px;\n  margin-top: 30px;\n`;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { RegisterStep, StepStatus } from './types';\n\nexport const registerSteps = Object.entries(RegisterStep)\n  .map(([key]) => key)\n  .slice(1);\n\nexport const getStepIndex = (step?: RegisterStep): number =>\n  registerSteps.findIndex((s) => s === step);\n\nexport const getStepStatus = (currentIndex: number, index: number): StepStatus => {\n  if (currentIndex === index) return StepStatus.process;\n  if (currentIndex > index) return StepStatus.finish;\n  return StepStatus.wait;\n};\n","export default __webpack_public_path__ + \"static/media/cross.9aeef195.svg\";","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useState, VFC } from 'react';\nimport { Field, FormikErrors, FormikHandlers, FormikValues } from 'formik';\nimport styled from 'styled-components';\n\nimport { Label, Text } from './primary';\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 20px;\n`;\n\nconst FormField = styled(Field)`\n  border-radius: 5px;\n  border: thin solid lightgray;\n  padding: 5px 10px;\n  margin-top: 5px;\n  font-size: 16px;\n`;\n\nconst Option = styled.option`\n  padding: 10px 10px;\n  background-color: green;\n`;\n\ntype Props = {\n  title: string;\n  fieldKey: string;\n  placeholder?: string;\n  initialValue?: string | number;\n  options?: string[];\n  setFieldValue?: (field: string, value: string | number) => void;\n  onChange?: FormikHandlers['handleChange'];\n  errors?: FormikErrors<FormikValues>;\n};\n\nexport const FieldItem: VFC<Props> = ({\n  title,\n  initialValue,\n  placeholder,\n  fieldKey,\n  setFieldValue,\n  options,\n  errors,\n}) => {\n  const [value, setValue] = useState(initialValue);\n\n  const onFormChange = (event: any) => {\n    const currentValue = event.target.value;\n    setFieldValue && setFieldValue(fieldKey, currentValue);\n    setValue(currentValue);\n  };\n\n  return (\n    <Container>\n      <Label htmlFor={fieldKey}>{title}</Label>\n      {!options && <FormField placeholder={placeholder} name={fieldKey} />}\n      {!!options && (\n        <FormField as=\"select\" key={fieldKey} name={fieldKey} onChange={onFormChange} value={value}>\n          {options.map((val) => (\n            <Option key={val} value={val}>\n              {val}\n            </Option>\n          ))}\n        </FormField>\n      )}\n      {!!errors?.[fieldKey] && (\n        <Text mt={5} color=\"red\" size={15}>\n          {errors[fieldKey]}\n        </Text>\n      )}\n    </Container>\n  );\n};\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { FC } from 'react';\nimport Modal from 'react-modal';\nimport { Steps } from 'antd';\nimport { Form, Formik, FormikValues } from 'formik';\nimport styled from 'styled-components';\nimport { ObjectSchema } from 'yup';\n\nimport { ClickAction, FormSubmit, ModalAction } from 'pages/project-details/types';\nimport { RegistrySteps } from 'pages/register/styles';\nimport { getStepStatus } from 'pages/register/utils';\nimport cross from 'resources/cross.svg';\n\nimport { FieldItem } from './formItem';\nimport Icon from './Icon';\nimport { Button, ButtonContainer, Text } from './primary';\n\nexport type TFieldItem = {\n  title: string;\n  formKey: string;\n  value?: string | number;\n  placeholder?: string;\n  options?: string[];\n};\n\nexport type FormConfig = {\n  placeHolder?: string;\n  formValues: FormikValues;\n  schema: ObjectSchema<any>;\n  onFormSubmit: FormSubmit;\n  items: TFieldItem[];\n};\n\nexport type StepItem = {\n  index: number;\n  title: string;\n  desc: string;\n  buttonTitle: string;\n  onClick?: ClickAction;\n  form?: FormConfig;\n};\n\nconst modalStyles = {\n  content: {\n    backgroundColor: 'white',\n    borderRadius: 15,\n    top: '50%',\n    left: '50%',\n    right: 'auto',\n    bottom: 'auto',\n    marginRight: '-50%',\n    transform: 'translate(-50%, -50%)',\n    maxWidth: 900,\n    minWidth: 700,\n    maxHeight: '90%',\n    padding: 0,\n  },\n  overlay: {\n    zIndex: 50,\n    backgroundColor: 'rgba(0, 0, 0, 0.65)',\n  },\n};\n\ntype Props = {\n  visible: boolean;\n  steps: StepItem[] | undefined;\n  title?: string;\n  currentStep?: number;\n  loading?: boolean;\n  type?: ModalAction;\n  onClose: () => void;\n};\n\nconst ModalView: FC<Props> = ({\n  visible,\n  title,\n  onClose,\n  currentStep = 0,\n  steps,\n  type,\n  loading,\n}) => {\n  if (!steps || currentStep > steps.length - 1) return null;\n  const stepItem = steps[currentStep];\n  const renderFormContent = (item: StepItem) =>\n    item.form ? (\n      <Formik\n        initialValues={item.form.formValues}\n        validationSchema={item.form.schema}\n        onSubmit={item.form.onFormSubmit}\n      >\n        {({ status, errors, submitForm, setFieldValue, initialValues }) => (\n          <InputForm>\n            <div>\n              {item.form?.items.map(({ title = '', formKey = '', placeholder = '', options }) => (\n                <FieldItem\n                  key={title}\n                  title={title}\n                  fieldKey={formKey}\n                  initialValue={initialValues[formKey]}\n                  placeholder={placeholder}\n                  setFieldValue={setFieldValue}\n                  options={options}\n                  errors={errors}\n                />\n              ))}\n              {item.desc && (\n                <Text mt={20} size={13} color=\"gray\">\n                  {item.desc}\n                </Text>\n              )}\n            </div>\n            <ButtonContainer align=\"right\" mt={50}>\n              <Button\n                width={260}\n                mt={0}\n                title={item.buttonTitle}\n                onClick={submitForm}\n                loading={loading || status?.loading}\n              />\n            </ButtonContainer>\n          </InputForm>\n        )}\n      </Formik>\n    ) : null;\n\n  const renderContent = (item: StepItem) => (\n    <ContentContainer>\n      <DescContainer>\n        <Text fw=\"500\" mt={10} size={25}>\n          {item.title}\n        </Text>\n        <Text alignCenter mt={20} size={15} color=\"gray\">\n          {item.desc}\n        </Text>\n      </DescContainer>\n      <ButtonContainer align=\"right\" mt={60}>\n        <Button\n          width={200}\n          title={item.buttonTitle}\n          onClick={() => item.onClick && item.onClick(type)}\n          loading={loading}\n        />\n      </ButtonContainer>\n    </ContentContainer>\n  );\n\n  const renderHeader = () => (\n    <HeaderContainer onClick={onClose}>\n      <Text fw=\"500\" size={20}>\n        {title}\n      </Text>\n      <IconContainer>\n        <Icon size={18} src={cross} />\n      </IconContainer>\n    </HeaderContainer>\n  );\n\n  const renderSteps = () =>\n    steps?.length > 1 && (\n      <ModalSteps size=\"small\" current={currentStep}>\n        {steps.map((item, i) => (\n          <RegistrySteps.Step\n            key={item.title}\n            status={getStepStatus(currentStep, i)}\n            title={item.buttonTitle}\n          />\n        ))}\n      </ModalSteps>\n    );\n\n  return (\n    <Modal isOpen={visible} style={modalStyles} closeTimeoutMS={200} ariaHideApp={false}>\n      {renderHeader()}\n      <Container>\n        {renderSteps()}\n        {stepItem.form ? renderFormContent(stepItem) : renderContent(stepItem)}\n      </Container>\n    </Modal>\n  );\n};\n\nexport default ModalView;\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  padding: 32px;\n  padding-bottom: 52px;\n`;\n\nconst HeaderContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-content: center;\n  padding: 16px 32px;\n  border-bottom: 1px solid var(--sq-gray300);\n`;\n\nconst IconContainer = styled.div`\n  margin-top: 5px;\n`;\n\nconst ModalSteps = styled(Steps)`\n  width: 100%;\n  min-width: 350px;\n  margin-bottom: 40px;\n`;\n\nconst InputForm = styled(Form)`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: space-between;\n`;\n\nconst ContentContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst DescContainer = styled.div`\n  display: flex;\n  width: 80%;\n  flex-direction: column;\n  align-items: center;\n`;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { utils } from 'ethers';\n\nimport { SDK } from 'containers/contractSdk';\nimport { Signer } from 'hooks/web3Hook';\n\nimport { cidToBytes32 } from './ipfs';\n\nexport const emptyControllerAccount = '0x0000000000000000000000000000000000000000';\n\nconst ErrorMessages = {\n  sdkOrSignerError: 'Contract SDK or Signer not initialised',\n  controllerExist: 'Controller account is used by an indexer already',\n  deploymentIdError: 'Invalid deploymentId provided',\n  amountError: 'Amount can not be empty',\n  controllerError: 'Controller can not be empty',\n};\n\n// TODO: refactor\nexport async function indexerRequestApprove(sdk: SDK, signer: Signer, amount: string | undefined) {\n  if (!sdk || !signer) {\n    throw new Error(ErrorMessages.sdkOrSignerError);\n  }\n  if (!amount) {\n    throw new Error(ErrorMessages.amountError);\n  }\n\n  const tx = await sdk.sqToken\n    .connect(signer)\n    .increaseAllowance(sdk.staking.address, utils.parseEther(amount));\n  return tx;\n}\n\nexport async function indexerRegistry(\n  sdk: SDK,\n  signer: Signer,\n  amount: string | undefined,\n  metadata: string,\n  commissionRate: number\n) {\n  if (!sdk || !signer) {\n    throw new Error(ErrorMessages.sdkOrSignerError);\n  }\n  if (!amount) {\n    throw new Error(ErrorMessages.amountError);\n  }\n\n  const tx = await sdk.indexerRegistry\n    .connect(signer)\n    .registerIndexer(utils.parseEther(amount), metadata, commissionRate);\n  return tx;\n}\n\nexport async function updateMetadata(sdk: SDK, signer: Signer, metadata: string) {\n  if (!sdk || !signer) {\n    throw new Error(ErrorMessages.sdkOrSignerError);\n  }\n\n  const tx = await sdk.indexerRegistry.connect(signer).updateMetadata(metadata);\n  return tx;\n}\n\nexport async function unRegister(sdk: SDK, signer: Signer) {\n  if (!sdk || !signer) {\n    throw new Error(ErrorMessages.sdkOrSignerError);\n  }\n\n  const tx = sdk.indexerRegistry.connect(signer).unregisterIndexer();\n  return tx;\n}\n\nexport async function configController(sdk: SDK, signer: Signer, controller: string | undefined) {\n  if (!sdk || !signer) {\n    throw new Error(ErrorMessages.sdkOrSignerError);\n  }\n  if (!controller) {\n    throw new Error(ErrorMessages.controllerError);\n  }\n\n  const indexer = await sdk.indexerRegistry.controllerToIndexer(controller);\n  if (indexer !== emptyControllerAccount) {\n    throw new Error(ErrorMessages.controllerExist);\n  }\n\n  const tx = await sdk.indexerRegistry.connect(signer).setControllerAccount(controller);\n  return tx;\n}\n\nexport async function startIndexing(sdk: SDK, signer: Signer, deploymentId: string | undefined) {\n  if (!sdk || !signer) {\n    throw new Error(ErrorMessages.sdkOrSignerError);\n  }\n  if (!deploymentId) {\n    throw new Error(ErrorMessages.deploymentIdError);\n  }\n\n  const tx = await sdk.queryRegistry.connect(signer).startIndexing(cidToBytes32(deploymentId));\n  return tx;\n}\n\nexport async function readyIndexing(sdk: SDK, signer: Signer, deploymentId: string | undefined) {\n  if (!sdk || !signer) {\n    throw new Error(ErrorMessages.sdkOrSignerError);\n  }\n  if (!deploymentId) {\n    throw new Error(ErrorMessages.deploymentIdError);\n  }\n\n  const tx = await sdk.queryRegistry\n    .connect(signer)\n    .updateIndexingStatusToReady(cidToBytes32(deploymentId));\n  return tx;\n}\n\nexport async function stopIndexing(sdk: SDK, signer: Signer, deploymentId: string | undefined) {\n  if (!sdk || !signer) {\n    throw new Error(ErrorMessages.sdkOrSignerError);\n  }\n  if (!deploymentId) {\n    throw new Error(ErrorMessages.deploymentIdError);\n  }\n\n  const tx = await sdk.queryRegistry.connect(signer).stopIndexing(cidToBytes32(deploymentId));\n  return tx;\n}\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { formatUnits } from '@ethersproject/units';\n\nimport { useContractSDK } from 'containers/contractSdk';\nimport { useCoordinatorIndexer } from 'containers/coordinatorIndexer';\nimport { useWeb3 } from 'hooks/web3Hook';\nimport { Account, IndexerMetadata } from 'pages/account/types';\nimport { HookDependency } from 'types/types';\nimport { emptyControllerAccount } from 'utils/indexerActions';\nimport { bytes32ToCid, cat } from 'utils/ipfs';\n\n// indexer save inside coordinator service\nexport const useIsCoordinatorIndexer = (): boolean => {\n  const { indexer } = useCoordinatorIndexer();\n  const { account } = useWeb3();\n\n  return useMemo(() => !!account && !!indexer && account === indexer, [account, indexer]);\n};\n\nexport const useIsRegistedIndexer = (): boolean | undefined => {\n  const { account } = useWeb3();\n  const [isIndexer, setIsIndexer] = useState<boolean>();\n  const sdk = useContractSDK();\n\n  const getIsIndexer = useCallback(async () => {\n    if (!account || !sdk) return;\n    try {\n      const status = await sdk?.indexerRegistry.isIndexer(account);\n      setIsIndexer(status);\n    } catch {\n      setIsIndexer(false);\n    }\n  }, [account, sdk]);\n\n  useEffect(() => {\n    getIsIndexer();\n  }, [getIsIndexer]);\n\n  return isIndexer;\n};\n\nexport const useIsIndexer = (): boolean | undefined => {\n  const isCoordinatorIndexer = useIsCoordinatorIndexer();\n  const isRegisteredIndexer = useIsRegistedIndexer();\n\n  return useMemo(\n    () => isCoordinatorIndexer && isRegisteredIndexer,\n    [isCoordinatorIndexer, isRegisteredIndexer]\n  );\n};\n\n// TODO: refactor these hooks\n// 1. using `useMemo` | `useCallback` to replace custome useState\n// 2. using try catch | async await other than promise\nexport const useIsController = (account: Account) => {\n  const [isController, setIsController] = useState(false);\n  const sdk = useContractSDK();\n\n  useEffect(() => {\n    sdk?.indexerRegistry\n      .isController(account ?? '')\n      .then((isController) => setIsController(isController))\n      .catch(() => setIsController(false));\n  }, [account, sdk]);\n\n  return isController;\n};\n\nexport const useController = () => {\n  const [controller, setController] = useState<string>();\n  const { account } = useWeb3();\n  const sdk = useContractSDK();\n\n  const getController = useCallback(async () => {\n    try {\n      const controller = await sdk?.indexerRegistry.indexerToController(account ?? '');\n      setController(controller === emptyControllerAccount ? '' : controller);\n    } catch {\n      setController(undefined);\n    }\n  }, [account, sdk]);\n\n  useEffect(() => {\n    getController();\n  }, [getController]);\n\n  return { controller, getController };\n};\n\nexport const useControllerToIndexer = (account: Account) => {\n  const [indexer, setIndexer] = useState('');\n  const sdk = useContractSDK();\n\n  useEffect(() => {\n    sdk?.indexerRegistry\n      .controllerToIndexer(account ?? '')\n      .then((indexer) => {\n        setIndexer(indexer);\n      })\n      .catch(() => setIndexer(''));\n  }, [account, sdk]);\n\n  return indexer;\n};\n\nexport const useTokenBalance = (account: Account, deps?: HookDependency) => {\n  const [tokenBalance, setBalance] = useState('0.00');\n  const sdk = useContractSDK();\n\n  const getTokenBalance = useCallback(async () => {\n    if (!sdk || !account) return;\n    try {\n      const value = await sdk.sqToken.balanceOf(account);\n      const balance = Number(formatUnits(value, 18)).toFixed(2);\n      setBalance(balance);\n    } catch (e) {\n      console.error('Get token balance failed for:', account);\n    }\n  }, [account, sdk]);\n\n  useEffect(() => {\n    getTokenBalance();\n  }, [getTokenBalance, deps]);\n\n  return { tokenBalance, getTokenBalance };\n};\n\nexport const useBalance = (account: Account) => {\n  const [balance, setBalance] = useState<string>();\n  const { library } = useWeb3();\n\n  const getBalance = useCallback(async () => {\n    if (!account || !library) return;\n    try {\n      const value = await library?.getBalance(account);\n      const fixedValue = Number(formatUnits(value, 18)).toFixed(4);\n      setBalance(fixedValue);\n    } catch (e) {\n      console.error('Get balance failed for:', account);\n    }\n  }, [account]);\n\n  useEffect(() => {\n    getBalance();\n  }, [getBalance]);\n\n  return balance;\n};\n\nexport const useIndexerMetadata = () => {\n  const { account } = useWeb3();\n  const sdk = useContractSDK();\n  const [metadata, setMetadata] = useState<IndexerMetadata>();\n\n  const fetchMetadata = useCallback(async () => {\n    if (!account) return;\n    try {\n      const metadataHash = await sdk?.indexerRegistry.metadataByIndexer(account);\n      if (!metadataHash) return;\n\n      const metadata = await cat(bytes32ToCid(metadataHash));\n      setMetadata(metadata);\n    } catch {\n      console.error('Failed to get indexer metadata');\n    }\n  }, [sdk, account]);\n\n  useEffect(() => {\n    fetchMetadata();\n  }, [fetchMetadata]);\n\n  return { metadata, fetchMetadata };\n};\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { FormikHelpers, FormikValues } from 'formik';\n\nimport { ControllerAction } from 'pages/controllers/types';\n\nexport type ChainType = 'cosmos' | 'avalanche' | 'substrate';\n\nexport enum DockerRegistry {\n  query = 'onfinality/subql-query',\n  substrateNode = 'onfinality/subql-node',\n  cosmos = 'onfinality/subql-node-cosmos',\n  avalanche = 'onfinality/subql-node-avalanche',\n}\n\nexport enum IndexingStatus {\n  NOTINDEXING,\n  INDEXING,\n  READY,\n}\n\nexport enum ProjectStatus {\n  NotIndexing = 'NOT INDEXING',\n  Started = 'STARTED',\n  Indexing = 'INDEXING',\n  Ready = 'READY',\n  Terminated = 'TERMINATED',\n}\n\nexport enum PaygStatus {\n  Open = 'OPEN',\n  Close = 'CLOSE',\n}\n\nexport type TransactionType =\n  | ProjectAction.AnnounceIndexing\n  | ProjectAction.AnnounceReady\n  | ProjectAction.AnnounceNotIndexing;\n\nexport enum AccountAction {\n  unregister = 'unregister',\n  updateMetaData = 'updateMetadata',\n}\n\nexport enum ProjectsAction {\n  addProject = 'addProject',\n}\n\nexport enum ProjectAction {\n  StartIndexing = 'StartIndexing',\n  AnnounceIndexing = 'AnnounceIndexing',\n  RestartProject = 'RestartProject',\n  AnnounceReady = 'AnnounceReady',\n  StopProject = 'StopProject',\n  AnnounceNotIndexing = 'AnnounceNotIndexing',\n  StopIndexing = 'StopIndexing',\n  RemoveProject = 'Remove Project',\n  PaygOpen = 'Open PAYG',\n  PaygChangePrice = 'Change Price',\n  PaygClose = 'Close PAYG',\n}\n\n// TODO: move these types to global types\nexport type ModalAction = AccountAction | ControllerAction | ProjectsAction | ProjectAction;\nexport type ClickAction = (type?: ModalAction) => void;\nexport type FormSubmit = (values: FormikValues, helper: FormikHelpers<FormikValues>) => void;\n\nexport type ProjectConfig = {\n  networkEndpoint: string;\n  networkDictionary: string;\n  nodeVersion: string;\n  queryVersion: string;\n  poiEnabled: boolean;\n  forceEnabled: boolean;\n  paygPrice: string;\n  paygExpiration: number;\n  paygThreshold: number;\n  paygOverflow: number;\n};\n\nexport type ProjectServiceMetadata = {\n  id: string;\n  status: IndexingStatus;\n} & ProjectConfig;\n\nexport type TQueryMetadata = {\n  lastProcessedHeight: number;\n  lastProcessedTimestamp: number;\n  targetHeight: number;\n  chain: string;\n  specName: string;\n  genesisHash: string;\n  indexerHealthy?: boolean;\n  indexerNodeVersion: string;\n  queryNodeVersion: string;\n  indexerStatus: string;\n  queryStatus: string;\n};\n\n// manifest types\nexport type Runner = {\n  node?: {\n    name: string;\n    version: string;\n  };\n  query?: {\n    name: string;\n    version: string;\n  };\n};\n\ntype DataSources = {\n  kind: string;\n};\n\nexport type PartialIpfsDeploymentManifest = {\n  dataSources: DataSources[];\n  schema: {\n    file: string;\n  };\n  network: {\n    chainId?: string;\n  };\n  specVersion: string;\n  runner?: Runner;\n};\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { useContractSDK } from 'containers/contractSdk';\n\nimport { useWeb3 } from './web3Hook';\n\nexport const useTokenSymbol = () => {\n  const { chainId } = useWeb3();\n  const tokenSymbol = useMemo(() => {\n    if (chainId === 595) {\n      return 'ACA';\n    }\n    if (chainId === 1287) {\n      return 'DEV';\n    }\n\n    return 'DEV';\n  }, [chainId]);\n\n  return tokenSymbol;\n};\n\nexport type IndexerEra = {\n  currentEra: string;\n  lastClaimedEra: string;\n  lastSettledEra: string;\n};\n\nexport const useIndexerEra = () => {\n  const { account } = useWeb3();\n  const sdk = useContractSDK();\n\n  const [indexerEra, setIndexerEra] = useState<IndexerEra>();\n\n  const updateEra = useCallback(async () => {\n    if (!sdk || !account) return;\n\n    const lastClaimedEra = (await sdk.rewardsDistributor.getRewardInfo(account)).lastClaimEra;\n    const [currentEra, lastSettledEra] = await Promise.all([\n      sdk.eraManager.eraNumber(),\n      sdk.rewardsStaking.getLastSettledEra(account),\n    ]);\n\n    setIndexerEra({\n      currentEra: currentEra.toString(),\n      lastClaimedEra: lastClaimedEra.toString(),\n      lastSettledEra: lastSettledEra.toString(),\n    });\n  }, [sdk, account]);\n\n  useEffect(() => {\n    updateEra();\n  }, [updateEra]);\n\n  return indexerEra;\n};\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport * as yup from 'yup';\n\nimport { IndexerMetadata } from 'pages/account/types';\nimport { ProjectConfig } from 'pages/project-details/types';\n\n// indexer register\nexport enum RegisterFormKey {\n  name = 'name',\n  proxyEndpoint = 'proxyEndpoint',\n  amount = 'amount',\n  rate = 'rate',\n}\n\nexport const RegisterFormSchema = yup.object({\n  [RegisterFormKey.name]: yup.string().defined(),\n  [RegisterFormKey.proxyEndpoint]: yup.string().defined(),\n  [RegisterFormKey.amount]: yup\n    .number()\n    .min(1000, 'Staking token should large than 1000 SQT')\n    .defined(),\n  [RegisterFormKey.rate]: yup\n    .number()\n    .min(0, 'Rate should be between 0 and 100')\n    .max(100, 'Rate should be between 0 and 100')\n    .defined(),\n});\n\nexport const initialRegisterValues = {\n  [RegisterFormKey.name]: '',\n  [RegisterFormKey.proxyEndpoint]: '',\n  [RegisterFormKey.amount]: 0,\n  [RegisterFormKey.rate]: 0,\n};\n\nexport type TRegisterValues = yup.Asserts<typeof RegisterFormSchema>;\n\n// update metadata\nexport enum MetadataFormKey {\n  name = 'name',\n  proxyEndpoint = 'proxyEndpoint',\n}\n\nexport const MetadataFormSchema = yup.object({\n  [RegisterFormKey.name]: yup.string().defined(),\n  [RegisterFormKey.proxyEndpoint]: yup.string().defined(),\n});\n\nexport const initialMetadataValues = (metadata?: IndexerMetadata) => ({\n  [RegisterFormKey.name]: metadata?.name,\n  [RegisterFormKey.proxyEndpoint]: metadata?.url,\n});\n\nexport type TMetadataValues = yup.Asserts<typeof MetadataFormSchema>;\n\n// config controllerItem\nexport enum ControllerFormKey {\n  privateKey = 'privateKey',\n}\n\nexport const ControllerFormSchema = yup.object({\n  [ControllerFormKey.privateKey]: yup.string().defined(),\n});\n\nexport const initialControllerValues = {\n  [ControllerFormKey.privateKey]: '',\n};\n\n// add project\nexport enum ProjectFormKey {\n  deploymentId = 'deploymentId',\n  networkEndpoint = 'networkEndpoint',\n  networkDictionary = 'networkDictionary',\n  nodeVersion = 'nodeVersion',\n  queryVersion = 'queryVersion',\n  poiEnabled = 'poiEnabled',\n  forceEnabled = 'forceEnabled',\n  paygPrice = 'paygPrice',\n  paygExpiration = 'paygExpiration',\n  paygThreshold = 'paygThreshold',\n  paygOverflow = 'paygOverflow',\n}\n\nexport const CIDv0 = new RegExp(/^Qm[1-9A-HJ-NP-Za-km-z]{44}/i);\nexport const ProjectFormSchema = yup.object({\n  [ProjectFormKey.deploymentId]: yup\n    .string()\n    .matches(CIDv0, `Invalid deployment id format`)\n    .defined(),\n});\n\nexport const initialProjectValues = {\n  [ProjectFormKey.deploymentId]: '',\n};\n\n// start indexing project\nexport const initialIndexingValues = (config: ProjectConfig) => ({\n  [ProjectFormKey.networkEndpoint]: config.networkEndpoint,\n  [ProjectFormKey.networkDictionary]: config.networkDictionary ?? '',\n  [ProjectFormKey.nodeVersion]: config.nodeVersion,\n  [ProjectFormKey.queryVersion]: config.queryVersion,\n  [ProjectFormKey.poiEnabled]: config.poiEnabled,\n  [ProjectFormKey.forceEnabled]: config.forceEnabled,\n  [ProjectFormKey.paygPrice]: config.paygPrice,\n  [ProjectFormKey.paygExpiration]: config.paygExpiration,\n  [ProjectFormKey.paygThreshold]: config.paygThreshold,\n  [ProjectFormKey.paygOverflow]: config.paygOverflow,\n});\n\nexport const StartIndexingSchema = yup.object({\n  [ProjectFormKey.networkEndpoint]: yup.string().defined(),\n  [ProjectFormKey.networkDictionary]: yup.string().optional(),\n  [ProjectFormKey.nodeVersion]: yup.string().defined(),\n  [ProjectFormKey.queryVersion]: yup.string().defined(),\n  [ProjectFormKey.poiEnabled]: yup.boolean().required(),\n  [ProjectFormKey.forceEnabled]: yup.boolean().required(),\n});\n\nexport const ProjectPaygSchema = yup.object({\n  [ProjectFormKey.paygPrice]: yup.string().defined(),\n  [ProjectFormKey.paygExpiration]: yup.number().defined(),\n  [ProjectFormKey.paygThreshold]: yup.number().defined(),\n  [ProjectFormKey.paygOverflow]: yup.number().defined(),\n});\n\nexport type IndexingEndpoint = yup.Asserts<typeof StartIndexingSchema>;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nexport type Controller = {\n  id: string;\n  address: string;\n};\n\nexport enum ControllerAction {\n  configController = 'configController',\n  removeAccount = 'removeAccount',\n  withdraw = 'widthdraw',\n}\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nexport enum AccountNotification {\n  MetadataUpated = 'MetadataUpated',\n  ControllerUpdated = 'ControllerUpdated',\n}\n\nexport enum ProjectNotification {\n  NotIndexing = 'NotIndexing',\n  Started = 'Started',\n  Indexing = 'Indexing',\n  Ready = 'Ready',\n  Terminated = 'Terminated',\n}\n\nexport enum TransactionNotification {\n  Loading = 'Loading',\n  Succeed = 'Succeed',\n  Failed = 'Failed',\n}\n\nexport const dismiss = (duration = 5000, onScreen = false) => ({\n  duration,\n  onScreen,\n});\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { AccountAction, ClickAction, FormSubmit } from 'pages/project-details/types';\nimport { initialMetadataValues, MetadataFormKey, MetadataFormSchema } from 'types/schemas';\n\nimport { AccountButtonItem, IndexerMetadata } from './types';\n\nconst buttonTitles = {\n  [AccountAction.unregister]: 'Unregister',\n  [AccountAction.updateMetaData]: 'Update Metadata',\n};\n\nexport const createButonItem = (\n  actionType: AccountAction,\n  onClick: (type?: AccountAction) => void\n): AccountButtonItem => {\n  return {\n    title: buttonTitles[actionType],\n    type: actionType,\n    onClick,\n  };\n};\n\nexport const AccountActionName = {\n  [AccountAction.updateMetaData]: 'Update Indexer Metadata',\n  [AccountAction.unregister]: 'Unregister Indexer Account',\n};\n\n// TODO: refactor refer to `/controllers/config.ts`\nexport const createUnregisterSteps = (onUnregister: ClickAction) => ({\n  [AccountAction.unregister]: [\n    {\n      index: 0,\n      title: 'Unregister from network',\n      desc: `Sorry to see the indexer unregister from the Subquery Network, please note that all the data in your coordinator service will be removed, and the staking token will deposit to your current account once transction processed`,\n      buttonTitle: 'Unregister',\n      onClick: onUnregister,\n    },\n  ],\n});\n\nexport const createUpdateMetadataSteps = (onUpdate: FormSubmit, metadata?: IndexerMetadata) => ({\n  [AccountAction.updateMetaData]: [\n    {\n      index: 0,\n      title: 'Update Indexer Metadata',\n      desc: `Input valid indexer name and proxy server endpoint to update the metadata, make sure the proxy endpoint is valid`,\n      buttonTitle: 'Update Metadata',\n      form: {\n        formValues: initialMetadataValues(metadata),\n        schema: MetadataFormSchema,\n        onFormSubmit: onUpdate,\n        items: [\n          {\n            formKey: MetadataFormKey.name,\n            title: 'Indexer Name',\n          },\n          {\n            formKey: MetadataFormKey.proxyEndpoint,\n            title: 'Proxy Server Endpoint',\n          },\n        ],\n      },\n    },\n  ],\n});\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nconst prompts = {\n  startProject: {\n    title: 'Indexing Project',\n    desc: 'Start indexing project will start the subquery node service indexing the project and start a query service at the same time. It takes around 1 mins to start the services, you can see the progress and related information after everything is ready.',\n  },\n  stopProject: {\n    title: 'Stop Indexing the Project',\n    desc: 'Stop indexing the project will terminate the node and query services, once the services stopped, the service status will change to terminated. You can restart indexing the project at any time.',\n  },\n  restartProject: {\n    title: 'Restart Project',\n    desc: 'Restart indexing project will start the previous subquery node service to index the project, and start a query service at the same time. You can see the progress and related information after everything is ready.',\n  },\n  removeProject: {\n    title: 'Are you sure to remove the project',\n    desc: 'Remove project will remove the project and service containers from coordinator service and database, the indexing data will be removed at the same time. You can add the project back at any time, but need to indexing from the beginning.',\n  },\n  announceIndexing: {\n    title: 'Update Status on Subquery Network',\n    desc: 'Send transaction to start indexing the project on contract, the controller account on coordinator service will start to update the status of indexing service on the contract once the transaction completed. The transaction processing time may take around 10s, it depends on the network and gas fee. You will see the processing status on the top of the page once you confim the transaction on the MetaMask.',\n  },\n  announceReady: {\n    title: 'Update Indexing To Ready',\n    desc: 'Send transaction to change indexing status to ready on contract, the explorer will display you query endpoint once the transaction completed. The transaction processing time may take around 10s, it depends on the network and gas fee. You will see the processing status on the top of the page once you confim the transaction on the MetaMask.',\n  },\n  announceNotIndexing: {\n    title: 'Announce Not Indexing the Project',\n    desc: 'Send transaction to change indexing status to not indexing on contract, the project status will change to not indexing on the network. The transaction processing time may take around 10s, it depends on the network and gas fee. You will see the processing status on the top of the page once you confim the transaction on the MetaMask.',\n  },\n  paygOpen: {\n    title: 'Open PAYG',\n    desc: 'This will open the function of pay-as-you-go, which supports micro-payment and instant requests. The query service will based on HTTP and p2p network at the same time. If consumer establish the service, the service will be in the form of state channel. the price is the cost of per query',\n  },\n  paygChangePrice: {\n    title: 'Change Price',\n    desc: 'This will modify the cost of per query, the price of the established state channel will remain unchanged, and the new state channel will use the new price',\n  },\n  paygClose: {\n    title: 'Close PAYG',\n    desc: 'This will turn off the function of pay-as-you-go, the already established state channel will not be affected, and the new state channel will not be established.',\n  },\n};\n\nexport default prompts;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Notification } from 'containers/notificationContext';\nimport {\n  initialIndexingValues,\n  ProjectFormKey,\n  ProjectPaygSchema,\n  StartIndexingSchema,\n} from 'types/schemas';\nimport { dismiss, ProjectNotification } from 'utils/notification';\n\nimport prompts from './prompts';\nimport {\n  ClickAction,\n  FormSubmit,\n  PaygStatus,\n  ProjectAction,\n  ProjectConfig,\n  ProjectStatus,\n} from './types';\n\nexport type ButtonItem = {\n  title: string;\n  action: () => void;\n  color?: string;\n};\n\nconst createButtonItem = (title: string, action: () => void, color?: string): ButtonItem => ({\n  title,\n  action,\n  color,\n});\n\nexport const createNetworkButtonItems = (onButtonClick: (type: ProjectAction) => void) => ({\n  [ProjectStatus.NotIndexing]: [],\n  [ProjectStatus.Started]: [\n    createButtonItem('Announce Indexing', () => onButtonClick(ProjectAction.AnnounceIndexing)),\n  ],\n  [ProjectStatus.Indexing]: [\n    createButtonItem('Announce Ready', () => onButtonClick(ProjectAction.AnnounceReady)),\n  ],\n  [ProjectStatus.Ready]: [\n    createButtonItem('Announce NotIndexing', () =>\n      onButtonClick(ProjectAction.AnnounceNotIndexing)\n    ),\n  ],\n  [ProjectStatus.Terminated]: [\n    createButtonItem('Announce NotIndexing', () =>\n      onButtonClick(ProjectAction.AnnounceNotIndexing)\n    ),\n  ],\n});\n\nexport const createServiceButtonItems = (onButtonClick: (type: ProjectAction) => void) => ({\n  [ProjectStatus.NotIndexing]: [\n    createButtonItem('Start Indexing', () => onButtonClick(ProjectAction.StartIndexing)),\n    createButtonItem('Remove Project', () => onButtonClick(ProjectAction.RemoveProject)),\n  ],\n  [ProjectStatus.Started]: [\n    createButtonItem('Stop Project', () => onButtonClick(ProjectAction.StopProject)),\n  ],\n  [ProjectStatus.Indexing]: [\n    createButtonItem('Restart Indexing', () => onButtonClick(ProjectAction.RestartProject)),\n    createButtonItem('Stop Indexing', () => onButtonClick(ProjectAction.StopIndexing)),\n  ],\n  [ProjectStatus.Ready]: [\n    createButtonItem('Restart Indexing', () => onButtonClick(ProjectAction.RestartProject)),\n    createButtonItem('Stop Indexing', () => onButtonClick(ProjectAction.StopIndexing)),\n  ],\n  [ProjectStatus.Terminated]: [\n    createButtonItem('Restart Indexing', () => onButtonClick(ProjectAction.RestartProject)),\n    createButtonItem('Remove Project', () => onButtonClick(ProjectAction.RemoveProject)),\n  ],\n});\n\nexport const createPaygButtonItems = (onButtonClick: (type: ProjectAction) => void) => ({\n  [PaygStatus.Open]: [\n    createButtonItem('Change price', () => onButtonClick(ProjectAction.PaygChangePrice)),\n    createButtonItem('Close PAYG', () => onButtonClick(ProjectAction.PaygClose)),\n  ],\n  [PaygStatus.Close]: [createButtonItem('Open PAYG', () => onButtonClick(ProjectAction.PaygOpen))],\n});\n\nexport const ProjectActionName = {\n  [ProjectAction.StartIndexing]: 'Start Indexing Project',\n  [ProjectAction.RestartProject]: 'Restart Indexing Project',\n  [ProjectAction.AnnounceIndexing]: 'Announce Indexing Project',\n  [ProjectAction.AnnounceReady]: 'Publish Indexing to Ready',\n  [ProjectAction.StopProject]: 'Stop Project',\n  [ProjectAction.RemoveProject]: 'Remove Project',\n  [ProjectAction.AnnounceNotIndexing]: 'Announce Not Indexing Project',\n  [ProjectAction.StopIndexing]: 'Stop Indexing',\n  [ProjectAction.PaygOpen]: 'Open PAYG',\n  [ProjectAction.PaygChangePrice]: 'Change Price',\n  [ProjectAction.PaygClose]: 'Close PAYG',\n};\n\nexport type ImageVersions = {\n  node: string[];\n  query: string[];\n};\n\nconst startProjectForms = (\n  config: ProjectConfig,\n  versions: ImageVersions,\n  onFormSubmit: FormSubmit\n) => ({\n  formValues: initialIndexingValues(config),\n  schema: StartIndexingSchema,\n  onFormSubmit,\n  items: [\n    {\n      formKey: ProjectFormKey.networkEndpoint,\n      title: 'Indexing Network Endpiont',\n      placeholder: 'wss://polkadot.api.onfinality.io/public-ws',\n    },\n    {\n      formKey: ProjectFormKey.networkDictionary,\n      title: 'Network Dictionary Endpiont',\n      placeholder: 'https://api.subquery.network/sq/subquery/dictionary-polkadot',\n    },\n    {\n      formKey: ProjectFormKey.nodeVersion,\n      title: 'Node Image Version',\n      options: versions.node,\n    },\n    {\n      formKey: ProjectFormKey.queryVersion,\n      title: 'Query Image Version',\n      options: versions.query,\n    },\n    {\n      formKey: ProjectFormKey.poiEnabled,\n      title: 'Enable POI',\n      options: ['true', 'false'],\n    },\n    {\n      formKey: ProjectFormKey.forceEnabled,\n      title: 'Enable Force Start',\n      options: ['true', 'false'],\n    },\n  ],\n});\n\nexport const createStartIndexingSteps = (\n  config: ProjectConfig,\n  versions: ImageVersions,\n  onStartProject: FormSubmit\n) => ({\n  [ProjectAction.StartIndexing]: [\n    {\n      index: 0,\n      title: prompts.startProject.title,\n      desc: prompts.startProject.desc,\n      buttonTitle: 'Confirm',\n      form: startProjectForms(config, versions, onStartProject),\n      onClick: onStartProject,\n    },\n  ],\n});\n\nexport const createRestartProjectSteps = (\n  config: ProjectConfig,\n  versions: ImageVersions,\n  onStartProject: FormSubmit\n) => ({\n  [ProjectAction.RestartProject]: [\n    {\n      index: 0,\n      title: prompts.restartProject.title,\n      desc: prompts.restartProject.desc,\n      buttonTitle: 'Confirm',\n      form: startProjectForms(config, versions, onStartProject),\n    },\n  ],\n});\n\nexport const createRemoveProjectSteps = (onRemoveProject: ClickAction) => ({\n  [ProjectAction.RemoveProject]: [\n    {\n      index: 0,\n      title: prompts.removeProject.title,\n      desc: prompts.removeProject.desc,\n      buttonTitle: 'Confirm',\n      onClick: onRemoveProject,\n    },\n  ],\n});\n\nexport const createAnnounceIndexingSteps = (onSendTransaction: ClickAction) => ({\n  [ProjectAction.AnnounceIndexing]: [\n    {\n      index: 0,\n      title: prompts.announceIndexing.title,\n      desc: prompts.announceIndexing.desc,\n      buttonTitle: 'Send Transction',\n      onClick: onSendTransaction,\n    },\n  ],\n});\n\nexport const createReadyIndexingSteps = (onSendTransaction: ClickAction) => ({\n  [ProjectAction.AnnounceReady]: [\n    {\n      index: 0,\n      title: prompts.announceReady.title,\n      desc: prompts.announceReady.desc,\n      buttonTitle: 'Send Transction',\n      onClick: onSendTransaction,\n    },\n  ],\n});\n\nexport const createNotIndexingSteps = (onSendTransaction: ClickAction) => ({\n  [ProjectAction.AnnounceNotIndexing]: [\n    {\n      index: 0,\n      title: prompts.announceNotIndexing.title,\n      desc: prompts.announceNotIndexing.desc,\n      buttonTitle: 'Send Transction',\n      onClick: onSendTransaction,\n    },\n  ],\n});\n\nexport const createStopProjectSteps = (onStopProject: ClickAction) => ({\n  [ProjectAction.StopProject]: [\n    {\n      index: 0,\n      title: prompts.stopProject.title,\n      desc: prompts.stopProject.desc,\n      buttonTitle: 'Confirm',\n      onClick: onStopProject,\n    },\n  ],\n});\n\nexport const createStopIndexingSteps = (onStopProject: ClickAction) => ({\n  [ProjectAction.StopIndexing]: [\n    {\n      index: 0,\n      title: prompts.stopProject.title,\n      desc: prompts.stopProject.desc,\n      buttonTitle: 'Confirm',\n      onClick: onStopProject,\n    },\n  ],\n});\n\nconst setPaygPriceForms = (config: ProjectConfig, onFormSubmit: FormSubmit) => ({\n  formValues: initialIndexingValues(config),\n  schema: ProjectPaygSchema,\n  onFormSubmit,\n  items: [\n    {\n      formKey: ProjectFormKey.paygPrice,\n      title: 'Set Price (Units: SQT)',\n      placeholder: '1.0000',\n    },\n    {\n      formKey: ProjectFormKey.paygExpiration,\n      title: 'Minimum expiration time',\n      placeholder: '3600',\n    },\n    {\n      formKey: ProjectFormKey.paygThreshold,\n      title: 'Count of automatic checkpoint to chain',\n      placeholder: '1000',\n    },\n    {\n      formKey: ProjectFormKey.paygOverflow,\n      title: 'Maximum allowed conflict count',\n      placeholder: '5',\n    },\n  ],\n});\n\nexport const createPaygOpenSteps = (config: ProjectConfig, onPaygOpen: FormSubmit) => ({\n  [ProjectAction.PaygOpen]: [\n    {\n      index: 0,\n      title: prompts.paygOpen.title,\n      desc: prompts.paygOpen.desc,\n      buttonTitle: 'Confirm',\n      form: setPaygPriceForms(config, onPaygOpen),\n    },\n  ],\n});\n\nexport const createPaygChangePriceSteps = (\n  config: ProjectConfig,\n  onPaygChangePrice: FormSubmit\n) => ({\n  [ProjectAction.PaygChangePrice]: [\n    {\n      index: 0,\n      title: prompts.paygChangePrice.title,\n      desc: prompts.paygChangePrice.desc,\n      buttonTitle: 'Confirm',\n      form: setPaygPriceForms(config, onPaygChangePrice),\n    },\n  ],\n});\n\nexport const createPaygCloseSteps = (onPaygClose: ClickAction) => ({\n  [ProjectAction.PaygClose]: [\n    {\n      index: 0,\n      title: prompts.paygClose.title,\n      desc: prompts.paygClose.desc,\n      buttonTitle: 'Confirm',\n      onClick: onPaygClose,\n    },\n  ],\n});\n\n// inconsistent status config\nexport const aletMessages = {\n  [ProjectStatus.Started]: {\n    title: 'Ready to indexing the project on Suquery Network',\n    description:\n      'The current project has been alreay started, check the progress and logs make sure indexing is alright. Try press the Announce Indexing button to annouce indexing this project on Subquery Network. You can also try to restart indexing if something wrong happens.',\n  },\n  [ProjectStatus.Terminated]: {\n    title: 'Status Inconsistent',\n    description:\n      'The current indexing service for this project is terminated but the indexing service status on Subquery Network is still INDEXING, we encourage you to press the Announce NotIndexing button to change the online status to NOTINDEXING as well',\n  },\n};\n\n// notification config\nexport const notifications: Record<string, Notification> = {\n  [ProjectNotification.Started]: {\n    type: 'success',\n    title: 'Project is starting',\n    message: `Starting project may take around 5 seconds`,\n    dismiss: dismiss(),\n  },\n  [ProjectNotification.Terminated]: {\n    type: 'success',\n    title: 'Project Terminated',\n    message: `The project has been stopped, you can restart or update the status on network to not indexing`,\n    dismiss: dismiss(),\n  },\n};\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { ContractTransaction } from 'ethers';\n\nimport { Notification, notificationContext } from 'containers/notificationContext';\n\nimport { dismiss } from './notification';\n\nconst formatHash = (hash: string) => {\n  const len = hash.length;\n  return `${hash.substring(0, 15)}...${hash.substring(len - 16, len - 1)}`;\n};\n\nexport function txLoadingNotification(title: string, txHash: string): Notification {\n  return {\n    type: 'default',\n    title,\n    message: `Processing transaction may take around 20s: ${formatHash(txHash)}`,\n    dismiss: dismiss(50000, true),\n  };\n}\n\nexport function txSuccessNotification(name: string): Notification {\n  return {\n    type: 'success',\n    title: 'Transaction Succeed',\n    message: `${name.toLowerCase()} completed`,\n    dismiss: dismiss(),\n  };\n}\n\nexport function txErrorNotification(message: string): Notification {\n  return {\n    type: 'danger',\n    title: 'Transaction Failed',\n    message: `${message}`,\n    dismiss: dismiss(),\n  };\n}\n\nexport async function handleTransaction(\n  name: string,\n  tx: ContractTransaction,\n  notificationContext: notificationContext,\n  onSuccess?: () => void,\n  onError?: () => void\n) {\n  const { dispatchNotification, removeNotification } = notificationContext;\n  const loadingId = dispatchNotification(txLoadingNotification(name, tx.hash));\n\n  try {\n    const receipt = await tx.wait(1);\n    if (!receipt.status) {\n      onError && onError();\n      dispatchNotification(txErrorNotification(tx.hash));\n    } else {\n      onSuccess && onSuccess();\n      dispatchNotification(txSuccessNotification(name));\n    }\n    removeNotification(loadingId);\n  } catch (e) {\n    console.error('Transaction Failed:', e);\n    // @ts-ignore\n    dispatchNotification(txErrorNotification(e.message));\n  }\n}\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useCallback, useMemo } from 'react';\n\nimport { useContractSDK } from 'containers/contractSdk';\nimport { useNotification } from 'containers/notificationContext';\nimport { AccountActionName } from 'pages/account/config';\nimport { ControllerAction } from 'pages/controllers/types';\nimport { ProjectActionName } from 'pages/project-details/config';\nimport { AccountAction, ProjectAction, TransactionType } from 'pages/project-details/types';\nimport {\n  configController,\n  readyIndexing,\n  startIndexing,\n  stopIndexing,\n  unRegister,\n  updateMetadata,\n} from 'utils/indexerActions';\nimport { handleTransaction } from 'utils/transactions';\n\nimport { useSigner } from './web3Hook';\n\ntype Callback = (e?: any) => any | Promise<any> | undefined;\ntype AccountTxType = AccountAction | ControllerAction.configController;\nconst ActionNames = {\n  ...AccountActionName,\n  [ControllerAction.configController]: 'Update Controller',\n};\n\nexport const useAccountAction = () => {\n  const signer = useSigner();\n  const sdk = useContractSDK();\n  const notificationContext = useNotification();\n\n  const accountTransactions = useCallback(\n    (param: string) => ({\n      [AccountAction.updateMetaData]: () => updateMetadata(sdk, signer, param),\n      [AccountAction.unregister]: () => unRegister(sdk, signer),\n      [ControllerAction.configController]: () => configController(sdk, signer, param),\n    }),\n    [sdk, signer]\n  );\n\n  return useCallback(\n    async (type: AccountTxType, param: string, onProcess: Callback, onSuccess?: Callback) => {\n      try {\n        const sendTx = accountTransactions(param)[type];\n        const actionName = ActionNames[type];\n        const tx = await sendTx();\n        onProcess();\n        await handleTransaction(actionName, tx, notificationContext, onSuccess);\n      } catch (e) {\n        onProcess(e);\n      }\n    },\n    [accountTransactions]\n  );\n};\n\nexport const useIndexingAction = (id: string) => {\n  const signer = useSigner();\n  const sdk = useContractSDK();\n  const notificationContext = useNotification();\n\n  const indexingTransactions = useMemo(\n    () => ({\n      [ProjectAction.AnnounceIndexing]: () => startIndexing(sdk, signer, id),\n      [ProjectAction.AnnounceReady]: () => readyIndexing(sdk, signer, id),\n      [ProjectAction.AnnounceNotIndexing]: () => stopIndexing(sdk, signer, id),\n    }),\n    [sdk, signer, id]\n  );\n\n  return useCallback(\n    async (type: TransactionType, onProcess: Callback, onSuccess?: Callback) => {\n      try {\n        const sendTx = indexingTransactions[type];\n        const actionName = ProjectActionName[type];\n        const tx = await sendTx();\n        onProcess();\n        await handleTransaction(actionName, tx, notificationContext, onSuccess);\n      } catch (e) {\n        onProcess(e);\n      }\n    },\n    [indexingTransactions]\n  );\n};\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Notification } from 'containers/notificationContext';\nimport { dismiss } from 'utils/notification';\n\nconst prompts = {\n  indexer: {\n    title: 'Indexer Account',\n    name: 'Subquery Master',\n    buttonTitle: 'Unregister',\n    desc: '',\n  },\n  controller: {\n    title: 'Controller Account',\n    name: 'Controller',\n    buttonTitle: 'Update Controller',\n    desc: '',\n  },\n  emptyController: {\n    title: 'Controller Account',\n    name: '',\n    buttonTitle: 'Config Controller',\n    desc: 'Controller account is a delegator of the indexer, need to config a controller account before you start the journey to indexing the projects, controller account will config in you coordinator service and send the status of the indexing services to the contract autimatically',\n  },\n};\n\nexport const notifications = {\n  controller: {\n    type: 'danger',\n    title: 'Insufficient Balance',\n    message:\n      'The controller account has insufficient assets to pay the transaction fee. Please top up your controller account ASAP.',\n    dismiss: dismiss(50000, false),\n  } as Notification,\n};\n\nexport default prompts;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\n// @ts-nocheck\nimport { useCallback, useMemo } from 'react';\nimport { NavLink, useLocation } from 'react-router-dom';\nimport { Address, Dropdown } from '@subql/react-ui';\nimport buttonStyles from '@subql/react-ui/dist/components/Button/Button.module.css';\nimport styled from 'styled-components';\n\nimport { Separator } from 'components/primary';\nimport { useController, useIsIndexer, useTokenBalance } from 'hooks/indexerHook';\nimport { useIsMetaMask, useWeb3 } from 'hooks/web3Hook';\nimport SubqueryIcon from 'resources/subquery.svg';\n\nimport { Container, LeftContainer, RightContainer } from './styles';\n\nenum TabbarItem {\n  account = 'Account',\n  network = 'Network',\n  projects = 'Projects',\n  payg = 'PAYG',\n}\n\nconst TabBar = styled(NavLink)`\n  margin-left: 50px;\n  margin-top: 20px;\n  color: #1a202c;\n  text-decoration: none;\n  font-family: Futura;\n  font-size: 16px;\n  :hover {\n    text-decoration: underline;\n  }\n`;\n\nconst Header = () => {\n  const { account, deactivate } = useWeb3();\n  const { pathname } = useLocation();\n  const isMetaMask = useIsMetaMask();\n  const isIndexer = useIsIndexer();\n  const controller = useController(account);\n  const { tokenBalance } = useTokenBalance(account, pathname);\n\n  const activeStyle = { fontWeight: 500, color: '#4388dd' };\n  const dropdownStyle = { border: 'unset !important', padding: 15, width: 100 };\n\n  const createItem = (key: string, label: string) => ({ key, label });\n\n  const onSelected = (key: string) => {\n    if (key === 'disconnect') {\n      deactivate();\n    }\n  };\n\n  const isRootPage = useMemo(() => pathname === '/', [pathname]);\n  const accountDetails = useMemo(\n    () => [\n      createItem('balance', `Token: ${tokenBalance} SQT`),\n      createItem('disconnect', 'Disconnect'),\n    ],\n    [tokenBalance]\n  );\n\n  const renderTabbars = useCallback(\n    () => (\n      <div>\n        <TabBar to=\"/account\" activeStyle={activeStyle}>\n          {TabbarItem.account}\n        </TabBar>\n        <TabBar to=\"/network\" activeStyle={activeStyle}>\n          {TabbarItem.network}\n        </TabBar>\n        {controller && (\n          <TabBar to=\"/projects\" activeStyle={activeStyle}>\n            {TabbarItem.projects}\n          </TabBar>\n        )}\n        {controller && (\n          <TabBar to=\"/payg\" activeStyle={activeStyle}>\n            {TabbarItem.payg}\n          </TabBar>\n        )}\n      </div>\n    ),\n    [controller]\n  );\n\n  const renderAddress = () =>\n    isRootPage ? (\n      <Address address={account} size=\"large\" />\n    ) : (\n      <Dropdown\n        items={accountDetails}\n        onSelected={onSelected}\n        dropdownClass={{ ...buttonStyles.secondary, ...dropdownStyle }}\n      >\n        <Address address={account} size=\"large\" />\n      </Dropdown>\n    );\n\n  return (\n    <Container>\n      <LeftContainer>\n        <img src={SubqueryIcon} alt=\"subquery\" />\n        {!isRootPage && isIndexer && renderTabbars()}\n      </LeftContainer>\n      {isMetaMask && (\n        <RightContainer>\n          <Separator width={30} color=\"#f6f9fc\" />\n          {account && renderAddress()}\n        </RightContainer>\n      )}\n    </Container>\n  );\n};\n\nexport default Header;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport styled from 'styled-components';\n\nexport const Container = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 0px 50px;\n  min-height: 630px;\n`;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useEffect, useMemo, useState } from 'react';\nimport { useHistory } from 'react-router';\nimport { useMutation } from '@apollo/client';\nimport { isUndefined } from 'lodash';\n\nimport AccountCard from 'components/accountCard';\nimport ModalView from 'components/modalView';\nimport { useCoordinatorIndexer } from 'containers/coordinatorIndexer';\nimport { useLoading } from 'containers/loadingContext';\nimport { useNotification } from 'containers/notificationContext';\nimport {\n  useBalance,\n  useController,\n  useIndexerMetadata,\n  useIsController,\n  useIsIndexer,\n} from 'hooks/indexerHook';\nimport { useTokenSymbol } from 'hooks/network';\nimport { useAccountAction } from 'hooks/transactionHook';\nimport { useIsMetaMask, useWeb3 } from 'hooks/web3Hook';\nimport { AccountAction } from 'pages/project-details/types';\nimport { MetadataFormKey } from 'types/schemas';\nimport { balanceSufficient } from 'utils/account';\nimport { createIndexerMetadata } from 'utils/ipfs';\nimport { REMOVE_ACCOUNTS } from 'utils/queries';\n\nimport {\n  AccountActionName,\n  createButonItem,\n  createUnregisterSteps,\n  createUpdateMetadataSteps,\n} from './config';\nimport prompts, { notifications } from './prompts';\nimport { Container } from './styles';\nimport { AccountButtonItem } from './types';\n\nconst Account = () => {\n  const [visible, setVisible] = useState(false);\n  const [currentStep, setCurrentStep] = useState(0);\n  const [actionType, setActionType] = useState<AccountAction>();\n\n  const { account } = useWeb3();\n  const isIndexer = useIsIndexer();\n  const { indexer } = useCoordinatorIndexer();\n  const { metadata, fetchMetadata } = useIndexerMetadata();\n  const accountAction = useAccountAction();\n  const isMetaMask = useIsMetaMask();\n  const isController = useIsController(account);\n  const { controller } = useController();\n  const controllerBalance = useBalance(controller);\n  const indexerBalance = useBalance(account);\n  const { dispatchNotification } = useNotification();\n  const { setPageLoading } = useLoading();\n  const history = useHistory();\n  const tokenSymbol = useTokenSymbol();\n\n  const [removeAccounts] = useMutation(REMOVE_ACCOUNTS);\n\n  prompts.controller.desc = `Balance: ${controllerBalance} ${tokenSymbol}`;\n  const controllerItem = !controller ? prompts.emptyController : prompts.controller;\n  const indexerItem = prompts.indexer;\n\n  useEffect(() => {\n    setPageLoading(isUndefined(account) || isUndefined(indexer));\n  }, [account, indexer]);\n\n  useEffect(() => {\n    if (controllerBalance && !balanceSufficient(controllerBalance)) {\n      dispatchNotification(notifications.controller);\n    }\n  }, [controllerBalance]);\n\n  const onButtonPress = (type?: AccountAction) => {\n    setActionType(type);\n    setVisible(true);\n  };\n\n  const onModalClose = () => {\n    setVisible(false);\n    setTimeout(() => setCurrentStep(0), 1000);\n  };\n\n  const indexerName = useMemo(() => metadata?.name ?? ' ', [metadata]);\n\n  const indexerButtons = [\n    createButonItem(AccountAction.updateMetaData, onButtonPress),\n    createButonItem(AccountAction.unregister, onButtonPress),\n  ];\n\n  const controllerButtons = [\n    {\n      title: 'Manange Controllers',\n      onClick: () => history.push('/controller-management'),\n    } as AccountButtonItem,\n  ];\n\n  const updateMetadataStep = useMemo(\n    () =>\n      createUpdateMetadataSteps(async (values, formHelper) => {\n        formHelper.setStatus({ loading: true });\n        const name = values[MetadataFormKey.name];\n        const proxyEndpoint = values[MetadataFormKey.proxyEndpoint];\n        const metadata = await createIndexerMetadata(name, proxyEndpoint);\n        await accountAction(AccountAction.updateMetaData, metadata, onModalClose, fetchMetadata);\n      }, metadata),\n    [metadata]\n  );\n\n  const unregisterCompleted = async () => {\n    await removeAccounts();\n    history.replace('/register');\n  };\n\n  const unregisterStep = createUnregisterSteps(() =>\n    accountAction(AccountAction.unregister, '', onModalClose, unregisterCompleted)\n  );\n\n  const steps = useMemo(() => ({ ...unregisterStep, ...updateMetadataStep }), [metadata]);\n\n  return (\n    <Container>\n      {isMetaMask && isIndexer && (\n        <AccountCard\n          key={account}\n          title={indexerItem.title}\n          name={indexerName}\n          buttons={indexerButtons}\n          account={account ?? ''}\n          desc={`Balance: ${indexerBalance} ${tokenSymbol}`}\n        />\n      )}\n      {(isIndexer || isController) && (\n        <AccountCard\n          key={account}\n          title={controllerItem.title}\n          name={controllerItem.name}\n          account={controller}\n          buttons={controllerButtons}\n          desc={controllerItem?.desc}\n        />\n      )}\n      {actionType && (\n        <ModalView\n          visible={visible}\n          title={AccountActionName[actionType]}\n          onClose={onModalClose}\n          steps={steps[actionType]}\n          currentStep={currentStep}\n          type={actionType}\n        />\n      )}\n    </Container>\n  );\n};\n\nexport default Account;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nexport function balanceSufficient(balance: string): boolean {\n  return parseFloat(balance) > parseFloat('0.8');\n}\n\nexport function openAccountExporer(account: string) {\n  const url = `https://blockscout.mandala.acala.network/address/${account}`;\n  window.open(url, '_blank', 'noopener,noreferrer');\n}\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { FC } from 'react';\nimport styled from 'styled-components';\n\nimport { Button, Text } from 'components/primary';\n\nexport const Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  border-radius: 18px;\n  margin-bottom: 50px;\n  padding: 60px;\n  min-width: 800px;\n  max-width: 50%;\n  min-height: 450px;\n`;\n\nexport const TextContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\ntype Content = {\n  title: string;\n  desc: string;\n  buttonTitle: string;\n};\n\ntype Props = {\n  item: Content;\n  onClick: () => void;\n  link?: JSX.Element;\n  loading?: boolean;\n};\n\nconst IntroductionView: FC<Props> = ({ item, onClick, loading, link }) => {\n  const { title, desc, buttonTitle } = item;\n  return (\n    <Container>\n      <TextContainer>\n        <Text alignCenter size={35} fw=\"bold\">\n          {title}\n        </Text>\n        <Text alignCenter mt={35}>\n          {desc}\n          {link}\n        </Text>\n      </TextContainer>\n      <Button mt={80} type=\"primary\" title={buttonTitle} loading={loading} onClick={onClick} />\n    </Container>\n  );\n};\n\nexport default IntroductionView;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { NOTIFICATION_TYPE } from 'react-notifications-component';\n\nexport const prompts = {\n  header: {\n    mainTitle: 'Manage Controller Accounts',\n    title: 'Create and manage your controller accounts here',\n    subTitle:\n      'You can Configure the account you wish to set as the controller on the coordinator services',\n    button: 'Create an Account',\n  },\n  intro: {\n    title: 'Manage Controller Accounts',\n    desc: 'You can create as many accounts as you want. You can then configure the one you wish to set as the controller on coordinator services.',\n    buttonTitle: 'Create an Account',\n  },\n  action: {\n    configController: {\n      title: 'Activate your controller on contract',\n      desc: 'Press the button to send the transaction to network and update the new controller account on contract. The transaction processing time may take around 10s, it depends on the network status and gas fee. You will see the processing status on the top of the page once you confim the transaction on the MetaMask.',\n      buttonTitle: 'Send Transction',\n    },\n    removeAccount: {\n      title: 'Remove this account',\n      desc: 'This action will remove the account from your coordinator service. You will not be able to find this account again once you confirm removal. Please make sure there has no assets in this account. Are you sure you want to remove it?',\n      buttonTitle: 'Confirm Removal',\n    },\n    withdraw: {\n      title: 'Withdraw from controller account',\n      desc: 'You are about to withdraw the full balance from this account to your index account. The amount you receive will be the full balance minus the transaction fee. Transaction fee is determined by the network.',\n      buttonTitle: 'Confirm Withdrawl',\n    },\n  },\n  controllerItem: {\n    active: 'Actived',\n    activeBtn: 'Active',\n    widthdrawBtn: 'Withdraw',\n    removeBtn: 'Remove',\n  },\n  notification: {\n    widthdraw: {\n      loading: {\n        type: 'default' as NOTIFICATION_TYPE,\n        title: 'Controller withdrawl',\n        message: (c: string) => `Withdraw all the asset for controller: ${c}  may take 20s`,\n      },\n      success: {\n        type: 'success' as NOTIFICATION_TYPE,\n        title: 'Controller withdrawl Succeed',\n        message: (c: string) => `Withdraw controller: ${c} assets successfully`,\n      },\n      failed: {\n        type: 'danger' as NOTIFICATION_TYPE,\n        title: 'Controller withdrawl Failed',\n        message: (c: string) => `Withdraw controller: ${c} assets failed`,\n      },\n    },\n  },\n};\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Notification } from 'containers/notificationContext';\nimport { ClickAction } from 'pages/project-details/types';\nimport { dismiss } from 'utils/notification';\n\nimport { prompts } from './prompts';\nimport { ControllerAction } from './types';\n\nconst { action, notification } = prompts;\n\n// TODO: export to global\ntype ModalInfo = {\n  title: string;\n  desc: string;\n  buttonTitle: string;\n};\n\nconst createModalStep = (info: ModalInfo, action: ClickAction) => ({\n  index: 0,\n  title: info.title,\n  desc: info.desc,\n  buttonTitle: info.buttonTitle,\n  onClick: action,\n});\n\nexport const createConfigControllerSteps = (onSendTxConfigController: ClickAction) => ({\n  [ControllerAction.configController]: [\n    createModalStep(action.configController, onSendTxConfigController),\n  ],\n});\n\nexport const createRemoveAccountSteps = (removeAccount: ClickAction) => ({\n  [ControllerAction.removeAccount]: [createModalStep(action.removeAccount, removeAccount)],\n});\n\nexport const createWithdrawSteps = (withdraw: ClickAction) => ({\n  [ControllerAction.withdraw]: [createModalStep(action.withdraw, withdraw)],\n});\n\n// notifications\nexport const withdrawControllerLoading = (controller = ''): Notification => {\n  const { type, title, message } = notification.widthdraw.loading;\n  return {\n    type,\n    title,\n    message: message(controller),\n    dismiss: dismiss(30000, true),\n  };\n};\n\nexport const withdrawControllerSucceed = (controller = ''): Notification => {\n  const { type, title, message } = notification.widthdraw.success;\n  return {\n    type,\n    title,\n    message: message(controller),\n    dismiss: dismiss(),\n  };\n};\n\nexport const withdrawControllerFailed = (controller = ''): Notification => {\n  const { type, title, message } = notification.widthdraw.failed;\n  return {\n    type,\n    title,\n    message: message(controller),\n    dismiss: dismiss(),\n  };\n};\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Spinner } from '@subql/react-ui';\n\n// FIXME: fix the type\nexport const asyncRender = (ready: boolean, component: any) => {\n  return ready ? component : <Spinner />;\n};\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport styled from 'styled-components';\n\n// controller management page\nexport const Container = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  min-width: 600px;\n  padding: 30px 100px;\n  padding-bottom: 80px;\n  overflow-y: scroll;\n  min-width: 1200px;\n`;\n\nexport const HeaderContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nexport const ContentContainer = styled.div<{ mt?: number }>`\n  display: flex;\n  flex-direction: column;\n  margin-top: ${({ mt }) => mt ?? 0}px;\n`;\n\nexport const IntroContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  align-items: center;\n  justify-content: flex-start;\n  margin-top: 80px;\n`;\n\n// controller items styles\nexport const ItemContainer = styled.div`\n  display: flex;\n  flex: 1;\n  width: 100%;\n  min-width: 600px;\n  min-height: 90px;\n  margin: 10px 0px;\n  padding: 10px 20px;\n  border-color: gray;\n  border-radius: 10px;\n  background-color: white;\n  align-items: center;\n  :hover {\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n    cursor: pointer;\n  }\n`;\n\nexport const ItemContentContainer = styled.div`\n  display: flex;\n  flex: 6;\n  align-items: center;\n`;\n\nexport const AccountContainer = styled.div`\n  display: flex;\n  flex: 4;\n  flex-direction: column;\n  margin: 0px 20px;\n`;\n\nexport const Balance = styled.div`\n  display: flex;\n  flex: 2;\n`;\n\nexport const Status = styled.div`\n  display: flex;\n  flex: 2;\n  align-items: center;\n`;\n\nexport const Buttons = styled.div`\n  display: flex;\n  flex: 2;\n  justify-content: flex-end;\n  min-width: 300px;\n`;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { FC } from 'react';\nimport { Tag } from '@subql/react-ui';\nimport { isUndefined } from 'lodash';\n\nimport { asyncRender } from 'components/asyncRender';\nimport Avatar from 'components/avatar';\nimport { Button, Text } from 'components/primary';\nimport { useBalance } from 'hooks/indexerHook';\nimport { openAccountExporer } from 'utils/account';\n\nimport { useTokenSymbol } from '../../hooks/network';\nimport { prompts } from './prompts';\nimport {\n  AccountContainer,\n  Balance,\n  Buttons,\n  ItemContainer,\n  ItemContentContainer,\n  Status,\n} from './styles';\nimport { Controller } from './types';\n\ntype Props = {\n  name: string;\n  controller: string | undefined;\n  onConfigController: (controller: Controller) => void;\n  onRemoveController: (controller: Controller) => void;\n  onWithdraw: (controller: Controller) => void;\n} & Controller;\n\nconst ControllerItem: FC<Props> = ({\n  id,\n  name,\n  controller,\n  address,\n  onConfigController,\n  onRemoveController,\n  onWithdraw,\n}) => {\n  const { active, activeBtn, widthdrawBtn, removeBtn } = prompts.controllerItem;\n  const isActived = address === controller?.toLocaleLowerCase();\n  const balance = useBalance(address);\n  const emptyBalance = Number(balance) === 0;\n  const account = { id, address };\n  const tokenSymbol = useTokenSymbol();\n\n  return (\n    <ItemContainer>\n      <ItemContentContainer onClick={() => openAccountExporer(address)}>\n        <Avatar address={address} size={70} />\n        <AccountContainer>\n          <Text size={18} fw=\"600\">\n            {name}\n          </Text>\n          <Text size={15} color=\"gray\" mt={5}>\n            {address}\n          </Text>\n        </AccountContainer>\n        <Balance>{asyncRender(!!balance, <Text>{`${balance} ${tokenSymbol}`}</Text>)}</Balance>\n        <Status>{isActived && <Tag text={active} state=\"success\" />}</Status>\n      </ItemContentContainer>\n      {asyncRender(\n        !isUndefined(controller) && !isUndefined(balance),\n        <Buttons>\n          {!isActived && <Button title={activeBtn} onClick={() => onConfigController(account)} />}\n          {!isActived && emptyBalance && (\n            <Button ml={10} title={removeBtn} onClick={() => onRemoveController(account)} />\n          )}\n          {!emptyBalance && (\n            <Button ml={10} title={widthdrawBtn} onClick={() => onWithdraw(account)} />\n          )}\n        </Buttons>\n      )}\n    </ItemContainer>\n  );\n};\n\nexport default ControllerItem;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useEffect, useMemo, useState } from 'react';\nimport { useLazyQuery, useMutation } from '@apollo/client';\nimport { isEmpty, isUndefined } from 'lodash';\n\nimport IntroductionView from 'components/introductionView';\nimport ModalView from 'components/modalView';\nimport { Button, Text } from 'components/primary';\nimport { useLoading } from 'containers/loadingContext';\nimport { useNotification } from 'containers/notificationContext';\nimport { useController } from 'hooks/indexerHook';\nimport { useAccountAction } from 'hooks/transactionHook';\nimport {\n  ADD_CONTROLLER,\n  GET_CONTROLLERS,\n  REMOVE_CONTROLLER,\n  WITHDRAW_CONTROLLER,\n} from 'utils/queries';\n\nimport {\n  createConfigControllerSteps,\n  createRemoveAccountSteps,\n  createWithdrawSteps,\n  withdrawControllerFailed,\n  withdrawControllerLoading,\n  withdrawControllerSucceed,\n} from './config';\nimport ControllerItem from './controllerItem';\nimport { prompts } from './prompts';\nimport { Container, ContentContainer, HeaderContainer, IntroContainer } from './styles';\nimport { Controller, ControllerAction } from './types';\n\nconst controllersPage = () => {\n  const { header, intro } = prompts;\n  const [actionType, setActionType] = useState<ControllerAction>();\n  const [account, setAccount] = useState<Controller>();\n  const [visible, setVisible] = useState(false);\n\n  const { dispatchNotification, removeNotification } = useNotification();\n  const { controller: currentController, getController } = useController();\n  const accountAction = useAccountAction();\n  const { setPageLoading } = useLoading();\n\n  const [removeController] = useMutation(REMOVE_CONTROLLER);\n  const [createController, { loading: createControllerRequesting }] = useMutation(ADD_CONTROLLER);\n  const [withdrawController] = useLazyQuery(WITHDRAW_CONTROLLER);\n  const [getControllers, { data: controllerData }] =\n    useLazyQuery<{ controllers: Controller[] }>(GET_CONTROLLERS);\n\n  useEffect(() => {\n    setPageLoading(isUndefined(controllerData));\n    getControllers();\n  }, [controllerData]);\n\n  const isActivedController = (address: string): boolean => {\n    return address.toLowerCase() === currentController?.toLowerCase();\n  };\n\n  const controllers = useMemo(() => {\n    if (!controllerData || isEmpty(controllerData?.controllers)) return [];\n\n    const { controllers: rawControllers } = controllerData;\n    const activeAccount = rawControllers.find(({ address }) => isActivedController(address));\n    if (!activeAccount) return rawControllers;\n\n    return [\n      activeAccount,\n      ...rawControllers.filter(({ address }) => !isActivedController(address)),\n    ];\n  }, [controllerData, currentController]);\n\n  const createControllerAction = async () => {\n    await createController();\n    await getControllers();\n  };\n\n  const onButtonPress = (type: ControllerAction) => (a: Controller) => {\n    setAccount(a);\n    setActionType(type);\n    setVisible(true);\n  };\n\n  const onModalClose = () => setVisible(false);\n\n  const removeAccountSteps = createRemoveAccountSteps(async () => {\n    await removeController({ variables: { id: account?.id } });\n    await getControllers();\n    onModalClose();\n  });\n\n  const withdrawSteps = createWithdrawSteps(async () => {\n    onModalClose();\n    const address = account?.address;\n    const notificationId = dispatchNotification(withdrawControllerLoading(address));\n\n    const res = await withdrawController({ variables: { id: account?.id } });\n    removeNotification(notificationId);\n    if (res.data.withrawController) {\n      dispatchNotification(withdrawControllerSucceed(address));\n    } else {\n      dispatchNotification(withdrawControllerFailed(address));\n    }\n    await getControllers();\n  });\n\n  const configControllerSteps = createConfigControllerSteps(() =>\n    accountAction(\n      ControllerAction.configController,\n      account?.address ?? '',\n      onModalClose,\n      getController\n    )\n  );\n\n  const steps = { ...configControllerSteps, ...withdrawSteps, ...removeAccountSteps };\n\n  return (\n    <Container>\n      {!isEmpty(controllers) && (\n        <HeaderContainer>\n          <ContentContainer>\n            <Text size={30} fw=\"bold\" mr={20}>\n              {header.mainTitle}\n            </Text>\n            <Text color=\"gray\" mt={5}>\n              {header.title}\n            </Text>\n            <Text color=\"gray\">{header.subTitle}</Text>\n          </ContentContainer>\n          <Button\n            title={header.button}\n            type=\"primary\"\n            loading={createControllerRequesting}\n            onClick={createControllerAction}\n          />\n        </HeaderContainer>\n      )}\n      {!isEmpty(controllers) && (\n        <ContentContainer mt={50}>\n          {!!controllers &&\n            controllers.map((item, index) => (\n              <ControllerItem\n                key={item.id}\n                controller={currentController}\n                name={`Account ${index + 1}`}\n                onConfigController={onButtonPress(ControllerAction.configController)}\n                onRemoveController={onButtonPress(ControllerAction.removeAccount)}\n                onWithdraw={onButtonPress(ControllerAction.withdraw)}\n                {...item}\n              />\n            ))}\n        </ContentContainer>\n      )}\n      {isEmpty(controllers) && (\n        <IntroContainer>\n          <IntroductionView\n            item={{\n              title: intro.title,\n              desc: intro.desc,\n              buttonTitle: intro.buttonTitle,\n            }}\n            onClick={createControllerAction}\n          />\n        </IntroContainer>\n      )}\n      {actionType && (\n        <ModalView\n          visible={visible}\n          onClose={onModalClose}\n          steps={steps[actionType]}\n          type={actionType}\n        />\n      )}\n    </Container>\n  );\n};\n\nexport default controllersPage;\n","export default __webpack_public_path__ + \"static/media/discord.46ef476e.svg\";","export default __webpack_public_path__ + \"static/media/github.3c2fbcc1.svg\";","export default __webpack_public_path__ + \"static/media/linkendin.077ef4b2.svg\";","export default __webpack_public_path__ + \"static/media/matrix.0fc904a9.svg\";","export default __webpack_public_path__ + \"static/media/medium.b5c13839.svg\";","export default __webpack_public_path__ + \"static/media/telegram.224cb085.svg\";","export default __webpack_public_path__ + \"static/media/twitter.ab5c408e.svg\";","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport DiscordIcon from 'resources/discord.svg';\nimport GithubIcon from 'resources/github.svg';\nimport LinkendinIcon from 'resources/linkendin.svg';\nimport MatrixIcon from 'resources/matrix.svg';\nimport MediumIcon from 'resources/medium.svg';\nimport TelegramIcon from 'resources/telegram.svg';\nimport TwitterIcon from 'resources/twitter.svg';\n\nconst createConfig = (src: string, url: string) => ({ src, url });\n\nexport const linkConfigs = [\n  createConfig(TelegramIcon, 'https://t.me/subquerynetwork'),\n  createConfig(DiscordIcon, 'https://www.linkedin.com/company/subquery--'),\n  createConfig(GithubIcon, 'https://github.com/subquery/subql'),\n  createConfig(LinkendinIcon, 'https://www.linkedin.com/company/subquery'),\n  createConfig(MediumIcon, 'https://subquery.medium.com/'),\n  createConfig(MatrixIcon, 'https://matrix.to/#/#subquery:matrix.org'),\n  createConfig(TwitterIcon, 'https://twitter.com/subquerynetwork'),\n];\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport styled from 'styled-components';\n\nexport const Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  background-color: var(--sq-primary-blue);\n  min-height: 150px;\n  width: 100%;\n`;\n\nexport const ContentContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  border-bottom: solid 1px white;\n  padding-left: 80px;\n  padding-right: 100px;\n  align-items: center;\n  min-height: 120px;\n  width: 100%;\n`;\n\nexport const IconsContainer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n  min-width: 550px;\n  height: 100%;\n`;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useLocation } from 'react-router-dom';\n\nimport Icon from 'components/Icon';\nimport { Text } from 'components/primary';\nimport { useIsMetaMask } from 'hooks/web3Hook';\n\nimport { linkConfigs } from './config';\nimport { Container, ContentContainer, IconsContainer } from './styles';\n\nconst Header = () => {\n  const location = useLocation();\n  const isMetamask = useIsMetaMask();\n\n  if (isMetamask) return null;\n  if (['/project/', '/account'].includes(location.pathname)) return null;\n\n  return (\n    <Container>\n      <ContentContainer>\n        <Text mw={160} color=\"white\" fw=\"700\" size={30}>\n          Follow Us\n        </Text>\n        <IconsContainer>\n          {linkConfigs.map(({ src, url }) => (\n            <Icon size={50} key={url} src={src} url={url} />\n          ))}\n        </IconsContainer>\n      </ContentContainer>\n      <Text ml={80} mt={5} color=\"white\" fw=\"400\" size={10}>\n        SubQuery  2021\n      </Text>\n    </Container>\n  );\n};\n\nexport default Header;\n","export default __webpack_public_path__ + \"static/media/subquery.8b4df4b6.svg\";","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport styled from 'styled-components';\n\nexport const Container = styled.div`\n  display: flex;\n  width: 100vw;\n  align-items: center;\n  justify-content: space-between;\n  min-height: 80px;\n  padding: 0px 40px;\n  border-bottom: 1px solid lightgray;\n`;\n\nexport const LeftContainer = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nexport const RightContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0px 20px;\n  min-width: 260px;\n  height: 55px;\n`;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useCallback, useState, VFC } from 'react';\nimport Tab from '@mui/material/Tab';\nimport Tabs from '@mui/material/Tabs';\n\nimport ServiceLogView from 'components/logView';\n\nenum TabbarItem {\n  ServiceLog,\n}\n\nconst NetworkTabbarView: VFC = () => {\n  const [value, setValue] = useState<TabbarItem>(TabbarItem.ServiceLog);\n\n  const handleChange = (_: any, newValue: TabbarItem) => {\n    setValue(newValue);\n  };\n\n  const renderContent = useCallback(() => {\n    switch (value) {\n      default:\n        return <ServiceLogView height={500} container=\"coordinator_service\" />;\n    }\n  }, [value]);\n\n  return (\n    <div style={{ marginTop: 30 }}>\n      <Tabs value={value} onChange={handleChange} textColor=\"primary\" indicatorColor=\"primary\">\n        <Tab value={TabbarItem.ServiceLog} label=\"Service Log\" />\n      </Tabs>\n      {renderContent()}\n    </div>\n  );\n};\n\nexport default NetworkTabbarView;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport styled from 'styled-components';\n\nexport const Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  min-height: 400px;\n  align-items: center;\n  justify-content: center;\n  background-color: #f6f9fc;\n`;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\n/* eslint-disable */\nimport { useEffect } from 'react';\nimport { Redirect } from 'react-router';\nimport { useIsIndexer } from 'hooks/indexerHook';\nimport { useWeb3 } from 'hooks/web3Hook';\nimport { useCoordinatorIndexer } from 'containers/coordinatorIndexer';\nimport { useLoading } from 'containers/loadingContext';\nimport { isUndefined } from 'lodash';\nimport { Container } from './styles';\n\nconst LoginPage = () => {\n  const { account } = useWeb3();\n  const isIndexer = useIsIndexer();\n  const { setPageLoading } = useLoading();\n  const { loading, load } = useCoordinatorIndexer();\n\n  useEffect(() => {\n    load();\n  }, [load]);\n\n  useEffect(() => {\n    setPageLoading(loading || isUndefined(isIndexer));\n  }, [loading, isIndexer]);\n\n  return (\n    <Container>\n      <div>\n        {account && !isIndexer && <Redirect to=\"/register\" />}\n        {account && isIndexer && <Redirect to=\"/account\" />}\n      </div>\n    </Container>\n  );\n};\n\nexport default LoginPage;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { FC } from 'react';\nimport styled from 'styled-components';\n\nimport { Text } from './primary';\n\nconst VersionItemContainer = styled.div<{ horizontal: boolean }>`\n  display: flex;\n  flex-direction: ${({ horizontal }) => (horizontal ? 'row' : 'column')};\n  justify-content: ${({ horizontal }) => (horizontal ? 'center' : 'flex-start')};\n  align-items: ${({ horizontal }) => (horizontal ? 'center' : 'flex-start')};\n`;\n\ntype VersionProps = {\n  versionType: string;\n  horizontal?: boolean;\n  value?: string | number;\n  prefix?: string;\n};\n\nexport const TagItem: FC<VersionProps> = ({\n  versionType,\n  horizontal = false,\n  value = '',\n  prefix = '',\n}) => {\n  const mainColor = horizontal ? 'gray' : 'black';\n  const subColor = prefix ? '#4388dd' : 'gray';\n  return (\n    <VersionItemContainer horizontal={horizontal}>\n      <Text color={mainColor} size={horizontal ? 13 : 15} fw=\"500\">\n        {versionType}\n      </Text>\n      {horizontal ? (\n        <Text ml={15} mr={15} color={subColor} fw=\"500\" size={15}>\n          {`${prefix}${value}`}\n        </Text>\n      ) : (\n        <Text mt={5} color={subColor} fw=\"500\" size={13}>\n          {`${prefix}${value}`}\n        </Text>\n      )}\n    </VersionItemContainer>\n  );\n};\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useEffect, useMemo, VFC } from 'react';\nimport { useLazyQuery } from '@apollo/client';\nimport { LogViewer } from '@patternfly/react-log-viewer';\nimport { Button, Spinner } from '@subql/react-ui';\nimport styled from 'styled-components';\n\nimport { GET_LOG } from 'utils/queries';\n\ntype Props = {\n  container: string;\n  height: number;\n};\n\nconst LogView: VFC<Props> = ({ container, height = 650 }) => {\n  const [getLog, { loading, data, error }] = useLazyQuery(GET_LOG, {\n    fetchPolicy: 'network-only',\n  });\n\n  useEffect(() => {\n    getLog({ variables: { container } });\n  }, []);\n\n  const log = useMemo(() => {\n    if (loading || error) return '';\n    return data?.getLog.log;\n  }, [data, loading]);\n\n  return (\n    <Container height={height}>\n      <StyledButton\n        size=\"small\"\n        type=\"secondary\"\n        label=\"Refresh\"\n        onClick={() => getLog({ variables: { container } })}\n      />\n      {!!log && (\n        <LogViewer hasLineNumbers height={height - 100} data={log} isTextWrapped theme=\"dark\" />\n      )}\n      {loading && <Spinner />}\n    </Container>\n  );\n};\n\nexport default LogView;\n\nconst Container = styled.div<{ height: number }>`\n  height: ${({ height }) => height}px;\n  padding: 30px;\n  margin-top: 10px;\n  background-color: var(--sq-gray900);\n  align-items: center;\n`;\n\nconst StyledButton = styled(Button)`\n  margin-bottom: 20px;\n  height: 30px;\n  width: 100px;\n  margin-right: 20px;\n`;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { FormikHelpers, FormikValues } from 'formik';\n\nimport { ControllerAction } from 'pages/controllers/types';\n\nexport enum Status {\n  FINALIZED,\n  OPEN,\n  CHALLENGE,\n}\n\nexport const statusColor = {\n  [Status.FINALIZED]: 'rgba(70, 219, 103, 0.4)',\n  [Status.OPEN]: 'rgba(67, 136, 221, 0.24)',\n  [Status.CHALLENGE]: 'rgba(214, 48, 48, 0.3)',\n};\n\nexport const statusText = {\n  [Status.FINALIZED]: 'FINALIZED',\n  [Status.OPEN]: 'OPEN',\n  [Status.CHALLENGE]: 'CHALLENGE',\n};\n\nexport type ChannelDetail = {\n  id: string;\n  status: Status;\n  deploymentId: string;\n  consumer: string;\n  total: string;\n  spent: string;\n  onchain: string;\n  price: string;\n  expirationAt: number;\n  challengeAt: number;\n};\n\nexport enum ChannelAction {\n  Checkpoint = 'Checkpoint',\n  Respond = 'Respond',\n  Finalize = 'Finalize',\n}\n\nexport type ChainType = 'cosmos' | 'avalanche' | 'substrate';\n\nexport enum DockerRegistry {\n  query = 'onfinality/subql-query',\n  substrateNode = 'onfinality/subql-node',\n  cosmos = 'onfinality/subql-node-cosmos',\n  avalanche = 'onfinality/subql-node-avalanche',\n}\n\nexport enum IndexingStatus {\n  NOTINDEXING,\n  INDEXING,\n  READY,\n}\n\nexport enum ProjectStatus {\n  NotIndexing = 'NOT INDEXING',\n  Started = 'STARTED',\n  Indexing = 'INDEXING',\n  Ready = 'READY',\n  Terminated = 'TERMINATED',\n}\n\nexport enum PaygStatus {\n  Open = 'OPEN',\n  Close = 'CLOSE',\n}\n\nexport type TransactionType =\n  | ProjectAction.AnnounceIndexing\n  | ProjectAction.AnnounceReady\n  | ProjectAction.AnnounceNotIndexing;\n\nexport enum AccountAction {\n  unregister = 'unregister',\n  updateMetaData = 'updateMetadata',\n}\n\nexport enum ProjectsAction {\n  addProject = 'addProject',\n}\n\nexport enum ProjectAction {\n  StartIndexing = 'StartIndexing',\n  AnnounceIndexing = 'AnnounceIndexing',\n  RestartProject = 'RestartProject',\n  AnnounceReady = 'AnnounceReady',\n  StopProject = 'StopProject',\n  AnnounceNotIndexing = 'AnnounceNotIndexing',\n  StopIndexing = 'StopIndexing',\n  RemoveProject = 'Remove Project',\n  PaygOpen = 'Open PAYG',\n  PaygChangePrice = 'Change Price',\n  PaygClose = 'Close PAYG',\n}\n\n// TODO: move these types to global types\nexport type ModalAction = AccountAction | ControllerAction | ProjectsAction | ProjectAction;\nexport type ClickAction = (type?: ModalAction) => void;\nexport type FormSubmit = (values: FormikValues, helper: FormikHelpers<FormikValues>) => void;\n\nexport type ProjectConfig = {\n  networkEndpoint: string;\n  networkDictionary: string;\n  nodeVersion: string;\n  queryVersion: string;\n  poiEnabled: boolean;\n  forceEnabled: boolean;\n  paygPrice: string;\n};\n\nexport type ProjectServiceMetadata = {\n  id: string;\n  status: IndexingStatus;\n} & ProjectConfig;\n\nexport type TQueryMetadata = {\n  lastProcessedHeight: number;\n  lastProcessedTimestamp: number;\n  targetHeight: number;\n  chain: string;\n  specName: string;\n  genesisHash: string;\n  indexerHealthy?: boolean;\n  indexerNodeVersion: string;\n  queryNodeVersion: string;\n  indexerStatus: string;\n  queryStatus: string;\n};\n\n// manifest types\nexport type Runner = {\n  node?: {\n    name: string;\n    version: string;\n  };\n  query?: {\n    name: string;\n    version: string;\n  };\n};\n\ntype DataSources = {\n  kind: string;\n};\n\nexport type PartialIpfsDeploymentManifest = {\n  dataSources: DataSources[];\n  schema: {\n    file: string;\n  };\n  network: {\n    chainId?: string;\n  };\n  specVersion: string;\n  runner?: Runner;\n};\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport styled from 'styled-components';\n\nexport const Contrainer = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  min-width: 1270px;\n  padding: 30px 50px;\n  overflow: auto;\n`;\n\nexport const LeftContainer = styled.div`\n  display: flex;\n  align-items: center;\n  min-width: 685px;\n  margin-bottom: 30px;\n`;\n\nexport const ContentContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  margin-left: 40px;\n`;\n\nexport const VersionContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  margin-top: 25px;\n  height: 50px;\n  width: 500px;\n`;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useEffect, useMemo } from 'react';\nimport { isUndefined } from 'lodash';\n\nimport Avatar from 'components/avatar';\nimport { Separator, Text } from 'components/primary';\nimport { TagItem } from 'components/tagItem';\nimport { useLoading } from 'containers/loadingContext';\nimport { useIndexerMetadata } from 'hooks/indexerHook';\nimport { useIndexerEra } from 'hooks/network';\nimport { useWeb3 } from 'hooks/web3Hook';\n\nimport NetworkTabbarView from './components/networkTabBarView';\nimport { ContentContainer, Contrainer, LeftContainer, VersionContainer } from './styles';\n\nconst NetworkPage = () => {\n  const { account } = useWeb3();\n  const { metadata } = useIndexerMetadata();\n  const { setPageLoading } = useLoading();\n  const indexerEra = useIndexerEra();\n\n  useEffect(() => {\n    setPageLoading(isUndefined(indexerEra));\n  }, [indexerEra]);\n\n  const eraItems = useMemo(\n    () => (\n      <VersionContainer>\n        <TagItem versionType=\"CURRENT ERA\" prefix=\"#\" value={indexerEra?.currentEra} />\n        <Separator height={50} />\n        <TagItem versionType=\"LAST CLAIM ERA\" prefix=\"#\" value={indexerEra?.lastClaimedEra} />\n        <Separator height={50} />\n        <TagItem versionType=\"LAST SETTLE ERA\" prefix=\"#\" value={indexerEra?.lastSettledEra} />\n      </VersionContainer>\n    ),\n    [indexerEra]\n  );\n\n  return (\n    <Contrainer>\n      <LeftContainer>\n        <Avatar address={account ?? ''} size={100} />\n        <ContentContainer>\n          <Text fw=\"600\" size={30}>\n            {metadata?.name}\n          </Text>\n          <Text fw=\"400\" size={15}>\n            {account}\n          </Text>\n          {eraItems}\n        </ContentContainer>\n      </LeftContainer>\n      <NetworkTabbarView />\n    </Contrainer>\n  );\n};\n\nexport default NetworkPage;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { FC } from 'react';\nimport styled from 'styled-components';\n\nconst Container = styled.div<{ color?: string }>`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: ${(p) => p.color ?? 'lightgreen'};\n  border-radius: 5px;\n  padding: 5px 10px;\n  min-width: 80px;\n`;\n\nconst Text = styled.div`\n  font-size: 13px;\n  color: black;\n`;\n\ntype Props = {\n  text: string;\n  color?: string;\n};\n\nconst StatusLabel: FC<Props> = ({ text, color }) => (\n  <Container color={color}>\n    <Text color={color}>{text}</Text>\n  </Container>\n);\n\nexport default StatusLabel;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { ProgressBar } from '@subql/react-ui';\nimport styled from 'styled-components';\n\nexport const Container = styled.div`\n  display: flex;\n  flex: 1;\n  justify-content: center;\n`;\n\nexport const ContentContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  min-width: 600px;\n  padding: 10px 100px;\n  padding-bottom: 150px;\n  overflow-y: scroll;\n`;\n\nexport const HeaderContainer = styled.div`\n  display: flex;\n  width: 100%;\n  min-width: 600px;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nexport const HeaderItem = styled.div<{\n  flex?: number;\n  pl?: number;\n  mw?: number;\n}>`\n  display: flex;\n  flex: ${({ flex }) => flex ?? 1};\n  padding-left: ${({ pl }) => pl ?? 0}px;\n  min-width: ${({ mw }) => mw ?? 100}px;\n  margin-right: 15px;\n  align-items: center;\n`;\n\nexport const ItemContainer = styled.div<{\n  flex?: number;\n  pl?: number;\n  mw?: number;\n  color?: string;\n}>`\n  display: flex;\n  flex: ${({ flex }) => flex ?? 1};\n  background-color: ${({ color }) => color ?? 'white'};\n  padding-left: ${({ pl }) => pl ?? 0}px;\n  min-width: ${({ mw }) => mw ?? 100}px;\n  margin-right: 15px;\n  align-items: center;\n`;\n\nexport const Progress = styled(ProgressBar)`\n  max-width: 60%;\n  min-width: 300;\n`;\n\nexport const ProfileContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 80%;\n  margin-left: 20px;\n`;\n\nexport const ChannelItemContainer = styled.div`\n  display: flex;\n  width: 100%;\n  min-width: 600px;\n  min-height: 90px;\n  margin: 10px 0px;\n  padding: 10px 10px;\n  background-color: white;\n  :hover {\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n    cursor: pointer;\n  }\n`;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useEffect, useState } from 'react';\nimport { useLazyQuery, useMutation } from '@apollo/client';\nimport { isUndefined } from 'lodash';\n\nimport ModalView from 'components/modalView';\nimport { Text } from 'components/primary';\nimport StatusLabel from 'components/statusLabel';\nimport { useLoading } from 'containers/loadingContext';\nimport { useIsIndexer } from 'hooks/indexerHook';\nimport { CHANNEL_CHECKPOINT, CHANNEL_CLOSE, GET_CHANNELS } from 'utils/queries';\n\nimport {\n  ChannelItemContainer,\n  Container,\n  ContentContainer,\n  HeaderContainer,\n  HeaderItem,\n  ItemContainer,\n} from './styles';\nimport { ChannelAction, ChannelDetail, Status, statusColor, statusText } from './types';\n\nconst Payg = () => {\n  const isIndexer = useIsIndexer();\n  const { setPageLoading } = useLoading();\n  const [getChannelList, { data }] = useLazyQuery(GET_CHANNELS, { fetchPolicy: 'network-only' });\n  const [checkpointRequest, { loading: checkpointLoading }] = useMutation(CHANNEL_CHECKPOINT);\n  const [closeRequest, { loading: closeLoading }] = useMutation(CHANNEL_CLOSE);\n  const [visible, setVisible] = useState(false);\n  const [channelDetail, setChannelDetail] = useState<ChannelDetail>({\n    id: '',\n    status: Status.FINALIZED,\n    deploymentId: '',\n    consumer: '',\n    total: '',\n    spent: '',\n    onchain: '',\n    price: '',\n    expirationAt: 0,\n    challengeAt: 0,\n  });\n\n  const onModalClose = () => {\n    setVisible(false);\n  };\n\n  useEffect(() => {\n    setPageLoading(isUndefined(data));\n  }, [data]);\n\n  useEffect(() => {\n    setPageLoading(true);\n    getChannelList();\n  }, []);\n\n  const channelShow = (newChannel: ChannelDetail) => {\n    setChannelDetail(newChannel);\n    setVisible(true);\n  };\n\n  const betterShow = (s: string) => {\n    return ''.concat(s.substring(0, 8), '...', s.substring(s.length - 6, s.length));\n  };\n\n  const steps = {\n    [ChannelAction.Checkpoint]: [\n      {\n        index: 0,\n        title: channelDetail.id,\n        desc: channelDetail.deploymentId,\n        buttonTitle: 'Checkpoint',\n        onClick: async () => {\n          await checkpointRequest({ variables: { id: channelDetail.id } });\n          setVisible(false);\n        },\n      },\n    ],\n  };\n\n  const renderChannels = () => {\n    if (isUndefined(data)) return null;\n    return (\n      <ContentContainer>\n        <HeaderContainer>\n          <Text size={45}>State Channels</Text>\n        </HeaderContainer>\n        <HeaderContainer>\n          <HeaderItem pl={15} flex={4}>\n            <Text>ID</Text>\n          </HeaderItem>\n          <HeaderItem flex={6}>\n            <Text>Deployment</Text>\n          </HeaderItem>\n          <HeaderItem flex={2}>\n            <Text>Total</Text>\n          </HeaderItem>\n          <HeaderItem flex={2}>\n            <Text>Spent</Text>\n          </HeaderItem>\n          <HeaderItem flex={2}>\n            <Text>Price</Text>\n          </HeaderItem>\n          <HeaderItem flex={2}>\n            <Text>Status</Text>\n          </HeaderItem>\n        </HeaderContainer>\n        {data?.channels.map((props: ChannelDetail) => (\n          <ChannelItemContainer onClick={() => channelShow(props)}>\n            <ItemContainer pl={15} flex={4}>\n              <Text fw=\"600\" size={18}>\n                {betterShow(props.id)}\n              </Text>\n            </ItemContainer>\n            <ItemContainer flex={6}>\n              <Text>{betterShow(props.deploymentId)}</Text>\n            </ItemContainer>\n            <ItemContainer flex={2}>\n              <Text>{props.total}</Text>\n            </ItemContainer>\n            <ItemContainer flex={2}>\n              <Text>{props.spent}</Text>\n            </ItemContainer>\n            <ItemContainer flex={2}>\n              <Text>{props.price}</Text>\n            </ItemContainer>\n            <ItemContainer flex={2}>\n              <StatusLabel text={statusText[props.status]} color={statusColor[props.status]} />\n            </ItemContainer>\n          </ChannelItemContainer>\n        ))}\n      </ContentContainer>\n    );\n  };\n\n  return (\n    <Container>\n      {isIndexer && renderChannels()}\n      <ModalView\n        visible={visible}\n        title=\"Channel Detail\"\n        onClose={onModalClose}\n        steps={steps.Checkpoint}\n      />\n    </Container>\n  );\n};\n\nexport default Payg;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useState, VFC } from 'react';\nimport Modal from 'react-modal';\nimport styled from 'styled-components';\n\nimport { Button, Text } from './primary';\n\ntype Props = {\n  visible: boolean;\n  title?: string;\n  description?: string;\n};\n\nconst AlertView: VFC<Props> = ({ visible = false, title, description }) => {\n  const [isOpen, setIsOpen] = useState(visible);\n  return (\n    <Modal isOpen={isOpen} style={modalStyles} closeTimeoutMS={200} ariaHideApp={false}>\n      <Container>\n        <ContentContainer>\n          <Text fw=\"bold\" size={35}>\n            {title}\n          </Text>\n          <Text alignCenter fw=\"400\" mt={30} size={18}>\n            {description}\n          </Text>\n        </ContentContainer>\n        <Button mt={100} width={300} title=\"Confirm\" onClick={() => setIsOpen(false)} />\n      </Container>\n    </Modal>\n  );\n};\n\nexport default AlertView;\n\nconst modalStyles = {\n  content: {\n    backgroundColor: 'white',\n    borderRadius: 15,\n    top: '50%',\n    left: '50%',\n    right: 'auto',\n    bottom: 'auto',\n    marginRight: '-50%',\n    transform: 'translate(-50%, -50%)',\n    maxWidth: 900,\n    minWidth: 700,\n    padding: 0,\n  },\n  overlay: {\n    zIndex: 50,\n    backgroundColor: 'rgba(0, 0, 0, 0.65)',\n  },\n};\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 50px 30px;\n`;\n\nconst ContentContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useCallback, useEffect, useState } from 'react';\nimport { useLazyQuery } from '@apollo/client';\nimport yaml from 'js-yaml';\nimport { isEmpty, isUndefined } from 'lodash';\n\nimport { useContractSDK } from 'containers/contractSdk';\nimport { useLoading } from 'containers/loadingContext';\nimport { useNotification } from 'containers/notificationContext';\nimport { useWeb3 } from 'hooks/web3Hook';\nimport {\n  ChainType,\n  DockerRegistry,\n  IndexingStatus,\n  PartialIpfsDeploymentManifest,\n  ProjectServiceMetadata,\n  TQueryMetadata,\n} from 'pages/project-details/types';\nimport { coordinatorServiceUrl, createApolloClient } from 'utils/apolloClient';\nimport { cat, cidToBytes32, IPFS_PROJECT_CLIENT } from 'utils/ipfs';\nimport {\n  GET_INDEXER_PROJECTS,\n  GET_PROJECT,\n  GET_PROJECT_DETAILS,\n  GET_QUERY_METADATA,\n  GET_REGISTRY_VERSIONS,\n} from 'utils/queries';\n\n// TODO: review whether need default value or other ways to provide default value\n// TODO: refactor get project details\nconst metadataInitValue = {\n  lastProcessedHeight: 0,\n  lastProcessedTimestamp: 0,\n  targetHeight: 0,\n  chain: '',\n  specName: '',\n  genesisHash: '',\n  indexerHealthy: undefined,\n  indexerNodeVersion: '',\n  queryNodeVersion: '',\n  indexerStatus: 'TERMINATED',\n  queryStatus: 'TERMINATED',\n};\n\nconst projectServiceMetadtaValue: ProjectServiceMetadata = {\n  id: '',\n  networkEndpoint: '',\n  networkDictionary: '',\n  nodeVersion: '',\n  queryVersion: '',\n  poiEnabled: false,\n  forceEnabled: false,\n  status: 0,\n  paygPrice: '',\n  paygExpiration: 3600,\n  paygThreshold: 1000,\n  paygOverflow: 5,\n};\n\nconst projectInitValue = {\n  name: '',\n  owner: '',\n  image: '',\n  description: '',\n  websiteUrl: '',\n  codeUrl: '',\n  version: '',\n  currentDeployment: '',\n  currentVersion: '',\n  versionDescription: '',\n  createdTimestamp: '',\n  updatedTimestamp: '',\n  metadata: undefined,\n  ...projectServiceMetadtaValue,\n};\n\nexport const useProjectService = (deploymentId: string) => {\n  const { notification } = useNotification();\n  const [projectService, setService] = useState<ProjectServiceMetadata>();\n  const [getProject, { data }] = useLazyQuery(GET_PROJECT, { fetchPolicy: 'network-only' });\n\n  const getProjectService = () => getProject({ variables: { id: deploymentId } });\n\n  useEffect(() => {\n    data ? setService(data.project) : getProjectService();\n  }, [deploymentId, data, notification?.type]);\n\n  return { projectService, getProjectService };\n};\n\nexport const useIndexingStatus = (deploymentId: string): IndexingStatus | undefined => {\n  const [status, setStatus] = useState<IndexingStatus>();\n  const { account } = useWeb3();\n  const notificationContext = useNotification();\n  const sdk = useContractSDK();\n\n  useEffect(() => {\n    if (sdk && account && deploymentId) {\n      sdk.queryRegistry\n        .deploymentStatusByIndexer(cidToBytes32(deploymentId), account)\n        .then(({ status }) => {\n          setStatus(status);\n        })\n        .catch((error) => console.error(error));\n    }\n  }, [sdk, account, deploymentId, notificationContext.notification?.type]);\n\n  return status;\n};\n\nexport type ProjectDetails = {\n  name: string;\n  owner: string;\n  image: string;\n  description: string;\n  websiteUrl: string;\n  codeUrl: string;\n  version: string;\n  currentDeployment: string;\n  currentVersion: string;\n  versionDescription: string;\n  createdTimestamp: string;\n  updatedTimestamp: string;\n  metadata: TQueryMetadata | undefined;\n} & ProjectServiceMetadata;\n\ntype Result = {\n  id: string;\n  projectId: string;\n  project: {\n    currentDeployment: string;\n    currentVersion: string;\n    versionDescription: string;\n    createdTimestamp: string;\n    updatedTimestamp: string;\n    metadata: string;\n  };\n};\n\ntype IndexerProject = {\n  indexerId: string;\n  deploymentId: string;\n  status: string;\n};\n\nconst queryRegistryClient = createApolloClient(window.env.REGISTRY_PROJECT);\nconst coordinatorClient = createApolloClient(coordinatorServiceUrl);\n\nexport const getQueryMetadata = async (id: string): Promise<TQueryMetadata> => {\n  try {\n    const result = await coordinatorClient.query<{ queryMetadata: TQueryMetadata }>({\n      query: GET_QUERY_METADATA,\n      variables: { id },\n      fetchPolicy: 'network-only',\n    });\n    return result.data.queryMetadata;\n  } catch {\n    return metadataInitValue;\n  }\n};\n\nexport const getProjectDetails = async (deploymentId: string): Promise<ProjectDetails> => {\n  const res = await queryRegistryClient.query<{ deployments: { nodes: Result[] } }>({\n    query: GET_PROJECT_DETAILS,\n    variables: { deploymentId },\n  });\n\n  const projectInfo = res.data.deployments.nodes[0]?.project;\n  if (!projectInfo) {\n    console.error('Unable to get metadata for project');\n    return projectInitValue;\n  }\n\n  const projectMetadata = await cat(projectInfo.metadata);\n  const queryMetadata = await getQueryMetadata(deploymentId);\n  const projectDetails = {\n    ...projectInfo,\n    ...projectMetadata,\n    metadata: queryMetadata,\n    id: deploymentId,\n  };\n\n  return projectDetails;\n};\n\nexport const getIndexingProjects = async (indexer: string): Promise<ProjectServiceMetadata[]> => {\n  const res = await queryRegistryClient.query<{ deploymentIndexers: { nodes: IndexerProject[] } }>({\n    query: GET_INDEXER_PROJECTS,\n    variables: { indexer },\n  });\n\n  const projects = res.data.deploymentIndexers.nodes;\n  return projects\n    .filter((p) => p.status !== 'TERMINATED')\n    .map((p) => ({ ...projectServiceMetadtaValue, id: p.deploymentId }));\n};\n\nexport const useProjectDetails = (deploymentId: string): ProjectDetails | undefined => {\n  const [project, setProject] = useState<ProjectDetails | undefined>();\n  const { notification } = useNotification();\n\n  const fetchMeta = useCallback(async () => {\n    try {\n      const projectDetails = await getProjectDetails(deploymentId);\n      setProject(projectDetails);\n    } catch (error) {\n      setProject(undefined);\n      console.error('Unable to get project details', error);\n    }\n  }, [deploymentId]);\n\n  useEffect(() => {\n    fetchMeta();\n  }, [fetchMeta, notification?.type]);\n\n  return project;\n};\n\nexport const useDeploymentStatus = (deploymentId: string) => {\n  const [status, setStatus] = useState<IndexingStatus | undefined>();\n  const { account } = useWeb3();\n  const sdk = useContractSDK();\n\n  const getDeploymentStatus = useCallback(async () => {\n    if (!sdk || !account || !deploymentId) return;\n    const { status } = await sdk.queryRegistry.deploymentStatusByIndexer(\n      cidToBytes32(deploymentId),\n      account\n    );\n\n    setStatus(status);\n  }, [sdk, account, deploymentId]);\n\n  useEffect(() => {\n    getDeploymentStatus();\n  }, [getDeploymentStatus]);\n\n  return status;\n};\n\nfunction combineProjects(\n  localProjects: ProjectServiceMetadata[],\n  indexingProjects: ProjectServiceMetadata[]\n): ProjectServiceMetadata[] {\n  if (isEmpty(localProjects)) return indexingProjects;\n  const removedProjects = indexingProjects.filter(\n    (p) => !localProjects.find((lp) => lp.id === p.id)\n  );\n\n  return [...localProjects, ...removedProjects];\n}\n\n// TODO: need to refactor\nexport function useProjectDetailList(data: any) {\n  const [projectDetailList, setProjecList] = useState<ProjectDetails[]>();\n  const localProjects = data?.getProjects as ProjectServiceMetadata[];\n\n  const { setPageLoading } = useLoading();\n  const { account } = useWeb3();\n\n  const getProjectDetailList = useCallback(async () => {\n    if (!account) return;\n\n    const indexingProjects = await getIndexingProjects(account);\n    const projects = combineProjects(localProjects, indexingProjects);\n\n    if (isUndefined(projects)) return;\n    if (isEmpty(projects)) {\n      setPageLoading(false);\n      setProjecList([]);\n      return;\n    }\n\n    try {\n      const result = await Promise.all(\n        projects.map(({ id }) => Promise.all([getProjectDetails(id), getQueryMetadata(id)]))\n      );\n      setProjecList(\n        result.map(([detail, metadata]) => ({ ...detail, metadata })).filter(({ id }) => !!id)\n      );\n    } catch (e) {\n      console.error('Get project details failed:', e);\n      setPageLoading(false);\n    }\n  }, [localProjects, account]);\n\n  useEffect(() => {\n    setPageLoading(true);\n    getProjectDetailList();\n  }, [getProjectDetailList, data]);\n\n  return { projectDetailList, getProjectDetailList };\n}\n\nexport const getManifest = async (cid: string) => {\n  const projectYaml = await cat(cid, IPFS_PROJECT_CLIENT);\n  const resultManifest = yaml.load(projectYaml) as PartialIpfsDeploymentManifest;\n  return resultManifest;\n};\n\n// TODO: migrate to docker registry module\nfunction dockerRegistryFromChain(chainType: ChainType): DockerRegistry {\n  switch (chainType) {\n    case 'cosmos':\n      return DockerRegistry.cosmos;\n    case 'avalanche':\n      return DockerRegistry.avalanche;\n    default:\n      return DockerRegistry.substrateNode;\n  }\n}\n\nconst defaultRange = {\n  substrate: '>=1.1.1',\n  cosmos: '>=0.1.0',\n  avalanche: '>=0.1.1',\n};\n\nexport const useNodeVersions = (cid: string) => {\n  const [getNodeVersions, { data }] = useLazyQuery(GET_REGISTRY_VERSIONS);\n\n  const fetchNodeVersions = useCallback(async () => {\n    const manifest = await getManifest(cid);\n    const { dataSources, runner } = manifest;\n    const runtime = dataSources[0].kind;\n    const chainType = runtime.split('/')[0] as ChainType;\n\n    const registry = dockerRegistryFromChain(chainType);\n    const range = runner?.node?.version ?? defaultRange[chainType];\n    getNodeVersions({ variables: { range, registry } });\n  }, [cid]);\n\n  useEffect(() => {\n    fetchNodeVersions();\n  }, [fetchNodeVersions]);\n\n  const registryVersions = data?.getRegistryVersions;\n  console.log('registryVersions:', registryVersions);\n\n  // FIXME: special filter for subql-node [v1.2.1]\n  const versions = registryVersions?.filter((v: string) => v !== 'v1.2.1');\n  return !isEmpty(versions) ? versions : [];\n};\n\nexport const useQueryVersions = (cid: string) => {\n  const [getQueryVersions, { data }] = useLazyQuery(GET_REGISTRY_VERSIONS);\n\n  const fetchQueryVersions = useCallback(async () => {\n    const manifest = await getManifest(cid);\n    const range = manifest.runner?.query?.version ?? '>=0.15.0';\n    getQueryVersions({ variables: { range, registry: DockerRegistry.query } });\n  }, [cid]);\n\n  useEffect(() => {\n    fetchQueryVersions();\n  }, [fetchQueryVersions]);\n\n  const versions = data?.getRegistryVersions;\n  return !isEmpty(versions) ? versions : [];\n};\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\n/* eslint-disable */\nimport axios, { AxiosError } from 'axios';\nimport { isValidPrivate, bufferToHex, privateToAddress as privateToAddressBuffer, toBuffer } from 'ethereumjs-util';\nimport { isUndefined } from 'lodash';\n\nexport function isMetaMaskRejectError(e: Error): boolean {\n  return e.message.includes('metamask');\n}\n\n// fields validation\nexport function validatePrivateKey(privateKey: string): string {\n  try {\n    if (!privateKey.startsWith('0x')) {\n      return 'Private key must start with 0x';\n    }\n    if (!isValidPrivate(toBuffer(privateKey))) {\n      return 'Invalid private key';\n    }\n  } catch (_) {\n    return 'Invalid private key';\n  }\n  return '';\n}\n\nexport function isFalse(value: boolean | string | undefined) {\n  return !isUndefined(value) && !value;\n}\n\nexport function privateToAddress(key: string) {\n  if (validatePrivateKey(key)) return '';\n  return bufferToHex(privateToAddressBuffer(toBuffer(key)));\n}\n\nexport function validateController(key: string, isExist?: boolean, account?: string, indexerController?: string,) {\n  const error = validatePrivateKey(key);\n  if (error) {\n    return error;\n  }\n\n  const controllerAddress = privateToAddress(key);\n  if (controllerAddress === account?.toLowerCase()) {\n    return 'Can not use indexer account as controller account';\n  }\n\n  if (isExist && indexerController?.toLowerCase() !== controllerAddress) {\n    return 'Controller already been used';\n  }\n\n  return '';\n}\n\nexport async function verifyProxyEndpoint(url: string) {\n  try {\n    const { host, protocol } = new URL(url);\n    const cid = 'QmTQTnBTcvv3Eb3M6neDiwuubWVDAoqyAgKmXtTtJKAHoH';\n    const requestUrl = `${protocol}//${host}/metadata/${cid}`;\n\n    const result = await axios.get(requestUrl);\n    return !!result;\n  } catch (error) {\n    const e = error as AxiosError;\n    return e.response?.status === 400;\n  }\n}\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useEffect } from 'react';\nimport { useHistory } from 'react-router';\nimport { isUndefined } from 'lodash';\n\nimport { useLoading } from 'containers/loadingContext';\nimport { isFalse } from 'utils/validateService';\n\nimport { useController, useIsIndexer } from './indexerHook';\n\nexport const useRouter = (refresh = true) => {\n  const isIndexer = useIsIndexer();\n  const { controller } = useController();\n  const history = useHistory();\n  const { pageLoading, setPageLoading } = useLoading();\n\n  useEffect(() => {\n    setPageLoading(isUndefined(isIndexer) || isUndefined(controller));\n    if (pageLoading || !refresh) return;\n\n    if (isFalse(isIndexer)) {\n      history.replace('/');\n    } else if (isFalse(controller)) {\n      history.replace('/account');\n    }\n  }, [isIndexer, controller]);\n};\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { IndexingStatus } from 'pages/project-details/types';\n\nexport enum ServiceStatus {\n  healthy = 'HEALTHY',\n  unhealthy = 'UNHEALTHY',\n  terminated = 'TERMINATED',\n}\n\nexport function calculateProgress(targetHeight: number, latestHeight: number): number {\n  if (targetHeight === 0) return 0;\n  if (latestHeight >= targetHeight) return 100;\n  return Math.round((latestHeight * 100 * 100) / targetHeight) / 100;\n}\n\nexport function statusCode(status: string): 'success' | 'error' {\n  if (status === 'HEALTHY' || status === 'STARTING') return 'success';\n  return 'error';\n}\n\nexport function indexingStatusCode(status: IndexingStatus) {\n  switch (status) {\n    case IndexingStatus.NOTINDEXING:\n      return 'error';\n    case IndexingStatus.INDEXING:\n      return 'info';\n    case IndexingStatus.READY:\n      return 'success';\n    default:\n      return 'error';\n  }\n}\n\nexport function projectId(cid: string): string {\n  return cid.substring(0, 15).toLowerCase();\n}\n\nexport function isTrue(value: boolean | string): boolean {\n  return value === true || value === 'true';\n}\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { FC } from 'react';\nimport styled from 'styled-components';\n\nimport Avatar from 'components/avatar';\nimport { Separator, Text } from 'components/primary';\nimport { TagItem } from 'components/tagItem';\nimport { ProjectDetails } from 'hooks/projectHook';\nimport { cidToBytes32 } from 'utils/ipfs';\n\nimport { ProjectStatus } from '../types';\n\ntype Props = {\n  id: string;\n  project: ProjectDetails;\n  projectStatus: ProjectStatus;\n};\n\nconst ProjectDetailsHeader: FC<Props> = ({ id, projectStatus, project }) => {\n  return (\n    <Container>\n      <LeftContainer>\n        <Avatar address={cidToBytes32(id)} size={100} />\n        <ContentContainer>\n          <Text fw=\"600\" size={30}>\n            {project.name}\n          </Text>\n          <Text fw=\"400\" size={15}>\n            {project.owner}\n          </Text>\n          <VersionContainer>\n            <TagItem versionType=\"INDEXED NETWORK\" value={project.metadata?.chain} />\n            <Separator height={30} />\n            <TagItem versionType=\"VERSION\" value={`V${project.version ?? '1.0.0'}`} />\n            <Separator height={30} />\n            <TagItem versionType=\"PROJECT STATUS\" value={projectStatus} />\n          </VersionContainer>\n        </ContentContainer>\n      </LeftContainer>\n    </Container>\n  );\n};\n\nexport default ProjectDetailsHeader;\n\nconst Container = styled.div`\n  display: flex;\n  justify-content: space-between;\n  min-height: 200px;\n  padding-right: 32px;\n`;\n\nconst LeftContainer = styled.div`\n  display: flex;\n  flex: 1;\n  align-items: center;\n  min-width: 685px;\n`;\n\nconst ContentContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  margin-left: 40px;\n`;\n\nconst VersionContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 25px;\n  height: 50px;\n  width: 450px;\n`;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useCallback, useState, VFC } from 'react';\nimport Tab from '@mui/material/Tab';\nimport Tabs from '@mui/material/Tabs';\n\nimport { ProjectDetails } from 'hooks/projectHook';\nimport { projectId } from 'utils/project';\n\nimport ProjectLogView from '../../../components/logView';\nimport ProjectDetailsView from './projectDetailsView';\n\nenum TabbarItem {\n  ProjectDetails,\n  NodeLog,\n}\n\ntype Props = {\n  id: string;\n  project: ProjectDetails;\n};\n\nconst ProjectTabbarView: VFC<Props> = ({ id, project }) => {\n  const [value, setValue] = useState<TabbarItem>(TabbarItem.ProjectDetails);\n\n  const handleChange = (_: any, newValue: TabbarItem) => {\n    setValue(newValue);\n  };\n\n  const renderContent = useCallback(() => {\n    switch (value) {\n      case TabbarItem.NodeLog:\n        return <ProjectLogView container={`node_${projectId(id)}`} height={650} />;\n      default:\n        return <ProjectDetailsView id={id} project={project} />;\n    }\n  }, [value]);\n\n  return (\n    <div style={{ marginTop: 30 }}>\n      <Tabs value={value} onChange={handleChange} textColor=\"primary\" indicatorColor=\"primary\">\n        <Tab value={TabbarItem.ProjectDetails} label=\"Project Details\" />\n        <Tab value={TabbarItem.NodeLog} label=\"Service Log\" />\n      </Tabs>\n      {renderContent()}\n    </div>\n  );\n};\n\nexport default ProjectTabbarView;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport styled from 'styled-components';\n\nexport const Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  min-width: 1270px;\n  padding: 0px 50px;\n  padding-bottom: 50px;\n  overflow: auto;\n`;\n\nexport const ContentContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  -ms-overflow-style: none; /* for Internet Explorer, Edge */\n  scrollbar-width: none; /* for Firefox */\n  overflow-y: scroll;\n  ::-webkit-scrollbar {\n    display: none; /* for Chrome, Safari, and Opera */\n  }\n`;\n\nexport const CardContainer = styled.div`\n  display: flex;\n  background-color: white;\n  justify-content: space-between;\n  min-width: 1355px;\n  border-radius: 8px;\n  margin-top: 20px;\n  padding: 32px;\n`;\n\nexport const ActionContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n`;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { FC } from 'react';\nimport { Tag } from '@subql/react-ui';\nimport styled from 'styled-components';\n\nimport { Button, Text } from 'components/primary';\n\nimport { ButtonItem } from '../config';\nimport { ActionContainer, CardContainer } from '../styles';\nimport { PaygStatus } from '../types';\n\nconst ContentContainer = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  margin-right: 50px;\n`;\n\nconst ServiceContaineer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  min-width: 200px;\n  margin-right: 30px;\n`;\n\nconst HeaderContainer = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\ntype Props = {\n  actionItems: ButtonItem[];\n  status?: PaygStatus;\n  price?: string;\n  expiration?: number;\n  threshold?: number;\n  overflow?: number;\n};\n\nconst ProjectPaygView: FC<Props> = ({\n  actionItems,\n  status,\n  price,\n  expiration,\n  threshold,\n  overflow,\n}) => (\n  <CardContainer>\n    <ContentContainer>\n      <ServiceContaineer>\n        <HeaderContainer>\n          <Text mr={20} fw=\"500\">\n            PAYG price: {price}SQT\n          </Text>\n          {status === PaygStatus.Open ? (\n            <Tag text=\"Open\" state=\"success\" />\n          ) : (\n            <Tag text=\"Close\" state=\"error\" />\n          )}\n        </HeaderContainer>\n        {status === PaygStatus.Open ? (\n          <Text size={15} color=\"gray\" mt={10}>\n            Minimum expiration time: {expiration} seconds\n          </Text>\n        ) : (\n          <Text size={15} color=\"gray\" mt={10}>\n            {' '}\n          </Text>\n        )}\n        {status === PaygStatus.Open ? (\n          <Text size={15} color=\"gray\" mt={10}>\n            Automatic checkpoint to chain: {threshold} times\n          </Text>\n        ) : (\n          <Text size={15} color=\"gray\" mt={10}>\n            {' '}\n          </Text>\n        )}\n        {status === PaygStatus.Open ? (\n          <Text size={15} color=\"gray\">\n            Maximum allowed conflict: {overflow} times\n          </Text>\n        ) : (\n          <Text size={15} color=\"gray\">\n            {' '}\n          </Text>\n        )}\n      </ServiceContaineer>\n    </ContentContainer>\n    <ActionContainer>\n      {actionItems.map(({ title, action }) => (\n        <Button mt={10} key={title} width={265} title={title} onClick={action} />\n      ))}\n    </ActionContainer>\n  </CardContainer>\n);\n\nexport default ProjectPaygView;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { FC } from 'react';\nimport { Tag } from '@subql/react-ui';\nimport styled from 'styled-components';\n\nimport { Button, Text } from 'components/primary';\nimport { proxyServiceUrl } from 'utils/apolloClient';\nimport { statusCode } from 'utils/project';\n\nimport { ButtonItem } from '../config';\nimport { ActionContainer, CardContainer } from '../styles';\nimport { TQueryMetadata } from '../types';\n\nconst ContentContainer = styled.div`\n  display: flex;\n  background-color: white;\n  border-radius: 8px;\n`;\n\nconst ServiceContaineer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  min-width: 200px;\n  margin-right: 30px;\n`;\n\nconst HeaderContainer = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\ntype CardProps = {\n  title: string;\n  subTitle: string;\n  status?: string;\n};\n\nconst ServiceView: FC<CardProps> = ({ title, subTitle, status }) => (\n  <ServiceContaineer>\n    <HeaderContainer>\n      <Text mr={20} fw=\"500\">\n        {title}\n      </Text>\n      {!!status && <Tag text={status} state={statusCode(status)} />}\n    </HeaderContainer>\n    <Text size={15} color=\"gray\" mt={10}>\n      {subTitle}\n    </Text>\n  </ServiceContaineer>\n);\n\ntype Props = {\n  id: string;\n  actionItems: ButtonItem[];\n  data?: TQueryMetadata;\n};\n\nconst ProjectServiceCard: FC<Props> = ({ id, actionItems, data }) => {\n  if (!data) return null;\n\n  const imageVersion = (type: string, version: string) => `onfinality/subql-${type}:${version}`;\n\n  return (\n    <CardContainer>\n      <ContentContainer>\n        <ServiceView\n          title=\"Indexer Service\"\n          subTitle={`Image Version: ${imageVersion('indexer', data.indexerNodeVersion)}`}\n          status={data.indexerStatus}\n        />\n        <ServiceView\n          title=\"Query Service\"\n          subTitle={`Image Version: ${imageVersion('query', data.queryNodeVersion)}`}\n          status={data.queryStatus}\n        />\n        <ServiceView\n          title=\"Proxy Service\"\n          subTitle={`Url: ${proxyServiceUrl}/query/${id}`}\n          status={data.queryStatus}\n        />\n      </ContentContainer>\n      <ActionContainer>\n        {actionItems.map(({ title, action }) => (\n          <Button mt={10} key={title} width={265} title={title} onClick={action} />\n        ))}\n      </ActionContainer>\n    </CardContainer>\n  );\n};\n\nexport default ProjectServiceCard;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { FormSubmit, IndexingStatus, ProjectsAction } from 'pages/project-details/types';\nimport { initialProjectValues, ProjectFormKey, ProjectFormSchema } from 'types/schemas';\n\nexport const statusColor = {\n  [IndexingStatus.NOTINDEXING]: 'rgba(214, 48, 48, 0.3)',\n  [IndexingStatus.INDEXING]: 'rgba(67, 136, 221, 0.24)',\n  [IndexingStatus.READY]: 'rgba(70, 219, 103, 0.4)',\n};\n\nexport const statusText = {\n  [IndexingStatus.NOTINDEXING]: 'NOT INDEXING',\n  [IndexingStatus.INDEXING]: 'INDEXING',\n  [IndexingStatus.READY]: 'READY',\n};\n\n// TODO: remove the old logic\nexport const createAddProjectSteps = (onAddProject: FormSubmit) => ({\n  [ProjectsAction.addProject]: [\n    {\n      index: 0,\n      title: 'Add new project',\n      desc: 'Input the deployment id, and add the project into you service. Your can manage the project in the projects page and start indexing the project at any time you want.',\n      buttonTitle: 'Add project',\n      form: {\n        formValues: initialProjectValues,\n        schema: ProjectFormSchema,\n        onFormSubmit: onAddProject,\n        items: [\n          {\n            formKey: ProjectFormKey.deploymentId,\n            title: 'Add new project',\n            placeholder: 'QmYDpk94SCgxv4j2PyLkaD8fWJpHwJufMLX2HGjefsNHH4',\n          },\n        ],\n      },\n    },\n  ],\n});\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { FC } from 'react';\nimport { ProgressBar, Spinner, Tag } from '@subql/react-ui';\nimport { isUndefined } from 'lodash';\nimport styled from 'styled-components';\n\nimport { Button, Text } from 'components/primary';\nimport { TagItem } from 'components/tagItem';\nimport { statusText } from 'pages/projects/constant';\nimport { indexingStatusCode } from 'utils/project';\n\nimport { ButtonItem } from '../config';\nimport { ActionContainer, CardContainer } from '../styles';\nimport { IndexingStatus, TQueryMetadata } from '../types';\n\nconst ContentContainer = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  margin-right: 50px;\n`;\n\nconst TagsContainer = styled.div<{ mb?: number }>`\n  display: flex;\n  min-width: 230px;\n  margin: 15px 0px;\n`;\n\nconst LabelContainer = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 15px;\n`;\n\ntype Props = {\n  percent: number;\n  actionItems: ButtonItem[];\n  status?: IndexingStatus;\n  metadata?: TQueryMetadata;\n};\n\nconst ProjectStatusView: FC<Props> = ({ percent, actionItems, status, metadata }) => (\n  <CardContainer>\n    <ContentContainer>\n      <LabelContainer>\n        <Text size={15} fw=\"500\" mr={10}>\n          Indexing Status\n        </Text>\n        {!isUndefined(status) ? (\n          <Tag text={statusText[status]} state={indexingStatusCode(status)} />\n        ) : (\n          <Spinner />\n        )}\n      </LabelContainer>\n      {!!metadata?.targetHeight && (\n        <TagsContainer>\n          <TagItem horizontal versionType=\"Latest Block\" prefix=\"#\" value={metadata.targetHeight} />\n          <TagItem\n            horizontal\n            versionType=\"Indexing Block\"\n            prefix=\"#\"\n            value={metadata.lastProcessedHeight}\n          />\n        </TagsContainer>\n      )}\n      <ProgressBar progress={percent / 100} />\n    </ContentContainer>\n    <ActionContainer>\n      {actionItems.map(({ title, action }) => (\n        <Button mt={10} key={title} width={265} title={title} onClick={action} />\n      ))}\n    </ActionContainer>\n  </CardContainer>\n);\n\nexport default ProjectStatusView;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { FC } from 'react';\nimport styled from 'styled-components';\n\nimport { Text } from 'components/primary';\nimport { ProjectDetails } from 'hooks/projectHook';\n\ntype InfoProps = {\n  title: string;\n  desc: string;\n  ml?: number;\n  mt?: number;\n};\n\nconst InfoView: FC<InfoProps> = ({ title, desc, ml, mt }) => (\n  // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  <InfoContainer ml={ml} mt={mt}>\n    <Text size={18}>{title}</Text>\n    <Text mt={15} size={16} color=\"gray\">\n      {desc}\n    </Text>\n  </InfoContainer>\n);\n\ntype Props = {\n  id: string;\n  project: ProjectDetails;\n};\n\nconst formatDate = (date: string) => new Date(date).toLocaleDateString();\n\nconst ProjectDetailsView: FC<Props> = ({ project }) => {\n  const {\n    description,\n    websiteUrl,\n    codeUrl,\n    currentDeployment,\n    createdTimestamp,\n    updatedTimestamp,\n  } = project;\n  return (\n    <Container>\n      <LeftContainer>\n        <InfoView title=\"Description\" desc={description} />\n        <BottomContainer>\n          <InfoView title=\"Created\" desc={formatDate(createdTimestamp)} />\n          <InfoView ml={150} title=\"Last Updated\" desc={formatDate(updatedTimestamp)} />\n        </BottomContainer>\n      </LeftContainer>\n      <RightContainer>\n        <InfoView title=\"Deployment ID\" desc={currentDeployment} />\n        <InfoView mt={30} title=\"Website URL\" desc={websiteUrl} />\n        <InfoView mt={30} title=\"Source Code URL\" desc={codeUrl} />\n      </RightContainer>\n    </Container>\n  );\n};\n\nexport default ProjectDetailsView;\n\nconst Container = styled.div`\n  display: flex;\n  min-height: 350px;\n  margin-top: 20px;\n`;\n\nconst LeftContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  min-width: 500px;\n  width: 45%;\n`;\n\nconst BottomContainer = styled.div`\n  display: flex;\n  align-items: center;\n  margin-top: 50px;\n`;\n\nconst RightContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  margin-left: 80px;\n`;\n\nconst InfoContainer = styled.div<{ mt?: number; ml?: number }>`\n  display: flex;\n  flex-direction: column;\n  margin-left: ${({ ml }) => ml ?? 0}px;\n  margin-top: ${({ mt }) => mt ?? 0}px;\n`;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useEffect, useMemo, useState } from 'react';\nimport { useHistory, useLocation, useParams } from 'react-router-dom';\nimport { useMutation } from '@apollo/client';\nimport { FormikHelpers, FormikValues } from 'formik';\nimport { isUndefined } from 'lodash';\n\nimport AlertView from 'components/alertView';\nimport ModalView from 'components/modalView';\nimport { useLoading } from 'containers/loadingContext';\nimport { useNotification } from 'containers/notificationContext';\nimport {\n  getQueryMetadata,\n  ProjectDetails,\n  useIndexingStatus,\n  useNodeVersions,\n  useProjectDetails,\n  useProjectService,\n  useQueryVersions,\n} from 'hooks/projectHook';\nimport { useRouter } from 'hooks/routerHook';\nimport { useIndexingAction } from 'hooks/transactionHook';\nimport { ProjectFormKey } from 'types/schemas';\nimport { ProjectNotification } from 'utils/notification';\nimport { calculateProgress, isTrue } from 'utils/project';\nimport { PAYG_PRICE, REMOVE_PROJECT, START_PROJECT, STOP_PROJECT } from 'utils/queries';\nimport { txErrorNotification } from 'utils/transactions';\n\nimport ProjectDetailsHeader from './components/projectDetailHeader';\nimport ProjectPaygView from './components/projectPaygView';\nimport ProjectServiceCard from './components/projectServiceCard';\nimport ProjectStatusView from './components/projectStatusView';\nimport ProjectTabbarView from './components/projectTabBarView';\nimport {\n  aletMessages,\n  createAnnounceIndexingSteps,\n  createNetworkButtonItems,\n  createNotIndexingSteps,\n  createPaygButtonItems,\n  createPaygChangePriceSteps,\n  createPaygCloseSteps,\n  createPaygOpenSteps,\n  createReadyIndexingSteps,\n  createRemoveProjectSteps,\n  createRestartProjectSteps,\n  createServiceButtonItems,\n  createStartIndexingSteps,\n  createStopIndexingSteps,\n  createStopProjectSteps,\n  notifications,\n  ProjectActionName,\n} from './config';\nimport { Container, ContentContainer } from './styles';\nimport { IndexingStatus, PaygStatus, ProjectAction, ProjectStatus, TQueryMetadata } from './types';\n\nconst ProjectDetailsPage = () => {\n  const { id } = useParams() as { id: string };\n  const { data: projectDetails } = useLocation().state as { data: ProjectDetails };\n\n  const status = useIndexingStatus(id);\n  const projectInfo = useProjectDetails(id);\n  const { setPageLoading } = useLoading();\n  const history = useHistory();\n  useRouter(!projectDetails);\n\n  const indexingAction = useIndexingAction(id);\n  const { projectService, getProjectService } = useProjectService(id);\n  const paygStatus = projectService?.paygPrice ? PaygStatus.Open : PaygStatus.Close;\n  const { dispatchNotification } = useNotification();\n  const [startProjectRequest, { loading: startProjectLoading }] = useMutation(START_PROJECT);\n  const [stopProjectRequest, { loading: stopProjectLoading }] = useMutation(STOP_PROJECT);\n  const [removeProjectRequest, { loading: removeProjectLoading }] = useMutation(REMOVE_PROJECT);\n  const [paygPriceRequest, { loading: paygPriceLoading }] = useMutation(PAYG_PRICE);\n  const queryVersions = useQueryVersions(id);\n  const nodeVersions = useNodeVersions(id);\n\n  const [progress, setProgress] = useState(0);\n  const [metadata, setMetadata] = useState<TQueryMetadata>();\n  const [visible, setVisible] = useState(false);\n  const [actionType, setActionType] = useState<ProjectAction>();\n\n  const fetchQueryMetadata = async () => {\n    const data = await getQueryMetadata(id);\n    setMetadata(data);\n  };\n\n  const updateServiceStatus = () => {\n    const intervalId = setInterval(() => fetchQueryMetadata(), 6000);\n    setTimeout(() => {\n      clearInterval(intervalId);\n      getProjectService();\n    }, 60000);\n  };\n\n  useEffect(() => {\n    setPageLoading(isUndefined(projectInfo));\n  }, [projectInfo]);\n\n  useEffect(() => {\n    metadata && setProgress(calculateProgress(metadata.targetHeight, metadata.lastProcessedHeight));\n  }, [metadata]);\n\n  useEffect(() => {\n    fetchQueryMetadata();\n  }, [status]);\n\n  const loading = useMemo(\n    () => startProjectLoading || stopProjectLoading || removeProjectLoading || paygPriceLoading,\n    [startProjectLoading, stopProjectLoading, removeProjectLoading, paygPriceLoading]\n  );\n\n  const projectStatus = useMemo(() => {\n    const healthy = metadata?.indexerStatus === 'HEALTHY';\n    switch (status) {\n      case IndexingStatus.NOTINDEXING:\n        return healthy ? ProjectStatus.Started : ProjectStatus.NotIndexing;\n      case IndexingStatus.INDEXING:\n        return healthy ? ProjectStatus.Indexing : ProjectStatus.Terminated;\n      case IndexingStatus.READY:\n        return healthy ? ProjectStatus.Ready : ProjectStatus.Terminated;\n      default:\n        return ProjectStatus.NotIndexing;\n    }\n  }, [status, metadata]);\n\n  const alertInfo = useMemo(\n    () =>\n      projectStatus === ProjectStatus.Terminated\n        ? { visible: true, ...aletMessages[projectStatus] }\n        : { visible: false },\n    [projectStatus]\n  );\n\n  const networkBtnItems = createNetworkButtonItems((type: ProjectAction) => {\n    setActionType(type);\n    setVisible(true);\n  });\n\n  const serviceBtnItems = createServiceButtonItems((type: ProjectAction) => {\n    setActionType(type);\n    setVisible(true);\n  });\n\n  const paygBtnItems = createPaygButtonItems((type: ProjectAction) => {\n    setActionType(type);\n    setVisible(true);\n  });\n\n  const networkActionItems = useMemo(() => {\n    if (isUndefined(projectStatus)) return [];\n    return networkBtnItems[projectStatus];\n  }, [projectStatus]);\n\n  const serviceActionItems = useMemo(() => {\n    if (isUndefined(projectStatus)) return [];\n    return serviceBtnItems[projectStatus];\n  }, [projectStatus]);\n\n  const paygActionItems = useMemo(() => {\n    if (isUndefined(paygStatus)) return [];\n    return paygBtnItems[paygStatus];\n  }, [paygStatus]);\n\n  const onModalClose = (error?: any) => {\n    setVisible(false);\n    if (error?.data?.message) {\n      dispatchNotification(txErrorNotification(error.data.message));\n    }\n  };\n\n  const projectConfig = useMemo(\n    () => ({\n      networkEndpoint: projectService?.networkEndpoint ?? '',\n      networkDictionary: projectService?.networkDictionary ?? '',\n      nodeVersion: projectService?.nodeVersion ? projectService.nodeVersion : nodeVersions[0],\n      queryVersion: projectService?.queryVersion ? projectService.queryVersion : queryVersions[0],\n      poiEnabled: projectService?.networkEndpoint ? projectService?.poiEnabled : true,\n      forceEnabled: projectService?.networkEndpoint ? projectService?.forceEnabled : false,\n      paygPrice: projectService?.paygPrice ? projectService?.paygPrice : '',\n      paygExpiration: projectService?.paygExpiration ? projectService?.paygExpiration : 3600,\n      paygThreshold: projectService?.paygThreshold ? projectService?.paygThreshold : 1000,\n      paygOverflow: projectService?.paygOverflow ? projectService?.paygOverflow : 5,\n    }),\n    [projectService, nodeVersions, queryVersions]\n  );\n\n  const imageVersions = useMemo(\n    () => ({ query: queryVersions, node: nodeVersions }),\n    [nodeVersions, queryVersions]\n  );\n\n  const projectStateChange = (\n    type: ProjectNotification.Started | ProjectNotification.Terminated\n  ) => {\n    const notification = notifications[type];\n    dispatchNotification(notification);\n    updateServiceStatus();\n  };\n\n  const startProject = async (values: FormikValues, formHelper: FormikHelpers<FormikValues>) => {\n    try {\n      const { poiEnabled, forceEnabled } = values;\n      await startProjectRequest({\n        variables: {\n          ...values,\n          poiEnabled: isTrue(poiEnabled),\n          forceEnabled: isTrue(forceEnabled),\n          id,\n        },\n      });\n\n      onModalClose();\n      projectStateChange(ProjectNotification.Started);\n    } catch (e) {\n      formHelper.setErrors({ [ProjectFormKey.networkEndpoint]: 'Invalid service endpoint' });\n    }\n  };\n\n  const stopProject = async () => {\n    try {\n      await stopProjectRequest({ variables: { id } });\n      onModalClose();\n      projectStateChange(ProjectNotification.Terminated);\n    } catch (e) {\n      console.error('fail to stop project', e);\n    }\n  };\n\n  const removeProject = async () => {\n    try {\n      await removeProjectRequest({ variables: { id } });\n      history.replace('/projects');\n    } catch (e) {\n      console.error('fail to remove project', e);\n    }\n  };\n\n  const paygChangePrice = async (values: FormikValues, formHelper: FormikHelpers<FormikValues>) => {\n    try {\n      const { paygPrice, paygExpiration, paygThreshold, paygOverflow } = values;\n      await paygPriceRequest({\n        variables: {\n          paygPrice,\n          paygExpiration: Number(paygExpiration),\n          paygThreshold: Number(paygThreshold),\n          paygOverflow: Number(paygOverflow),\n          id,\n        },\n      });\n      onModalClose();\n      updateServiceStatus();\n    } catch (e) {\n      formHelper.setErrors({ [ProjectFormKey.paygPrice]: 'Invalid PAYG' });\n    }\n  };\n\n  const paygClose = async () => {\n    try {\n      onModalClose();\n      await paygPriceRequest({\n        variables: {\n          paygPrice: '',\n          paygExpiration: projectService?.paygExpiration,\n          paygThreshold: projectService?.paygThreshold,\n          paygOverflow: projectService?.paygOverflow,\n          id,\n        },\n      });\n    } catch (e) {\n      console.error('fail to close PAYG', e);\n    }\n  };\n\n  const startIndexingSteps = createStartIndexingSteps(projectConfig, imageVersions, startProject);\n  const restartProjectSteps = createRestartProjectSteps(projectConfig, imageVersions, startProject);\n  const stopIndexingSteps = createStopIndexingSteps(stopProject);\n\n  const stopProjectSteps = createStopProjectSteps(stopProject);\n  const removeProjectSteps = createRemoveProjectSteps(removeProject);\n  const announceIndexingSteps = createAnnounceIndexingSteps(() =>\n    indexingAction(ProjectAction.AnnounceIndexing, onModalClose)\n  );\n  const announceReadySteps = createReadyIndexingSteps(() =>\n    indexingAction(ProjectAction.AnnounceReady, onModalClose)\n  );\n  const announceNotIndexingSteps = createNotIndexingSteps(() =>\n    indexingAction(ProjectAction.AnnounceNotIndexing, onModalClose)\n  );\n  const paygOpenSteps = createPaygOpenSteps(projectConfig, paygChangePrice);\n  const paygChangePriceSteps = createPaygChangePriceSteps(projectConfig, paygChangePrice);\n  const paygCloseSteps = createPaygCloseSteps(paygClose);\n\n  const steps = {\n    ...startIndexingSteps,\n    ...restartProjectSteps,\n    ...stopIndexingSteps,\n    ...stopProjectSteps,\n    ...removeProjectSteps,\n    ...announceIndexingSteps,\n    ...announceReadySteps,\n    ...announceNotIndexingSteps,\n    ...paygOpenSteps,\n    ...paygChangePriceSteps,\n    ...paygCloseSteps,\n  };\n\n  const [modalTitle, modalSteps] = useMemo(() => {\n    if (!actionType) return ['', []];\n    return [ProjectActionName[actionType], steps[actionType]];\n  }, [actionType, steps]);\n\n  return (\n    <Container>\n      {projectInfo && (\n        <ContentContainer>\n          <ProjectDetailsHeader id={id} projectStatus={projectStatus} project={projectInfo} />\n          <ProjectStatusView\n            percent={progress}\n            actionItems={networkActionItems}\n            status={status}\n            metadata={metadata}\n          />\n          <ProjectServiceCard id={id} actionItems={serviceActionItems} data={metadata} />\n          <ProjectPaygView\n            actionItems={paygActionItems}\n            status={paygStatus}\n            price={projectService?.paygPrice}\n            expiration={projectService?.paygExpiration}\n            threshold={projectService?.paygThreshold}\n            overflow={projectService?.paygOverflow}\n          />\n          <ProjectTabbarView id={id} project={projectInfo} />\n        </ContentContainer>\n      )}\n      <ModalView\n        visible={visible}\n        title={modalTitle}\n        onClose={onModalClose}\n        // @ts-ignore\n        steps={modalSteps}\n        type={actionType}\n        loading={loading}\n      />\n      <AlertView {...alertInfo} />\n    </Container>\n  );\n};\n\nexport default ProjectDetailsPage;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { ProgressBar } from '@subql/react-ui';\nimport styled from 'styled-components';\n\nexport const Container = styled.div`\n  display: flex;\n  flex: 1;\n  justify-content: center;\n`;\n\nexport const ContentContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  min-width: 600px;\n  padding: 10px 100px;\n  padding-bottom: 150px;\n  overflow-y: scroll;\n`;\n\nexport const HeaderContainer = styled.div`\n  display: flex;\n  width: 100%;\n  min-width: 600px;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nexport const ItemContainer = styled.div<{\n  flex?: number;\n  pl?: number;\n  mw?: number;\n  color?: string;\n}>`\n  display: flex;\n  flex: ${({ flex }) => flex ?? 1};\n  background-color: ${({ color }) => color ?? 'white'};\n  padding-left: ${({ pl }) => pl ?? 0}px;\n  min-width: ${({ mw }) => mw ?? 100}px;\n  margin-right: 15px;\n  align-items: center;\n`;\n\n/// Project item styles\nexport const ProjectItemContainer = styled.div`\n  display: flex;\n  width: 100%;\n  min-width: 600px;\n  min-height: 90px;\n  margin: 10px 0px;\n  padding: 10px 10px;\n  background-color: white;\n  :hover {\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n    cursor: pointer;\n  }\n`;\n\nexport const Progress = styled(ProgressBar)`\n  max-width: 60%;\n  min-width: 300;\n`;\n\nexport const ProfileContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 80%;\n  margin-left: 20px;\n`;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport styled from 'styled-components';\n\nimport { Text } from 'components/primary';\n\nimport { ItemContainer } from '../styles';\n\nconst Container = styled.div`\n  display: flex;\n  width: 100%;\n  min-width: 600px;\n  height: 60px;\n  margin-top: 50px;\n  margin-bottom: 30px;\n`;\n\nconst projetHeaderItems = [\n  { title: 'Project Name', flex: 7 },\n  { title: 'Progress', flex: 6 },\n  { title: 'Status', flex: 1 },\n];\n\nconst ProjecItemsHeader = () => (\n  <Container>\n    {projetHeaderItems.map(({ title, flex }) => (\n      <ItemContainer key={title} color=\"#f6f9fc\" flex={flex}>\n        <Text color=\"gray\">{title}</Text>\n      </ItemContainer>\n    ))}\n  </Container>\n);\n\nexport default ProjecItemsHeader;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { FC, useMemo } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Spinner } from '@subql/react-ui';\nimport { isUndefined } from 'lodash';\n\nimport Avatar from 'components/avatar';\nimport { Text } from 'components/primary';\nimport StatusLabel from 'components/statusLabel';\nimport { ProjectDetails, useDeploymentStatus } from 'hooks/projectHook';\nimport { cidToBytes32 } from 'utils/ipfs';\nimport { calculateProgress } from 'utils/project';\n\nimport { statusColor, statusText } from '../constant';\nimport { ItemContainer, ProfileContainer, Progress, ProjectItemContainer } from '../styles';\n\ntype Props = ProjectDetails;\n\nconst ProjectItem: FC<Props> = (props) => {\n  const { id, name, metadata } = props;\n\n  const history = useHistory();\n  const status = useDeploymentStatus(id);\n\n  const progress = useMemo(() => {\n    if (!metadata) return 0;\n    const { targetHeight, lastProcessedHeight } = metadata;\n    return calculateProgress(targetHeight, lastProcessedHeight);\n  }, [metadata]);\n\n  const pushDetailPage = () => history.push(`/project/${id}`, { data: { ...props, status } });\n\n  return (\n    <ProjectItemContainer onClick={pushDetailPage}>\n      <ItemContainer pl={15} flex={7}>\n        <Avatar address={cidToBytes32(id)} size={70} />\n        <ProfileContainer>\n          <Text fw=\"600\" size={18}>\n            {name}\n          </Text>\n          <Text size={13} mt={5}>\n            {id}\n          </Text>\n        </ProfileContainer>\n      </ItemContainer>\n      <ItemContainer flex={6}>\n        <Progress progress={progress / 100} />\n      </ItemContainer>\n      <ItemContainer flex={1}>\n        {!isUndefined(status) ? (\n          <StatusLabel text={statusText[status]} color={statusColor[status]} />\n        ) : (\n          <Spinner />\n        )}\n      </ItemContainer>\n    </ProjectItemContainer>\n  );\n};\n\nexport default ProjectItem;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { FC } from 'react';\nimport styled from 'styled-components';\n\nimport IntroductionView from 'components/introductionView';\n\nexport const Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  align-items: center;\n  justify-content: flex-start;\n  margin-top: 80px;\n`;\n\ntype Props = {\n  onClick: () => void;\n};\n\nconst linkUrl = 'https://frontier.subquery.network/explorer';\nconst ExplorerLink = () => (\n  <a target=\"_blank\" href={linkUrl} rel=\"noreferrer\">\n    SubQuery Explorer\n  </a>\n);\n\nconst EmptyView: FC<Props> = ({ onClick }) => {\n  return (\n    <Container>\n      <IntroductionView\n        item={{\n          title: 'Start to index a Subquery project',\n          desc: 'Go to Subquery Explorer to start exploring query projects, pick the project you are interesting and copy the deployment id in the page, then press the add project button and paste in deployment id, add the project into you coordinator service, and you can manage the projects in indexer app. ',\n          buttonTitle: 'Add Project',\n        }}\n        onClick={onClick}\n        link={ExplorerLink()}\n      />\n    </Container>\n  );\n};\n\nexport default EmptyView;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useEffect, useState } from 'react';\nimport { useLazyQuery, useMutation } from '@apollo/client';\nimport { isEmpty, isUndefined } from 'lodash';\n\nimport ModalView from 'components/modalView';\nimport { Button, Text } from 'components/primary';\nimport { useLoading } from 'containers/loadingContext';\nimport { useIsIndexer } from 'hooks/indexerHook';\nimport { ProjectDetails, useProjectDetailList } from 'hooks/projectHook';\nimport { ProjectsAction } from 'pages/project-details/types';\nimport { ProjectFormKey } from 'types/schemas';\nimport { ADD_PROJECT, GET_PROJECTS } from 'utils/queries';\n\nimport ProjecItemsHeader from './components/projecItemsHeader';\nimport ProjectItem from './components/projectItem';\nimport EmptyView from './components/projectsEmptyView';\nimport { createAddProjectSteps } from './constant';\nimport { Container, ContentContainer, HeaderContainer } from './styles';\n\nconst Projects = () => {\n  const isIndexer = useIsIndexer();\n  const { setPageLoading } = useLoading();\n  const [addProject, { loading }] = useMutation(ADD_PROJECT);\n  const [getProjectList, { data }] = useLazyQuery(GET_PROJECTS, { fetchPolicy: 'network-only' });\n  const { projectDetailList } = useProjectDetailList(data);\n\n  const [visible, setVisible] = useState(false);\n\n  useEffect(() => {\n    setPageLoading(isUndefined(projectDetailList));\n  }, [projectDetailList]);\n\n  useEffect(() => {\n    setPageLoading(true);\n    getProjectList();\n  }, []);\n\n  const onModalClose = () => {\n    setVisible(false);\n  };\n\n  const step = createAddProjectSteps(async (values, helper) => {\n    try {\n      // TODO: need to verify the id with subql-common library\n      const id = values[ProjectFormKey.deploymentId].trim();\n      await addProject({ variables: { id } });\n\n      setVisible(false);\n      getProjectList();\n    } catch (_) {\n      helper.setErrors({ [ProjectFormKey.deploymentId]: 'Invalid deployment id' });\n    }\n  });\n\n  const renderProjects = () => {\n    if (isUndefined(projectDetailList)) return null;\n    return !isEmpty(projectDetailList) ? (\n      <ContentContainer>\n        <HeaderContainer>\n          <Text size={45}>Projects</Text>\n          <Button title=\"Add Project\" onClick={() => setVisible(true)} />\n        </HeaderContainer>\n        <ProjecItemsHeader />\n        {projectDetailList.map((props: ProjectDetails) => (\n          <ProjectItem key={props.id} {...props} />\n        ))}\n      </ContentContainer>\n    ) : (\n      <EmptyView onClick={() => setVisible(true)} />\n    );\n  };\n\n  return (\n    <Container>\n      {isIndexer && renderProjects()}\n      <ModalView\n        visible={visible}\n        // @ts-ignore\n        title={step.addProject[0].title}\n        onClose={onModalClose}\n        // @ts-ignore\n        steps={step.addProject}\n        currentStep={0}\n        type={ProjectsAction.addProject}\n        loading={loading}\n      />\n    </Container>\n  );\n};\n\nexport default Projects;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { isUndefined } from 'lodash';\n\nimport { useContractSDK } from 'containers/contractSdk';\nimport { useWeb3 } from 'hooks/web3Hook';\nimport { RegisterStep } from 'pages/register/types';\n\nexport const useIsApproved = () => {\n  const [isApprove, setIsApprove] = useState<boolean>();\n  const { account } = useWeb3();\n  const sdk = useContractSDK();\n\n  const checkAllowance = useCallback(async () => {\n    if (!account || !sdk) return;\n    try {\n      const mimAmount = (await sdk.indexerRegistry.minimumStakingAmount()) ?? 1000;\n      const amount = await sdk.sqToken.allowance(account, sdk.staking.address);\n      setIsApprove(!!amount.gte(mimAmount));\n    } catch {\n      setIsApprove(false);\n    }\n  }, [sdk, account]);\n\n  useEffect(() => {\n    checkAllowance();\n  }, [checkAllowance]);\n\n  return isApprove;\n};\n\nexport const useInitialStep = (): RegisterStep | undefined => {\n  const isApproved = useIsApproved();\n\n  return useMemo(() => {\n    if (isUndefined(isApproved)) return undefined;\n    if (isApproved) return RegisterStep.register;\n    return RegisterStep.onboarding;\n  }, [isApproved]);\n};\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { RegisterStep } from './types';\n\nconst prompts = {\n  [RegisterStep.onboarding]: {\n    title: 'Stake to become a Subquery Indexer',\n    desc: 'Become an Indexer so you can index subquery projects. You need to stake a minimum of 1000 SQT in order to index subquery projects. Learn more about the indexer',\n    buttonTitle: 'Get Started',\n  },\n  [RegisterStep.authorisation]: {\n    title: 'Request approve authorisation',\n    desc: 'Indexer Admin app need you to approve the authorisation request to deposit the SQT token into Subquery Staking contract, this is a one-time operation for the specific account. Please press the approve button then confirm and send the transaction on MetaMask.',\n    buttonTitle: 'Approve',\n  },\n  [RegisterStep.register]: {\n    title: 'Stake to become a Subquery Indexer',\n    desc: '',\n    // 'Become an indexer that you can index subquery project. You need to stake a minimum of 1000 SQT to index subquery project. The time for processing the transaciton dependent on the current status of the network and the gas fee, it usually takes 30 seconds',\n    buttonTitle: 'Register Indexer',\n  },\n  [RegisterStep.sync]: {\n    title: 'Sync the indexer with coordinator service',\n    desc: 'This account has been an indexer already, please press the sync button to sync this account with your coordinator service, otherwise you can switch your account in the wallet to select the correct account.',\n    buttonTitle: 'Sync',\n  },\n};\n\nexport default prompts;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { FC } from 'react';\nimport { Formik, FormikHelpers } from 'formik';\n\nimport { FieldItem } from 'components/formItem';\nimport { Button, ButtonContainer, FormContainer, Text } from 'components/primary';\nimport {\n  initialRegisterValues,\n  RegisterFormKey,\n  RegisterFormSchema,\n  TRegisterValues,\n} from 'types/schemas';\n\nimport prompts from './prompts';\nimport { ContentContainer } from './styles';\nimport { RegisterStep } from './types';\n\ntype Props = {\n  loading: boolean;\n  onSubmit: (values: TRegisterValues, helper: FormikHelpers<TRegisterValues>) => void;\n};\n\nconst IndexerRegistryView: FC<Props> = ({ onSubmit, loading }) => {\n  const { title, buttonTitle } = prompts[RegisterStep.register];\n  return (\n    <ContentContainer>\n      <Text mb={50} size={35} fw=\"bold\">\n        {title}\n      </Text>\n      <Formik\n        initialValues={initialRegisterValues}\n        validationSchema={RegisterFormSchema}\n        onSubmit={onSubmit}\n      >\n        {({ errors, submitForm }) => (\n          <FormContainer>\n            <FieldItem title=\"Indexer Name\" fieldKey={RegisterFormKey.name} errors={errors} />\n            <FieldItem\n              title=\"Proxy Endpoint\"\n              fieldKey={RegisterFormKey.proxyEndpoint}\n              errors={errors}\n            />\n            <FieldItem title=\"Staking Amount\" fieldKey={RegisterFormKey.amount} errors={errors} />\n            <FieldItem\n              title=\"Commission Rate (%)\"\n              fieldKey={RegisterFormKey.rate}\n              errors={errors}\n            />\n            <ButtonContainer>\n              <Button\n                mt={20}\n                width={300}\n                type=\"primary\"\n                title={buttonTitle}\n                loading={loading}\n                onClick={submitForm}\n              />\n            </ButtonContainer>\n          </FormContainer>\n        )}\n      </Formik>\n    </ContentContainer>\n  );\n};\n\nexport default IndexerRegistryView;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { FormikHelpers } from 'formik';\nimport { isUndefined } from 'lodash';\n\nimport IntroductionView from 'components/introductionView';\nimport { useContractSDK } from 'containers/contractSdk';\nimport { useCoordinatorIndexer } from 'containers/coordinatorIndexer';\nimport { useLoading } from 'containers/loadingContext';\nimport { useNotification } from 'containers/notificationContext';\nimport { useIsIndexer, useIsRegistedIndexer, useTokenBalance } from 'hooks/indexerHook';\nimport { useInitialStep } from 'hooks/registerHook';\nimport { useSigner, useWeb3 } from 'hooks/web3Hook';\nimport { RegisterFormKey, TRegisterValues } from 'types/schemas';\nimport { indexerRegistry, indexerRequestApprove } from 'utils/indexerActions';\nimport { createIndexerMetadata } from 'utils/ipfs';\nimport { verifyProxyEndpoint } from 'utils/validateService';\n\nimport { Container } from '../login/styles';\nimport IndexerRegistryView from './indexerRegistryView';\nimport prompts from './prompts';\nimport { RegistrySteps } from './styles';\nimport { RegisterStep } from './types';\nimport { getStepIndex, getStepStatus, registerSteps } from './utils';\n\n// TODO: refactor\nconst RegisterPage = () => {\n  const signer = useSigner();\n  const { account } = useWeb3();\n  const isRegistedIndexer = useIsRegistedIndexer();\n  const isIndexer = useIsIndexer();\n  const sdk = useContractSDK();\n  const { tokenBalance, getTokenBalance } = useTokenBalance(account);\n  const history = useHistory();\n  const initialStep = useInitialStep();\n  const { updateIndexer } = useCoordinatorIndexer();\n  const { setPageLoading } = useLoading();\n  const { dispatchNotification } = useNotification();\n\n  const [currentStep, setStep] = useState<RegisterStep>();\n  const [loading, setLoading] = useState<boolean>(false);\n\n  const isRegisterStep = useCallback(() => currentStep === RegisterStep.register, [currentStep]);\n\n  useEffect(() => {\n    setPageLoading(isUndefined(initialStep) || isUndefined(isRegistedIndexer));\n    if (initialStep) setStep(initialStep);\n    if (isRegistedIndexer) setStep(RegisterStep.sync);\n  }, [initialStep, isRegistedIndexer]);\n\n  useEffect(() => {\n    if (!account) {\n      history.replace('/');\n    } else if (isIndexer) {\n      history.replace('/account');\n    }\n  }, [isIndexer, account]);\n\n  const item = useMemo(() => currentStep && prompts[currentStep], [currentStep]);\n\n  const moveToNextStep = () => {\n    setLoading(false);\n    setStep(registerSteps[getStepIndex(currentStep) + 1] as RegisterStep);\n  };\n\n  const onTransactionFailed = (error: any) => {\n    console.error('Send transaction failed:', error);\n    setLoading(false);\n  };\n\n  const onSyncIndexer = useCallback(async () => {\n    setLoading(true);\n    if (!account) {\n      return dispatchNotification({\n        type: 'danger',\n        title: 'Fail to sync the indexer',\n        message: 'Can not find account, make sure MetaMask is connected',\n      });\n    }\n\n    await updateIndexer(account);\n    setLoading(false);\n    return history.replace('/account');\n  }, [isIndexer]);\n\n  const onApprove = async () => {\n    setLoading(true);\n    try {\n      const tx = await indexerRequestApprove(sdk, signer, '100000000000');\n      const receipt = await tx.wait(1);\n      if (!receipt.status) {\n        throw new Error('Send approve transaction failed');\n      }\n      moveToNextStep();\n    } catch (e) {\n      onTransactionFailed(e);\n    }\n  };\n\n  const onIndexerRegister = async (\n    values: TRegisterValues,\n    helper: FormikHelpers<TRegisterValues>\n  ) => {\n    try {\n      setLoading(true);\n      await getTokenBalance();\n\n      const { name, proxyEndpoint, amount, rate } = values;\n      if (Number(tokenBalance) < amount) {\n        setLoading(false);\n        helper.setErrors({\n          [RegisterFormKey.amount]: `Account balance ${tokenBalance} is not enough for staking ${amount} SQT`,\n        });\n        return;\n      }\n\n      const isValidProxyEndpoint = await verifyProxyEndpoint(proxyEndpoint);\n      if (!isValidProxyEndpoint) {\n        setLoading(false);\n        helper.setErrors({ [RegisterFormKey.proxyEndpoint]: 'Invalid proxy endpoint' });\n        return;\n      }\n\n      const indexerMetadata = await createIndexerMetadata(name, proxyEndpoint);\n      const tx = await indexerRegistry(\n        sdk,\n        signer,\n        amount.toString(),\n        indexerMetadata,\n        rate * 10000\n      );\n      const receipt = await tx.wait(1);\n      if (!receipt.status) {\n        throw new Error('Send indexer registry transaction failed');\n      }\n\n      moveToNextStep();\n    } catch (e) {\n      onTransactionFailed(e);\n    }\n  };\n\n  const registerActions = {\n    [RegisterStep.onboarding]: () => setStep(RegisterStep.authorisation),\n    [RegisterStep.authorisation]: onApprove,\n    [RegisterStep.register]: onIndexerRegister,\n    [RegisterStep.sync]: onSyncIndexer,\n  };\n\n  const renderSteps = () => {\n    if (currentStep === RegisterStep.onboarding) return null;\n    const currentIndex = getStepIndex(currentStep);\n    return (\n      <RegistrySteps current={currentIndex}>\n        {registerSteps.map((title, i) => (\n          <RegistrySteps.Step key={title} status={getStepStatus(currentIndex, i)} title={title} />\n        ))}\n      </RegistrySteps>\n    );\n  };\n\n  return (\n    <Container>\n      {renderSteps()}\n      {currentStep && item && !isRegisterStep() && (\n        // @ts-ignore\n        <IntroductionView item={item} loading={loading} onClick={registerActions[currentStep]} />\n      )}\n      {currentStep && isRegisterStep() && (\n        <IndexerRegistryView loading={loading} onSubmit={onIndexerRegister} />\n      )}\n    </Container>\n  );\n};\n\nexport default RegisterPage;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { FC } from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport { ApolloProvider } from '@apollo/client';\nimport * as Sentry from '@sentry/react';\nimport { Button, Typography } from '@subql/react-ui';\n\nimport Loading from 'components/loading';\nimport { ContractSDKProvider } from 'containers/contractSdk';\nimport { CoordinatorIndexerProvider } from 'containers/coordinatorIndexer';\nimport { LoadingProvider } from 'containers/loadingContext';\nimport { NotificationProvider, Notifications } from 'containers/notificationContext';\nimport { Web3Provider } from 'containers/web3';\nimport { useShowMetaMask } from 'hooks/web3Hook';\nimport MetaMaskView from 'pages/metamask/metamaskView';\nimport { coordinatorServiceUrl, createApolloClient } from 'utils/apolloClient';\n\nimport * as Pages from './pages';\n\nimport 'react-notifications-component/dist/theme.css';\nimport 'antd/dist/antd.css';\nimport './App.css';\n\nconst AppContents = () => {\n  const showMetaMask = useShowMetaMask();\n\n  return (\n    <Router>\n      <Pages.Header />\n      <div className=\"Main\">\n        {!showMetaMask ? (\n          <Switch>\n            <Route component={Pages.Projects} path=\"/projects\" />\n            <Route exact component={Pages.ProjectDetail} path=\"/project/:id\" />\n            <Route component={Pages.Payg} path=\"/payg\" />\n            <Route component={Pages.Account} path=\"/account\" />\n            <Route component={Pages.ControllerManagement} path=\"/controller-management\" />\n            <Route component={Pages.Network} path=\"/network\" />\n            <Route component={Pages.Register} path=\"/register\" />\n            <Route component={Pages.Login} path=\"/\" />\n          </Switch>\n        ) : (\n          <MetaMaskView />\n        )}\n        <Notifications />\n        <Loading />\n      </div>\n      <Pages.Footer />\n    </Router>\n  );\n};\n\nconst ErrorFallback = ({ error, componentStack, resetError }: any) => {\n  return (\n    <div className=\"errorFallback\">\n      <Typography className=\"errorText\">Something went wrong:</Typography>\n      <Typography className=\"errorText\">{error?.message || error.toString()}</Typography>\n      <Typography>{componentStack}</Typography>\n      <Button onClick={resetError} colorScheme=\"gradient\" label=\"Try again.\" />\n    </div>\n  );\n};\n\nconst App: FC = () => (\n  <Sentry.ErrorBoundary fallback={ErrorFallback} showDialog>\n    <ApolloProvider client={createApolloClient(coordinatorServiceUrl)}>\n      <Web3Provider>\n        <ContractSDKProvider>\n          <CoordinatorIndexerProvider>\n            <LoadingProvider>\n              <NotificationProvider>\n                <div className=\"App\">\n                  <AppContents />\n                </div>\n              </NotificationProvider>\n            </LoadingProvider>\n          </CoordinatorIndexerProvider>\n        </ContractSDKProvider>\n      </Web3Provider>\n    </ApolloProvider>\n  </Sentry.ErrorBoundary>\n);\n\nexport default App;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as Sentry from '@sentry/react';\nimport { BrowserTracing } from '@sentry/tracing';\n\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nimport './index.css';\n\nSentry.init({\n  dsn: process.env.SENTRY_DSN,\n  integrations: [new BrowserTracing()],\n\n  // Set tracesSampleRate to 1.0 to capture 100%\n  tracesSampleRate: 1.0,\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","var map = {\n\t\"./moonbase.json\": 242,\n\t\"./testnet.json\": 622\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 621;","// Copyright 2020-2022 SubQuery Pte Ltd authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { utils } from 'ethers';\nimport { create } from 'ipfs-http-client';\n\nexport const IPFS_METADATA_CLIENT = create({ url: window.env.IPFS_GATEWAY });\nexport const IPFS_PROJECT_CLIENT = create({ url: 'https://ipfs.subquery.network/ipfs/api/v0' });\n\nexport function cidToBytes32(cid: string): string {\n  return `0x${Buffer.from(utils.base58.decode(cid)).slice(2).toString('hex')}`;\n}\n\nexport function bytes32ToCid(bytes: string): string {\n  // Add our default ipfs values for first 2 bytes:\n  // function:0x12=sha2, size:0x20=256 bits\n  // and cut off leading \"0x\"\n  const hashHex = `1220${bytes.slice(2)}`;\n  const hashBytes = Buffer.from(hashHex, 'hex');\n  return utils.base58.encode(hashBytes);\n}\n\nexport function concatU8A(a: Uint8Array, b: Uint8Array): Uint8Array {\n  const res = new Uint8Array(a.length + b.length);\n  res.set(a, 0);\n  res.set(b, a.length);\n  return res;\n}\n\nexport async function createIndexerMetadata(name: string, url: string): Promise<string> {\n  const result = await IPFS_METADATA_CLIENT.add(JSON.stringify({ name, url }), { pin: true });\n  const cid = result.cid.toV0().toString();\n  return cidToBytes32(cid);\n}\n\nexport async function cat(cid: string, client = IPFS_METADATA_CLIENT) {\n  const results = client.cat(cid);\n  let raw: Uint8Array | undefined;\n\n  // eslint-disable-next-line no-restricted-syntax\n  for await (const result of results) {\n    raw = raw ? concatU8A(raw, result) : result;\n  }\n  if (!raw) {\n    console.error(`Unable to fetch data from ipfs: ${cid}`);\n    return raw;\n  }\n\n  const result = Buffer.from(raw).toString('utf8');\n\n  try {\n    return JSON.parse(Buffer.from(raw).toString('utf8'));\n  } catch {\n    return result;\n  }\n}\n"],"sourceRoot":""}